<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Linked Data 101 - Querying data with SPARQL</title>
    <meta name="description" content="29 Feb 2016 - In the fourth part of our Linked Data 101 series we'll have a quick look what queries look like.">
	<meta name="robots" content="NOODP">
	
	<!-- Twitter Summary Card  -->
	
	<meta name="twitter:card" content="summary" />
	<meta name="twitter:site" content="@nwplanet" />
	<meta name="twitter:title" content="Linked Data 101 - Querying data with SPARQL" />
	<meta name="twitter:description" content="In the fourth part of our Linked Data 101 series we'll have a quick look what queries look like." />
	
	<!-- OpenGraph summary -->
	<meta name="og:title" content="Linked Data 101 - Querying data with SPARQL" />
	<meta name="og:description" content="In the fourth part of our Linked Data 101 series we'll have a quick look what queries look like." />
	
	
    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://networkedplanet.com/feed/" />
    <link rel="alternate" type="application/rss+xml" title="NetworkedPlanet &raquo; Feed" href="http://networkedplanet.com/feed/" />

    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/cookiecuttr.css" />
	<link rel="stylesheet" href="/css/netplan.css" />
	
	
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <link rel="canonical" href="http://networkedplanet.com/blog/2016/02/29/linked-data-101-querying.html">
    
</head>


  <body>

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
	<div class="navbar-header">
	  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
		<span class="sr-only">Toggle navigation</span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	  </button>
	  <a class="navbar-brand page-scroll" href="/#page-top"><img src="/assets/images/np_header.png" alt="NetworkedPlanet"/></a>
	</div>
	<div id="navbar" class="navbar-collapse collapse">
	  <ul class="nav navbar-nav">
		<li class="hidden">
			<a class="page-scroll" href="#page-top"></a>
		</li>
		<li>
			<a class="page-scroll" href="/#products">Products</a>
		</li>
		<li>
			<a class="page-scroll" href="/#services">Services</a>
		</li>
		<li>
			<a class="page-scroll" href="/#training">Training</a>
		</li>
		<li>
			<a class="page-scroll" href="/#contact">Contact Us</a>
		</li>
		<li>
			<a href="/support/">Support</a>
		</li>
		<li>
			<a href="/blog/">Blog</a>
		</li>
	  </ul>
	</div>
  </div>
</nav>


    <div class="container">
        <div class="post">

	<div class="spacer-top"></div>
	


<div class="container">

<ol class="breadcrumb">
 
  <li><a href="/">Home</a></li>

  
   
   

   <li><a href="/blog/">Blog</a></li>

   
  
 
 <li>Linked Data 101 - Querying data with SPARQL</li>
</ol>
</div>
	
  <header class="post-header">
    <h1 class="post-title">Linked Data 101 - Querying data with SPARQL</h1>
    <p class="post-meta">Feb 29, 2016 • Jen</p>
  </header>

  <article class="post-content">
	
    <p class="well text-center">This article is part of the <a href="/blog/tags/ld101-series/">Linked Data 101 series</a></p>

<h2 id="previously">Previously…</h2>

<p>So far in the Linked Data 101 series, we looked first at <a href="/blog/2016/02/16/linked-data-101-identifiers.html">why we use URIs as identifiers</a>, and then moved on to looking at <a href="/blog/2016/02/17/linked-data-101-predicates.html">predicates</a> in the second article. The third article had a walk-through of taking CSV data and <a href="/blog/2016/02/18/linked-data-101-making-data-linkable-tutorial.html">using Level Up online CSV to RDF converter</a> to structure the data ready for the Web of Data.</p>

<p>Now that we’ve got some RDF from Level Up, I’ll show you how to get started with some simple queries on that data. </p>

<h2 id="brightstardb">BrightstarDB</h2>

<p>There are various RDF data stores available for different platforms and with various offerings in terms of management tools. For the purpose of this article I’m going to use <a href="http://brightstardb.com/">BrightstarDB</a> as it’s a native .NET triple store (and cross-platform friendly), it’s open source, and also it’s <a href="http://networkedplanet.com/#products">ours</a>! </p>

<p>Installing BrightstarDB is very simple, grab the <a href="http://brightstardb.codeplex.com/">latest release</a> and then fire up the installer.</p>

<p><img src="/assets/images/blog/linkeddata101/pol-install2.png" alt="BrightstarDB installation" width="550px" class="img-medium img-responsive center-block bordered-image" /></p>

<p class="alert alert-info text-center">Full documentation about installing and developing with BrightstarDB as well as using Polaris, is available online at <a href="http://brightstardb.readthedocs.org/en/latest/">BrightstarDB documentation</a>.</p>

<h2 id="polaris">Polaris</h2>

<p><img src="/assets/images/blog/linkeddata101/pol-icon.png" alt="Polaris icon" width="120px" class="img-medium img-responsive pull-left gap-right-dbl gap-bottom bordered-image" /></p>

<p>Polaris is a Windows desktop application that allows a user to manage various aspects of local and remote BrightstarDB servers. Using Polaris you can:</p>

<ul>
  <li>Create and delete stores on the server</li>
  <li>Import N-Triples or N-Quads files into a store</li>
  <li>Run a SPARQL query against a store</li>
  <li>Run an update transaction against a store</li>
</ul>

<p style="clear:both;">We’re going to concentrate on creating a store, importing our triples and then doing simple queries on it.</p>

<h2 id="create-a-connection">Create a connection</h2>

<p>We can use different protocols - Embedded and REST - for connecting to the BrightstarDB server now installed on our machine. We’re going to use the embedded protocol*:</p>

<ol>
  <li>Select File &gt; New Connection</li>
  <li>Enter “Embedded” as the Connection Name</li>
  <li>Select “Embedded” as the Connection Type</li>
  <li>Select a file path to use as the stores directory**</li>
  <li>Click OK</li>
</ol>

<p>* If you prefer to run the BrightstarDB service a different way, you can <a href="http://brightstardb.readthedocs.org/en/latest/Running_BrightstarDB/#">read more in the documentation here</a></p>

<p>** Make sure you have enough security access rights to read and write to that location</p>

<h2 id="create-a-data-store">Create a data store</h2>

<p>To create a data store select the new <em>“Embedded”</em> connection and select Server &gt; New Store.</p>

<p><img src="/assets/images/blog/linkeddata101/pol-newstore.png" alt="Create a data store in Polaris" width="550px" class="img-medium img-responsive center-block bordered-image" /></p>

<p>The Store Name field is pre-filled with a randomly generated name, so let’s change it to something more memorable - <em>Allotments</em>.</p>

<p>Then we’re going to take the <a href="/blog/2016/02/18/linked-data-101-making-data-linkable-tutorial.html">RDF data produced in the last article</a> (a download is available on that page) and upload it to our store.</p>

<h2 id="importing-data">Importing data</h2>

<p>As we’ve got BrightstarDB installed on our local machine, we’re going to run a Local Import (there are <a href="http://brightstardb.readthedocs.org/en/latest/Using_Polaris/#importing-data">more options for importing data</a> depending on your server set up).</p>

<p>Unzip the data download produced by the Level Up converter. This gives you the same data in three different formats - N-Triples, RDF-XML and Turtle. Polaris can import any of these formats (along with N-Quads, RDF/JSON and Notation3), so I’m choosing to import the N-Triples file.</p>

<p>Select the <em>Allotments</em> store from the connections list, then choose Store &gt; New &gt; Import Job.</p>

<p>We’re not concerned about specific graph names at this point so we simply select our N-Triples file using the file explorer dialog and click Start.</p>

<p><img src="/assets/images/blog/linkeddata101/pol-import.png" alt="Import data using Polaris" width="550px" class="img-medium img-responsive center-block bordered-image" /></p>

<p class="alert alert-info"><strong>Note:</strong> Local import is not recommended for large data files. If the file you try to import exceeds 50MB in size a warning will be displayed. <a href="http://brightstardb.readthedocs.org/en/latest/Using_Polaris/#importing-data">Read more information in the docs</a>.</p>

<h2 id="select-all">Select All</h2>

<p>The first query we’re going to do is a simple “Select All” so that we can view all the triples in Polaris. Right-click the <em>“Allotments”</em> store and select New &gt; SPARQL query.</p>

<p>Enter the query below in the Query field and then press F5 (or hit the “Run” icon button)</p>

<pre>SELECT *
WHERE
{ ?s ?p ?o }</pre>

<p><img src="/assets/images/blog/linkeddata101/pol-selectall1.png" alt="SPARQL Select All query" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<p>I’ve chosen <code>?s</code>, <code>?p</code> and <code>?o</code> for my variable names for the three parts of the triples - subject, predicate and object - you may choose to use different variable names. For example the below is the exact same query:</p>

<pre>SELECT *
WHERE
{ ?id ?property ?value }</pre>

<p>Flipping the tabs we can view the data in a results table or an XML view.</p>

<p><img src="/assets/images/blog/linkeddata101/pol-selectall2.png" alt="SPARQL Select All results table" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<p><img src="/assets/images/blog/linkeddata101/pol-selectall3.png" alt="SPARQL Select All results XML" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<h2 id="query-all-triples-for-a-particular-resource">Query: all triples for a particular resource</h2>
<p>To view all the triples for a particular resource, we enter its identifier into the query, like so:</p>

<pre>SELECT *
WHERE
{ &lt;http://data.contoso.com/environment/allotments/358&gt; ?p ?o }</pre>

<p>This is similar to saying “Get me all the predicates and objects that have this identifier as their subject.”</p>

<p><img src="/assets/images/blog/linkeddata101/pol-filter-id.png" alt="SPARQL Get triples for a particular resource" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<h2 id="query-all-resources-using-a-particular-predicate">Query: all resources using a particular predicate</h2>

<p>Similarly, we can view all the resources that use a particular predicate and their values by entering the query below.</p>

<pre>
SELECT *
WHERE
{ ?s &lt;http://data.contoso.com/environment/ontology/facilities&gt; ?o }
</pre>

<p><img src="/assets/images/blog/linkeddata101/pol-filter-pred.png" alt="SPARQL Get triples for a particular predicate" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<p>As you can see, not all resources had properties using this predicate and so only 18 results are returned - showing the subject and object parts of the triples.</p>

<h2 id="query-all-resources-using-a-particular-value">Query: all resources using a particular value</h2>

<p>Let’s look up some resources that have entered a certain value as the object of their “supplied postcode” triple.</p>

<pre>
SELECT *
WHERE
{ ?s &lt;http://data.contoso.com/environment/ontology/suppliedPostcode&gt; "E17" }
</pre>

<p><img src="/assets/images/blog/linkeddata101/pol-filter-val1.png" alt="SPARQL Get triples using a particular value" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<p>This brings back 12 records, but as you can see we only have their identifiers (the predicate and object part of the triples have been supplied in the query), in order to return more information about those resources we need to ask for more in the query.</p>

<pre>
SELECT *
WHERE
{ 
?s &lt;http://data.contoso.com/environment/ontology/suppliedPostcode&gt; "E17" .
?s ?p ?o
}
</pre>

<p>The first line of our query retrieves subjects using “E17” with the <code>&lt;http://data.contoso.com/environment/ontology/suppliedPostcode&gt;</code> predicate, and the second retrieves all triples that link to those subjects.</p>

<p><img src="/assets/images/blog/linkeddata101/pol-filter-val2.png" alt="SPARQL Get triples using a particular value" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<p>Perhaps we don’t want <strong>all</strong> the triples associated with the given subjects, but instead want to simply return one other value - we can modify the query like so:</p>

<pre>
SELECT *
WHERE
{ 
?s &lt;http://data.contoso.com/environment/ontology/suppliedPostcode&gt; "E17" .
?s &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; ?o .
}
</pre>

<p><img src="/assets/images/blog/linkeddata101/pol-filter-val3.png" alt="SPARQL Get triples using a particular value" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<h2 id="ordering-results">Ordering results</h2>

<p>We can order those results by using the <code>ORDER BY</code> phrase:</p>

<pre>
SELECT *
WHERE
{ 
?s &lt;http://data.contoso.com/environment/ontology/suppliedPostcode&gt; "E17" .
?s &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; ?label .
}
ORDER BY ?label
</pre>

<p><img src="/assets/images/blog/linkeddata101/pol-order.png" alt="SPARQL Order by" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<h2 id="limiting-the-number-returned">Limiting the number returned</h2>

<p>Only want the top 5? We simply add a <code>LIMIT</code> phrase to the SPARQL statement:</p>

<pre>
SELECT *
WHERE
{ 
?s &lt;http://data.contoso.com/environment/ontology/suppliedPostcode&gt; "E17" .
?s &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; ?label .
}
ORDER BY ?label
LIMIT 5
</pre>

<p><img src="/assets/images/blog/linkeddata101/pol-limit.png" alt="SPARQL Limit the number of results returned" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<h2 id="only-returning-particular-values">Only returning particular values</h2>

<p>If we only want or need particular values, we can replace the <code>SELECT *</code> and be more specific:</p>

<pre>
SELECT ?label ?long ?lat
WHERE
{ 
?s &lt;http://data.contoso.com/environment/ontology/suppliedPostcode&gt; "E17" .
?s &lt;http://www.w3.org/2000/01/rdf-schema#label&gt; ?label .
?s &lt;http://www.w3.org/2003/01/geo/wgs84_pos#lat&gt; ?lat . 
?s &lt;http://www.w3.org/2003/01/geo/wgs84_pos#long&gt; ?long . 
}
ORDER BY ?label
</pre>

<p><img src="/assets/images/blog/linkeddata101/pol-values.png" alt="SPARQL Select which values to include" width="750px" class="img-medium img-responsive center-block bordered-image" /></p>

<h2 id="making-use-of-the-data">Making use of the data</h2>

<p>You can see by the returned values how easily they can be visualised. Using <a href="https://www.openstreetmap.org/">OpenStreetMap</a> (a free editable map of the world available as open data) and the open source <a href="http://leafletjs.com">Leaflet.js</a> we can quickly place the pinpoints to view on a map using the javascript code:</p>

<div id="map">

</div>

<pre>
var markers = [
    {"label":"Cheshire Fields", "long":-0.038715, "lat":51.576236},
	{"label":"Chestnuts Farm", "long":-0.014994, "lat":51.592189},
	{"label":"Forest Road", "long":0.005339, "lat":51.591496},
	{"label":"Hale End Road", "long":-0.000226, "lat":51.596406},
	{"label":"Higham Hill Common", "long":-0.02978, "lat":51.593777},
	{"label":"Honeybone", "long":-0.033135, "lat":51.577039},
	{"label":"Low Hall Farm", "long":-0.033687, "lat":51.571343},
	{"label":"Low Hall Lane", "long":-0.032928, "lat":51.576619},
	{"label":"Markhouse Common", "long":-0.026112, "lat":51.576161},
	{"label":"Sinnott Road", "long":-0.041737, "lat":51.598899},
	{"label":"Trencherfield", "long":-0.040005, "lat":51.596741},
	{"label":"Willow Tree", "long":-0.018091, "lat":51.605109}
];

var map = L.map('map').setView([51.58693, -0.04], 12);

var tiles = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	maxZoom: 19,
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);

for(var i = 0; i &lt; markers.length; i++) {
	var m = markers[i];
	var marker = L.marker([m.lat, m.long]).addTo(map);
    marker.bindPopup(m.label);
}
</pre>

<p>For simplicity I’ve used a simple array in the example, but once you are comfortable using SPARQL you can use it to query remote SPARQL endpoints and work directly on the returned results.</p>

<h2 id="learning-more-sparql">Learning more SPARQL</h2>

<p>The queries above are probably the most straightforward (and useful!) queries to learn to get started with SPARQL and so this is where we’ll leave it for our Linked Data 101 series. </p>

<p>As with any data querying language there’s various levels you may want to take your SPARQL skills up to. A good place to start is our <a href="/blog/2016/01/18/linked-data-webinars-season-2.html">free 1 hour SPARQL 101 webinar</a> - the next one is being held on <a href="https://www.eventbrite.co.uk/e/webinar-sparql-101-tickets-20857308772" title="Register for our free SPARQL webinar">March 10th</a>. As always <a href="/blog/tags/sparql/">look our for posts</a> right here on the blog!</p>

<p class="well text-center">This article is part of the <a href="/blog/tags/ld101-series/">Linked Data 101 series</a></p>

  </article>

  <div class="row spacer2">&nbsp;</div>
  
  <aside id="social">
	<ul>
		<li><a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Fnetworkedplanet.com%2Fblog%2F2016%2F02%2F29%2Flinked-data-101-querying.html&text=Linked+Data+101+-+Querying+data+with+SPARQL&&via=nwplanet" class="entypo-twitter" target="_blank"><span>Twitter</span></a></li>
		<li><a href="https://plus.google.com/share?url=http%3A%2F%2Fnetworkedplanet.com%2Fblog%2F2016%2F02%2F29%2Flinked-data-101-querying.html" class="entypo-gplus" target="_blank"><span>Google+</span></a></li>
        <li><a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fnetworkedplanet.com%2Fblog%2F2016%2F02%2F29%2Flinked-data-101-querying.html&title=Linked+Data+101+-+Querying+data+with+SPARQL&source=http%3A%2F%2Fnetworkedplanet.com" class="entypo-linkedin" target="_blank"><span>LinkedIn</span></a></li>
	</ul>
</aside>
  
  <div class="row spacer2">&nbsp;</div>
  
  <hr/>
  <nav>
    <p>Filed under:  <a href="/blog/tags/ld101-series/">LD101 series</a>,  <a href="/blog/tags/linked-data/">linked data</a>,  <a href="/blog/tags/sparql/">sparql</a></p>
    <p class="clearfix">
        
            <span class="pull-left">
                <a class="btn btn-primary" href="/blog/2016/02/23/linked-data-intro-presentation.html" role="previous">&lt;&lt; Linked Data - a short presentation</a>
            </span>
        
        
        <span class="pull-right">
            <a class="btn btn-primary" href="/blog/2016/03/01/other-people-check-your-data.html" role="next">Crowdsourcing error checking &gt;&gt;</a>
        </span>
        
    </p>
  </nav>
  <hr/>
  
  <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'networkedplanet';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  
</div>
<div class="spacer2">&nbsp;</div>

    </div>

    <footer class="footer">
    <div class="container">
        <div class="spacer">&nbsp;</div>
        <div class="row">
            <div class="col-xs-6">
                <p>&copy; 2016 Networked Planet Limited.</p>
            </div>
            <div class="col-xs-6">
                <div class="pull-right">
                    <a href="#">Back to top</a>
                </div>
            </div>
        </div> <!-- /.row -->
        <div class="row">
            <div class="col-xs-12">
                <small class="text-muted">Registered in England no. 5273377 Registered Office: 17 Cosgrove Road, Old Stratford, Milton Keynes, MK19 6AG</small>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<!-- Bootstrap plugins -->
<script src="/assets/javascripts/bootstrap.min.js"></script>
<script src="/assets/javascripts/scrolling-nav.js"></script>
<script src="/assets/javascripts/jquery.easing.min.js"></script>

<!-- CookieCuttr script -->
<script src="/assets/javascripts/js.cookie-1.5.1.min.js"></script>
<script src="/assets/javascripts/jquery.cookiecuttr.js"></script>
<script>
    $(document).ready(function() {
        $.cookieCuttr({cookieDeclineButton: true});
    });
    
    if (jQuery.cookie('cc_cookie_decline') == "cc_cookie_decline") {
        // do nothing
    } else {
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
		 ga('create', 'UA-770913-1', 'auto', { 'allowLinker': true });
		ga('require', 'linker');
		ga('linker:autoLink', ['levelup.networkedplanet.com', 'testing.networkedplanet.com', 'support.networkedplanet.com']);
		ga('send', 'pageview');
		
    }
</script>
<script>
/**
* Function that tracks a click on an outbound link in Google Analytics.
* Example of use:
* <a href="http://www.example.com" onclick="trackOutboundLink('http://www.example.com'); return false;">Check out example.com</a>
*/
var trackOutboundLink = function(url) {
	// Only track if the cookie was not declined
	if (ga){
	    ga('send', 'event', 'outbound', 'click', url, {
		   'transport': 'beacon',
		   'hitCallback': function(){document.location = url;}
	    });
   }
}
</script>


	<!-- page / post specific external or custom CSS / JS -->
	
	
	  
	  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" media="screen" type="text/css">
	  
	

	
	  
	  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js" type="text/javascript"></script>
	  
	
	
	
	  
	  <link rel="stylesheet" href="/assets/stylesheets/ld101.css" media="screen" type="text/css">
	  
	

	
	  
	  <script src="/assets/javascripts/ld101.js" type="text/javascript"></script>
	  
	
	


    </body>

</html>
