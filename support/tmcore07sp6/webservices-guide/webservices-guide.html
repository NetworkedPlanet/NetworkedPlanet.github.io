<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>TMCore Web Services Guide</title><link rel="stylesheet" href="../doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="pageheader"><table class="logo" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td><span class="networked">Networked</span><span class="planet">Planet</span></td><td align="right"><span class="title">TMCore Web Services Guide</span></td></tr></table></div><div class="article" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e2"></a>TMCore Web Services Guide</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#d0e8">Introduction</a></span></dt><dt><span class="section"><a href="#ws-overview">Overview of Web Services APIs</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e88">API Descriptions</a></span></dt><dt><span class="section"><a href="#d0e206">Calling The Web Services</a></span></dt></dl></dd><dt><span class="section"><a href="#tmws-definition">Topic Map Web Service Definition</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e282">Topic Map Web Service Configuration</a></span></dt><dt><span class="section"><a href="#d0e483">Namespaces</a></span></dt><dt><span class="section"><a href="#d0e533">General Operation Errors</a></span></dt><dt><span class="section"><a href="#d0e557">Service Operations</a></span></dt></dl></dd><dt><span class="section"><a href="#npclws-definition">NPCL Web Services Definition</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1941">Service Operations</a></span></dt></dl></dd><dt><span class="appendix"><a href="#schema-definitions">A. Schema Definitions</a></span></dt><dd><dl><dt><span class="section"><a href="#tmf-schema">Topic Map Fragment XML Schema</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2191">Namespace</a></span></dt><dt><span class="section"><a href="#d0e2199"><code class="sgmltag-element">topicmapsystem</code> Element</a></span></dt><dt><span class="section"><a href="#d0e2224"><code class="sgmltag-element">topicmap</code> Element</a></span></dt><dt><span class="section"><a href="#d0e2288"><code class="sgmltag-element">topic</code> Element</a></span></dt><dt><span class="section"><a href="#d0e2434"><code class="sgmltag-element">name</code> Element</a></span></dt><dt><span class="section"><a href="#d0e2498"><code class="sgmltag-element">variant</code> Element</a></span></dt><dt><span class="section"><a href="#d0e2562"><code class="sgmltag-element">occurrence</code> Element</a></span></dt><dt><span class="section"><a href="#d0e2653"><code class="sgmltag-element">association</code> Element</a></span></dt><dt><span class="section"><a href="#d0e2885"><code class="sgmltag-element">scope</code> Element</a></span></dt><dt><span class="section"><a href="#d0e2901"><code class="sgmltag-element">topicref</code> Element</a></span></dt></dl></dd><dt><span class="section"><a href="#hierarchy-schema">Hierarchy XML Schema</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2964">Namespace</a></span></dt><dt><span class="section"><a href="#d0e2977"><code class="sgmltag-element">treelist</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3029"><code class="sgmltag-element">nodelist</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3084">Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#tmtxn-schema">Topic Map Transaction Schema</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3119">Overview</a></span></dt><dt><span class="section"><a href="#d0e3131">Namespaces</a></span></dt><dt><span class="section"><a href="#d0e3140">PSI Topic References</a></span></dt><dt><span class="section"><a href="#d0e3175"><code class="sgmltag-element">TopicMapTransaction</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3210"><code class="sgmltag-element">CreateTopic</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3259"><code class="sgmltag-element">UpdateTopic</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3403"><code class="sgmltag-element">DeleteTopic</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3499"><code class="sgmltag-element">CreateTopicProperty</code></a></span></dt><dt><span class="section"><a href="#d0e3594"><code class="sgmltag-element">DeleteTopicProperty</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3716"><code class="sgmltag-element">CreateAssociation</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3744"><code class="sgmltag-element">DeleteAssociation</code> Element</a></span></dt><dt><span class="section"><a href="#d0e3821">Examples</a></span></dt></dl></dd><dt><span class="section"><a href="#npcl-schema">NPCL XML Schema</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3893">Overview</a></span></dt><dt><span class="section"><a href="#d0e3901">Namespace</a></span></dt><dt><span class="section"><a href="#d0e3906"><code class="sgmltag-element">schema Element</code></a></span></dt><dt><span class="section"><a href="#d0e3963"><code class="sgmltag-element">abstractType</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4006"><code class="sgmltag-element">topicType</code></a></span></dt><dt><span class="section"><a href="#d0e4101"><code class="sgmltag-element">occurrenceType</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4174"><code class="sgmltag-element">associationType</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4252"><code class="sgmltag-element">roleType</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4301"><code class="sgmltag-element">scopingTopic</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4332"><code class="sgmltag-element">subclasses</code> Element</a></span></dt></dl></dd><dt><span class="section"><a href="#npcl-forms-schema">NPCL Forms XML Schema</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4363">Overview</a></span></dt><dt><span class="section"><a href="#d0e4371">Namespace</a></span></dt><dt><span class="section"><a href="#d0e4376"><code class="sgmltag-element">schema</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4410"><code class="sgmltag-element">topicType</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4486"><code class="sgmltag-element">extension</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4520"><code class="sgmltag-element">occurrenceField</code> Element</a></span></dt><dt><span class="section"><a href="#d0e4644"><code class="sgmltag-element">associationField</code> Element</a></span></dt></dl></dd><dt><span class="section"><a href="#results-schema">Results Description Document Schema</a></span></dt></dl></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8"></a>Introduction</h2></div></div></div><p>The TMCore product provides two principle ways to access and update
    topic map data. The full .NET API is suitable for complex applications
    that need fine-grained control over the update of topics and is also
    suitable for creating your own ASP.NET controls or other server-side
    applications. The TMCore Web Services interface is suitable for creating
    n-tier applications and for developing client-server applications. There
    are several major advantages to using the Web Services interface over the
    .NET API:</p><div class="orderedlist"><ol type="1"><li><p>Performance</p><p>Many of the operations are more coarse-grained than those of the
        .NET API but are written to be executed efficiently. In some cases,
        the Web Service implementations can out-perform the use of the .NET
        API by several times.</p><p>In addition you can more easily make use of multiple levels of
        caching using the Web Services in an n-tier application.</p></li><li><p>Ease Of Deployment</p><p>None of the TMCore libraries are required to access the Web
        Services (although you can make use of our web services client library
        in your .NET applications). This makes it much easier to distribute
        your applications across multiple machines.</p></li><li><p>Portability</p><p>The Web Services interfaces support both simple HTTP GET and
        POST requests and SOAP. This makes it possible to write applications
        to access and update TMCore data from any language that provides
        libraries for SOAP or HTTP interactions - Perl, Ruby, Python and even
        Javascript can all be used to access the topic map via the Web
        Services interface.</p></li></ol></div><p>A small set of XML schemas define the input and output data
    structures for all of our web services. There are 6 main schemas and all
    of these schemas are described in detail in the Appendix to this
    document.</p><div class="orderedlist"><ol type="1"><li><p><a href="#tmf-schema" title="Topic Map Fragment XML Schema">The Topic Map Fragment Schema</a>
        represents topics and associations from a topic map. It is used both
        to retrieve information from the topic map and to update the topic
        map.</p></li><li><p><a href="#hierarchy-schema" title="Hierarchy XML Schema">The Hierarchy Schema</a> is
        used to retrieve information about hierarchies contained in a topic
        map.</p></li><li><p><a href="#tmtxn-schema" title="Topic Map Transaction Schema">The Topic Map Transaction
        Schema</a> is used to update the topic map. It allows updates to
        several topics or associations to be made in a single
        transaction.</p></li><li><p><a href="#npcl-schema" title="NPCL XML Schema">The NPCL Schema</a> is used to
        retrieve the Networked Planet Constraint Language (NPCL) schema from a
        topic map.</p></li><li><p><a href="#npcl-forms-schema" title="NPCL Forms XML Schema">The NPCL Forms Schema</a>
        presents the Networked Planet Constraint Language schema for a topic
        map along with some additional information which makes it easy to
        create your own constrained editing front-ends, such as an HTML form
        for entering a new topic of a particular type.</p></li><li><p><a href="#results-schema" title="Results Description Document Schema">The Results Schema</a> is used
        to convey the results of Web Service operations.</p></li></ol></div><p>This document describes all of the web services provided by TMCore.
    The <a href="#ws-overview" title="Overview of Web Services APIs">first part of this document</a>
    provides an overview of how the TMCore web services are described in the
    rest of the document and how that description maps to the actual SOAP and
    HTTP implementations. There then follows sections describing each of the
    services provided by TMCore. Currently TMCore provides two separate
    services, the <a href="#tmws-definition" title="Topic Map Web Service Definition">Topic Map Web Service</a>
    which provides basic query, browse and update methods and the <a href="#npclws-definition" title="NPCL Web Services Definition">NPCL Web Service</a> which provides access
    to the NPCL schema information for a topic map. Finally, the <a href="#schema-definitions" title="A.&nbsp;Schema Definitions">appendix</a> of this document provide a
    detailed description of each of the XML schemas used by the
    services.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ws-overview"></a>Overview of Web Services APIs</h2></div></div></div><p>TMCore provides several separate web services. Each of these
    services expose a number of methods which can be invoked either by a SOAP
    client or by simple HTTP page requests (e.g. using the AJAX
    architecture).</p><p>Rather than redundantly repeat a lot of information for both the
    SOAP and HTTP interfaces, we present each web service described in terms
    of the operation it performs, the parameters or XML document expected on
    the input and the XML document generated on the output. All of these
    factors are the same for both interface types.</p><p>The following sections provide an introduction to the description of
    the web services APIs and details on how the API descriptions presented
    later map into SOAP or HTTP requests and responses.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e88"></a>API Descriptions</h3></div></div></div><p>Each API is described as a list of methods. Each method
      description has the following sections:</p><div class="variablelist"><dl><dt><span class="term">Method Name</span></dt><dd><p>This section specifies the name of the operation. For the
            SOAP implementation, this is the SOAP operation name. For the
            ASP.NET implementation, the operation name is the name of the
            ASP.NET page that implements that operation. When invoking the
            operation on the ASP.NET implementation, the request should be
            made to an address constructed by concatenating the base URL of
            the service, a forward slash, the operation name and string
            ".aspx". For example, if you have the Topic Map Web Service
            installed on your local machine at
            <code class="literal">http://localhost/tmws</code>, then the URL for the
            <code class="methodname">GetTopicMaps</code> operation is
            <code class="literal">http://localhost/tmws/GetTopicMaps.aspx</code>.</p></dd><dt><span class="term">Parameters</span></dt><dd><p>This section lists the input parameters for the operation.
            All parameters are assumed to be REQUIRED unless they are
            explicitly flagged with as OPTIONAL. All parameter are assumed to
            be string literals, unless the parameter description specifies a
            different type.</p><p>For a SOAP invocation, each parameter maps to an element in
            the SOAP input message for the operation where the element name is
            the same as the parameter name.</p><p>For an ASP.NET implementation, the mapping of parameters
            depends upon how the operation is invoked. All ASP.NET
            implementations support both invocation using an HTTP GET and
            invocation using an HTTP POST. When invoking the operation using
            an HTTP GET, each parameter should be provided as a query
            parameter in the URL. When invoking the message using an HTTP
            POST, the body of the POST request must contain only an XML
            document. The XML document POSTed to the ASP.NET page must use the
            following syntax:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="<i>PARAMETER NAME</i>"&gt; <i>VALUE</i> &lt;/param&gt;
&lt;/request&gt;</pre><p>The <code class="sgmltag-element">request</code> element is the outer wrapper
            for the request parameters. Each parameter is specified using a
            <code class="sgmltag-element">param</code> element. The <code class="sgmltag-element">name</code>
            attribute of the <code class="sgmltag-element">param</code> element is required and
            must be set to the name of the parameter whose value is specified.
            The content of the <code class="sgmltag-element">param</code> element must be the
            parameter value. The <code class="sgmltag-element">param</code> element may contain
            an XML fragment if allowed by the parameter type.</p><div class="example"><a name="d0e147"></a><p class="title"><b>Example&nbsp;1.&nbsp;POST Invocation Examples</b></p><p>The following examples relate to invocation of methods
              exposed by the NetworkedPlanet Topic Map Web Service.</p><p>To invoke a method that takes no parameters, post an empty
              requets element. For example to invoke the GetTopicMaps
              operation you could post the following content to the
              GetTopicMaps.aspx page:</p><pre class="programlisting">&lt;request /&gt;</pre><p>To invoke the GetTopicBySubjectIdentifier operation to get
              the topic with the subject identifier
              http://www.example.com/mypsi/ in the topic map named
              'mytopicmap', post the following content to the
              GetTopicBySubjectIdentifier.aspx page:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="locator"&gt;http://www.example.com/mypsi/&lt;/param&gt;
&lt;/request&gt;</pre><p>To invoke the Save operation to update a topic in the
              topic map 'mytopicmap', post the following content to the
              Save.aspx page (the full content of the tmfragment parameter is
              ommitted for brevity):</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="tmfragment"&gt;
    &lt;topicmap xmlns="http://www.networkedplanet.com/2005/01/topicmap/data/"&gt;
      ...
    &lt;/topicmap&gt;
  &lt;/param&gt;
&lt;/request&gt;</pre><p>A few operations take an array of strings as a parameter.
              To make these requests, simply wrap each separate string
              parameter in its own <code class="sgmltag-element">param</code> element. For
              example to delete two topics from a topic map (an operation
              which takes an array of topic object identifiers in the
              parameter named "oids"), post the following content to the
              DeleteTopics.aspx page:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="oids"&gt;1234&lt;/param&gt;
  &lt;param name="oids"&gt;5678&lt;/param&gt;
&lt;/request&gt;</pre><div class="tip"><h3 class="title">Tip</h3><p>A <code class="sgmltag-element">request</code> element can contain its
                  <code class="sgmltag-element">param</code> elements in any order - you do not
                  have to match the order in which the parameters are
                  specified on an operation and you can mix lists of values
                  for string array parameters in with other parameter
                  specifications.</p></div></div></dd><dt><span class="term">Returns</span></dt><dd><p>The Returns section describes what results are returned by
            the operation if it is successful, and how those results are
            represented. The return result from any operation is always an XML
            document. For operations that only update the topic map (and do
            not request information from it), the SOAP response body content
            may differ from the HTTP interface response body, in that a
            successful SOAP operation simply returns an empty response body
            (using the normal SOAP headers to indicate success) whereas the
            HTTP interface will always return an XML document in the response
            body as well as an HTTP status code indicating success.</p></dd><dt><span class="term">Errors</span></dt><dd><p>The Errors section list operation-specific error conditions.
            Each error condition is described in a table that shows the error
            code, the condition under which the error is raised and the
            structure of any error-specific details.</p><p>For a SOAP implementation of an operation, an error is
            notified to the caller as a SOAP fault. The fault element will
            contain a faultstring value which contains an error message, and a
            faultdetail element which will contain the full error description
            XML document as described below.</p><p>For an ASP.NET implementation, successes or failed execution
            of an operation will be indicated using HTTP status codes.</p><table class="simplelist" border="0" summary="Simple list"><tr><td>200 (OK) for completely successful operations.</td></tr><tr><td>403 (Bad Request) for failed or partially successful
              operations, where failures occurred due to bad input being
              supplied by the user.</td></tr><tr><td>500 (Internal Server Error) for failed or partially
              successful operation, where failures occurred due to
              circumstances outside of the users control.</td></tr></table><p>For invocations which require multiple operations to be
            executed (for example passing multiple topic IDs to DeleteTopics),
            if any of the operations fail then an error status code will be
            returned. The caller must check the body of the response which
            will either be the XML document described in the Returns section,
            or will be an error description XML document as described below to
            determine which parts of the operation succeeded.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e206"></a>Calling The Web Services</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e209"></a>Calling HTTP Web Services</h4></div></div></div><p>All of the HTTP web services can be invoked using an HTTP POST
        with the POST request body containing a request XML as described in
        the section above. The request document should be POSTed to the .aspx
        page that implements the operation. The requester should check the
        status and content of the HTTP response received. A 200 OK status code
        indicates that the request was successfully processed.</p><div class="example"><a name="d0e214"></a><p class="title"><b>Example&nbsp;2.&nbsp;Calling HTTP Web Services From C#</b></p><p>The listing below shows an example of invoking a web serivce
          over HTTP from within a C# program. Note that the GetResponse()
          method has been written to be generic and can be used to access any
          of the NetworkedPlanet web service operations. A complete working
          program based on this example code can be found in the
          <code class="filename">examples/CS</code> directory of your
          installation.</p><pre class="programlisting">private void ProcessRequest(string serviceApplicationUrl, string topicmapName, string searchString)
{
  // First construct the URL. We start with the path to the application
  // directory provided by the user. Expand this by adding the operation
  // ASPX page address (with a slash separator if needed).
  string requestUrl = serviceApplicationUrl;
  if (!requestUrl.EndsWith("/")) 
  {
    requestUrl += "/";
  }
  requestUrl += "GetTopicsByName.aspx";

  Hashtable parameters = new Hashtable();
  parameters["topicmap"] = topicmapName;
  parameters["name"] = searchString;

  XmlDocument responseDoc = new XmlDocument();

  try 
  {
    HttpStatusCode statusCode = GetResponse(requestUrl, parameters, responseDoc);
    if (statusCode == HttpStatusCode.OK) 
    {
      System.Console.WriteLine("Search request was processed successfully. Results follow.");
    } 
    else 
    {
      System.Console.WriteLine("Search request failed: " + statusCode.ToString() + ". Details follow.");
    }
    XmlTextWriter writer = new XmlTextWriter(System.Console.Out);
    writer.Formatting = Formatting.Indented;
    responseDoc.WriteTo(writer);
  } 
  catch (System.Net.WebException webex) 
  {
    System.Console.Error.WriteLine("Error encountered in sending request. Please check the service application URL and try again.");
    System.Console.Error.WriteLine("  Error detail: " + webex.Message);
  }
}

/// &lt;summary&gt;
/// Attempts to contact a NetworkedPlanet webservice, passing in the specified parameters.
/// &lt;/summary&gt;
/// &lt;param name="requestUrl"&gt;The URL of the service to contact&lt;/param&gt;
/// &lt;param name="parameters"&gt;The parameters to pass to the service.&lt;/param&gt;
/// &lt;param name="responseDoc"&gt;The response XML received from the web service&lt;/param&gt;
/// &lt;returns&gt;The HTTP status code of the response&lt;/returns&gt;
/// &lt;exception cref="System.Net.WebException"&gt;Raised if the service could not be reached.&lt;/exception&gt;
/// &lt;remarks&gt;The &lt;c&gt;parameters&lt;/c&gt; hashtable must use string keys and the value for each key must be either
/// a string or an IList of string.&lt;/remarks&gt;
private HttpStatusCode GetResponse(string requestUrl, Hashtable parameters, XmlDocument responseDoc)
{
  // Construct the request XML
  XmlDocument requestDoc = new XmlDocument();
  XmlElement requestEl = requestDoc.CreateElement("request");
  requestDoc.AppendChild(requestEl);
  // Parameters should be either strings or lists of strings
  foreach(string key in parameters.Keys) 
  {
    if (parameters[key] is string) 
    {
      XmlElement param = requestDoc.CreateElement("param");
      param.SetAttribute("name", key);
      param.InnerXml = parameters[key] as string;
      requestEl.AppendChild(param);
    } 
    else if (parameters[key] is IList)
    {
      // If the parameter is a list of strings, write a separate
      // param element for each item in the list.
      foreach(string item in (parameters[key] as IList)) 
      {
        XmlElement param = requestDoc.CreateElement("param");
        param.SetAttribute("name", "key");
        param.InnerXml = item;
        requestEl.AppendChild(param);
      }
    }
  }

  // Perform an ASCII encoding of the request xml
  ASCIIEncoding encoding = new ASCIIEncoding();
  byte[] encodedBody = encoding.GetBytes(requestDoc.OuterXml);

  // Construct the request object
  HttpWebRequest webRequest = HttpWebRequest.Create(requestUrl) as HttpWebRequest;
  webRequest.ContentType = "text/xml";
  webRequest.ContentLength = encodedBody.Length;
  webRequest.Method = "POST";
  Stream bodyStream = webRequest.GetRequestStream();
  bodyStream.Write(encodedBody, 0, encodedBody.Length);
  bodyStream.Close();

  HttpWebResponse webResponse = null;
  try 
  {
    webResponse = webRequest.GetResponse() as HttpWebResponse;
  } 
  catch (System.Net.WebException webEx)
  {
    webResponse = webEx.Response as HttpWebResponse;
  }
  // NOTE: this will throw an exception out to the caller if the
  // response is not an XML document.
  responseDoc.Load(webResponse.GetResponseStream());
  return webResponse.StatusCode;
}</pre></div><div class="example"><a name="d0e224"></a><p class="title"><b>Example&nbsp;3.&nbsp;Calling HTTP Web Services From VB.NET</b></p><pre class="programlisting">    ' Contains the logic for issuing a search request and processing
    ' the results.
    Sub DoRequest(ByVal serviceUrl As String, ByVal topicmapName As String, ByVal searchString As String)
        Dim requestUrl As String
        requestUrl = serviceUrl
        If Not (requestUrl.EndsWith("/")) Then
            requestUrl = requestUrl + "/"
        End If
        requestUrl = requestUrl + "GetTopicsByName.aspx"
        System.Console.WriteLine(requestUrl)
        Dim params As New Hashtable
        params("topicmap") = topicmapName
        params("name") = searchString

        Dim responseDoc As New Xml.XmlDocument
        Dim responseCode As HttpStatusCode
        Try
            responseCode = GetResponse(requestUrl, params, responseDoc)
            If (responseCode.Equals(HttpStatusCode.OK)) Then
                System.Console.WriteLine("Search process successfully. Results follow:")
            Else
                System.Console.WriteLine("Search request failed. Error details follow:")
            End If
            Dim writer As XmlTextWriter
            writer = New XmlTextWriter(System.Console.Out)
            writer.Formatting = Formatting.Indented
        responseDoc.WriteTo(writer)
        Catch ex As WebException
            System.Console.Error.WriteLine("Error processing request: " + ex.Message)
            System.Console.Error.WriteLine("  Please check the service URL and try again.")
        End Try
    End Sub

    ' Performs the "heavy lifing" of the application. This function posts 
    ' a set of parameters (defined in the params Hashtable) to the
    ' URL specified by requestUrl and parses the response into
    ' responseDoc. Because all of the NetworkedPlanet web service
    ' operations use the same request format, this method can
    ' be reused to invoke any of the operations we support.
    ' The keys in the params Hashtable must be strings and the
    ' values must be either strings or ILists of strings.
    Function GetResponse(ByVal requestUrl As String, ByVal params As Hashtable, ByVal responseDoc As XmlDocument) As HttpStatusCode

        Dim requestDoc As XmlDocument
        Dim requestEl As XmlElement
        Dim paramEl As XmlElement
        Dim key As String
        requestDoc = New XmlDocument
        requestEl = requestDoc.CreateElement("request")
        requestDoc.AppendChild(requestEl)
        For Each key In params.Keys
            If (TypeOf params(key) Is IList) Then
                ' Extract each item in the list in turn add add
                ' a separate param element for it
                Dim paramValue As String
                For Each paramValue In params(key)
                    paramEl = requestDoc.CreateElement("param")
                    paramEl.SetAttribute("name", key)
                    paramEl.InnerXml = paramValue
                    requestEl.AppendChild(paramEl)
                Next
            Else
                ' Create a single param element for the item value
                paramEl = requestDoc.CreateElement("param")
                paramEl.SetAttribute("name", key)
                paramEl.InnerXml = params(key)
                requestEl.AppendChild(paramEl)
            End If
        Next
        System.Console.WriteLine(requestDoc.OuterXml)

        Dim encodedBody As Byte()
        Dim asciiEncoding As New ASCIIEncoding
        encodedBody = asciiEncoding.GetBytes(requestDoc.OuterXml)

        Dim httpRequest As HttpWebRequest
        httpRequest = HttpWebRequest.Create(requestUrl)
        httpRequest.Method = "POST"
        httpRequest.ContentLength = encodedBody.Length
        httpRequest.ContentType = "text/xml"
        Dim requestStream As Stream
        requestStream = httpRequest.GetRequestStream()
        requestStream.Write(encodedBody, 0, encodedBody.Length)
        requestStream.Close()

        Dim httpResponse As HttpWebResponse
        Try
            httpResponse = httpRequest.GetResponse()
        Catch ex As WebException
            httpResponse = ex.Response
        End Try

        If httpResponse.ContentType = "text/xml" Then
            Dim reader As New XmlTextReader(httpResponse.GetResponseStream())
            responseDoc.Load(reader)
        Else
            ' We shouldn't get non XML content return from NetworkedPlanet
            ' requests, but this handles the case that the server returns s
            ' some default error page (e.g. if access is denied) by embedding
            ' the response text inside a wrapper element
            responseDoc.AppendChild(responseDoc.CreateElement("NonXmlResponse"))
            Dim rdr As New StreamReader(httpResponse.GetResponseStream())
            responseDoc.InnerText = rdr.ReadToEnd()
            rdr.Close()
        End If
        Return httpResponse.StatusCode

    End Function
</pre></div><div class="example"><a name="d0e229"></a><p class="title"><b>Example&nbsp;4.&nbsp;Calling HTTP Web Services From Javascript</b></p><p>The following example shows the use of the XmlHttpRequest
          object provided by some browsers. There are a number of
          cross-browser libraries that help you avoid browser issues in using
          Javascript.</p><pre class="programlisting"> /**
  * Construct and post the request and handle the response
  */
function DoSearch()
{
  // Assumes that our page has three text fields for providing the request parameters
  oServiceUrl = document.getElementById("serviceUrl")
  oTopicmap = document.getElementById("topicmap")
  oSearchString = document.getElementById("searchString")
  // A placeholder element on our page for progress / result messages
  oMessage = document.getElementById("message");
  szRequestUrl = oServiceUrl.value
  if (szRequestUrl.charAt(szRequestUrl.length - 1) != "/") {
    szRequestUrl = szRequestUrl + "/"
  }
  szRequestUrl = szRequestUrl + "GetTopicsByName.aspx"
  szRequestBody = "&lt;request&gt;&lt;param name='topicmap'&gt;" + oTopicmap.value + 
    "&lt;/param&gt;&lt;param name='name'&gt;" + oSearchString.value + "&lt;/param&gt;&lt;/request&gt;"
  oMessage.innerText = "Sending request. Please wait...";
  oMessage.className = "pending";
  DoPost(szRequestUrl, szRequestBody);
}

/**
 * Posts the specified content to the specified URL using 
 * the global asynchronous request object 'req'. When the
 * request status changes, the ProcessRequestChange function
 * will be invoked
 */
function DoPost(url, content)
{
  if (window.XMLHttpRequest) {
    req = new XMLHttpRequest();
    req.onreadystatechange = ProcessRequestChange;
    req.open("POST", url, true);
    req.send(content);
  } else if (window.ActiveXObject) {
    req = new ActiveXObject("Microsoft.XMLHTTP");
    if (req) {
      req.onreadystatechange = ProcessRequestChange;
      req.open("POST", url, true);
      req.send(content);
    }
  }
}

function ProcessRequestChange()
{
  if (req.readyState == 4) {
    if (req.status == 200) {
      // Handle successful response.
      // Response XML can be found in req.responseXML
    } else {
      // Handle error reponse.
      // Error XML document can be found in req.responseXML
    }
  }
}</pre></div><div class="note"><h3 class="title">Note</h3><p>Although the HTTP interface also accepts HTTP GET requests,
          these are restricted by the limitations imposed on URL lenght and
          URL parameter structures. We therefore recommend that you always use
          POST requests for consistency.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e239"></a>Calling SOAP Web Services</h4></div></div></div><p>The SOAP service implementation endpoints are provided by the
        .asmx files contained in the service web applications. This is
        TMService.asmx for the Topic Maps Web Service and
        NpclSchemaService.asmx for the NPCL Web Service. These endpoints
        provide a WSDL description if you invoke an HTTP GET on them with a
        single parameter "wsdl" - e.g.
        http://localhost/tmws/TMService.asmx?wsdl.</p><p>From the WSDL file you can generate the client-side proxy for
        accessing the web service. In .NET this is done using the wsdl.exe
        tool. For your convenience we have provided a .NET assembly,
        serviceclient.dll. This assembly contains client stubs for the Topic
        Maps Web Service and NPCL Web Service as well as classes for creating
        and serializing / de-serializing the XML structures that are used as
        parameters and return values for the web service operations.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e246"></a>Calling SOAP Web Services From C#</h5></div></div></div><p>The following code shows a method that invokes the
          GetTopicsByName operation on the Topic Maps Web Service and
          processes the response. The sample code shown here uses the
          utilities provided by the serviceclient.dll assembly. The full code
          for this example can be found in
          <code class="filename">examples/CS/WebServices/TopicsByNameSOAP</code>. As
          the code below shows, the response from the web service can be
          deserialized into the appropriate class from the
          NetworkedPlanet.WebServiceClient.Tmws namespace (for TMWS
          operations) or NetworkedPlanet.WebServiceClient.Npcl namespace (for
          NPCL Web Service operations) - there are also a set of common
          structures for reporting lists of results and/or errors in the
          NetworkedPlanet.WebServiceClient.Common namespace.</p><div class="example"><a name="d0e254"></a><p class="title"><b>Example&nbsp;5.&nbsp;Calling SOAP Web Services From C#</b></p><pre class="programlisting">using System;
using System.Web.Services.Protocols;
using System.Xml;
using System.Xml.Serialization;
using NetworkedPlanet.WebServiceClient;
using NetworkedPlanet.WebServiceClient.Tmws;
using NetworkedPlanet.WebServiceClient.Common;

private static void ProcessRequest(string endpointUrl, string tmName, string queryString)
{
  // Create a new TMWS SOAP client bound to the specified endpoint.
  TMSClient tmwsClient = new TMSClient(endpointUrl);
  try 
  {
    XmlNode results = tmwsClient.GetTopicsByName(tmName, queryString);
    XmlSerializer ser = new XmlSerializer(typeof(TopicMapFragment));
    TopicMapFragment resultsFragment = ser.Deserialize(new XmlNodeReader(results)) as TopicMapFragment;
    foreach(Topic t in resultsFragment.topiclist) 
    {
      if (!t.stub) 
      {
        System.Console.WriteLine("Topic {0}: {1}", t.oid, t.names[0].namestring);
      }
    }
  } 
  catch (SoapException ex) 
  {
    if (ex.Detail != null) 
    {
      // SoapExceptions from TMWS will usually contain an XML fragment with a detailed description of the error 
      // If the SoapException was raised due to a TMWS error, the SOAP detail element will contain
      // results structure which can be deserialized to extract information.
      XmlNamespaceManager nsmgr = new XmlNamespaceManager(ex.Detail.OwnerDocument.NameTable);
      nsmgr.AddNamespace("res", "http://www.networkedplanet.com/schema/ws-results");
      XmlElement resultsEl = ex.Detail.SelectSingleNode("res:results", nsmgr) as XmlElement;
      if (resultsEl != null) 
      {
        // We have a results element which can be deserialized to an
        // instance of the NetworkedPlanet.WebServiceClient.Common.ResultListType class
        XmlSerializer ser = new XmlSerializer(typeof(ResultListType));
        ResultListType resultList = ser.Deserialize(new XmlNodeReader(resultsEl)) as ResultListType;
        foreach(ResultType result in resultList.result) 
        {
          if (result.isError &amp;&amp; result.error != null)
          {
            System.Console.Error.WriteLine("\nError: {0}\n  {1}", result.error.code, result.error.message);
            if (result.error.cause != null) 
            {
              foreach(CSharpException cause in result.error.cause) 
              {
                System.Console.WriteLine("  Cause: {0}", cause.message);
              }
            }
            if (result.error.action != null) 
            {
              foreach(Action action in result.error.action) 
              {
                System.Console.Error.WriteLine("  Corrective Action: {0}", action.Value);
              }
            }
          }
        }
      } 
      else 
      {
        // Just display the contents of the SOAP fault details element.
        System.Console.Error.WriteLine("Error detail:\r\n" + ex.Detail.OuterXml);
      }
    }
  }
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e259"></a>Calling SOAP Web Services From VB.NET</h5></div></div></div><p>The following code shows a method that invokes the
          <code class="methodname">GetTopicsByName</code> operation on the Topic Maps
          Web Service and processes the response. The sample code shown here
          uses the utilities provided by the serviceclient.dll assembly. The
          full code for this example can be found in
          <code class="filename">examples/VB/WebServices/TopicsByNameSOAP</code>. As
          the code below shows, the response from the web service can be
          deserialized into the appropriate class from the
          NetworkedPlanet.WebServiceClient.Tmws namespace (for TMWS
          operations) or NetworkedPlanet.WebServiceClient.Npcl namespace (for
          NPCL Web Service operations) - there are also a set of common
          structures for reporting lists of results and/or errors in the
          NetworkedPlanet.WebServiceClient.Common namespace.</p><div class="example"><a name="d0e270"></a><p class="title"><b>Example&nbsp;6.&nbsp;Calling SOAP Web Services from VB</b></p><pre class="programlisting">Imports System.Xml
Imports System.Web.Services.Protocols
Imports NetworkedPlanet.WebServiceClient
Imports NetworkedPlanet.WebServiceClient.Tmws
Imports NetworkedPlanet.WebServiceClient.Common

...

    Sub DoRequest(ByVal endpointUrl As String, ByVal tmName As String, ByVal queryString As String)
        Dim tmwsClient As New TMSClient(endpointUrl)
        Try
            Dim responseXml As XmlNode
            responseXml = tmwsClient.GetTopicsByName(tmName, queryString)
            Dim ser As System.Xml.Serialization.XmlSerializer
            ser = New System.Xml.Serialization.XmlSerializer(GetType(TopicMapFragment))
            Dim results As TopicMapFragment
            results = ser.Deserialize(New XmlNodeReader(responseXml))
            Dim t As Topic
            For Each t In results.topiclist
                If (Not t.stub) Then
                    System.Console.WriteLine("Topic {0} : {1}", t.oid, t.names(0).namestring)
                End If
            Next
        Catch ex As SoapException
            If Not (ex.Detail Is Nothing) Then
                Dim nsmgr As XmlNamespaceManager = New XmlNamespaceManager(ex.Detail.OwnerDocument.NameTable)
                nsmgr.AddNamespace("res", "http://www.networkedplanet.com/schema/ws-results")
                Dim resultsEl As XmlElement = ex.Detail.SelectSingleNode("res:results", nsmgr)
                If Not (resultsEl Is Nothing) Then
                    Dim ser As System.Xml.Serialization.XmlSerializer = New System.Xml.Serialization.XmlSerializer(GetType(ResultListType))
                    Dim results As ResultListType = ser.Deserialize(New XmlNodeReader(resultsEl))
                    Dim result As ResultType
                    For Each result In results.result
                        If result.isError Then
                            System.Console.Error.WriteLine("ERROR: {0}", result.error.code)
                            System.Console.Error.WriteLine("  {0}", result.error.message)
                            If Not (result.error.cause Is Nothing) Then
                                Dim cause As CSharpException
                                For Each cause In result.error.cause
                                    System.Console.Error.WriteLine("  Cause: {0}", cause.message)
                                Next
                            End If
                            If Not (result.error.action Is Nothing) Then
                                Dim action As Action
                                For Each action In result.error.action
                                    System.Console.Error.WriteLine("  Corrective Action: {0}", action.Value)
                                Next
                            End If
                        End If
                    Next
                    Return
                End If
            End If
            System.Console.Error.WriteLine("Error Detail: {0}", ex.Detail.OuterXml)
        End Try
    End Sub</pre></div></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tmws-definition"></a>Topic Map Web Service Definition</h2></div></div></div><p>This section provides an overview of the NetworkedPlanet Topic Map
    Web Service. This service can be accessed both via a SOAP web service and
    by using HTTP GET/POST interfaces which allow connectivity from AJAX
    applications. This section starts with an overview of the operations that
    the Web Service provide, described in terms of their input parameters,
    processing and output.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e282"></a>Topic Map Web Service Configuration</h3></div></div></div><p>The Topic Map Web Service provides several configuration options
      which are managed by editing the Web.config file for the web
      application. This section describes these options and how they are
      configured.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e287"></a>Named Query Configuration</h4></div></div></div><p>The TMWS Query operation allows clients to execute only named
        queries configured on the server. This allows the server administrator
        control over what queries are executed, prevents arbitrary SQL
        execution on the TMCore server and also allows the administrator to
        optionally specify caching to improve response times. Queries are
        configured on the server by adding one or more
        <code class="sgmltag-element">query</code> elements to the <code class="sgmltag-element">queries</code>
        custom section of the Web.config file. The structure is shown
        below:</p><pre class="programlisting">&lt;configuration&gt;
  &lt;configSections&gt;
    &lt;section name="queries" type="NetworkedPlanet.TMService.QuerySectionHandler, tmws" /&gt;
    &lt;!-- Other section configurations go here --&gt;
  &lt;/configSections&gt;
  &lt;!-- Other configuration elements go here --&gt;
  &lt;queries&gt;
    &lt;query name="NAME" topicMapParam="TM_PARAM_NAME"&gt;
      &lt;tmrql&gt;QUERY_STRING&lt;/tmrql&gt;
      &lt;param name="PARAM_NAME" type="PARAM_TYPE" /&gt;
    &lt;/query&gt;
  &lt;/queries&gt;
&lt;/configuration&gt;</pre><div class="variablelist"><dl><dt><span class="term">query/@name</span></dt><dd><p>This attribute specifies the name for the query. This name
              is used in invocations to the Query operation of the web
              service. This attribute is REQUIRED.</p></dd><dt><span class="term">query/@topicMapParam</span></dt><dd><p>This attribute specifies the name of a query parameter
              which will receive the OID of the topic map identified in the
              query invocation. The parameter name should be in standard SQL
              parameter name syntax. This attribute is OPTIONAL. If this
              attribute is ommitted, then no topic map OID parameter will be
              provided.</p></dd><dt><span class="term">query/@cacheTimeout</span></dt><dd><p>This attribute specifies the number of seconds that the
              results from the query will be cached by TMWS. Query results are
              cached based on parameters as well as the query, so only
              executing an identical query with result in the cached result
              being returned. This attribute is OPTIONAL.</p></dd><dt><span class="term">query/tmrql</span></dt><dd><p>This element contains the SQL query to be executed. The
              query may contain an number of SQL parameters, but each
              parameter must match up either with the name provided in the
              <code class="sgmltag-element">topicMapParam</code> attribute or one of the
              parameters defined by the following <code class="sgmltag-element">param</code>
              elements. This element is REQUIRED.</p></dd><dt><span class="term">query/param</span></dt><dd><p>This element provides a definition for one of the
              parameters to the query. This element is OPTIONAL and
              REPEATABLE.</p><p>When a query is executed, the values passed in the
              <em class="parameter"><code>args</code></em> parameter are bound to the
              parameters defined by the <code class="sgmltag-element">param</code> elements in
              the order in which they are specified in the query configuration
              - so the first value in the <em class="parameter"><code>args</code></em> array is
              bound to the parameter defined by the first
              <code class="sgmltag-element">param</code> element under the
              <code class="sgmltag-element">query</code> element of the query being executed,
              and so on. An "Oid" type parameter must be bound to an value
              that can be parsed as an integer.</p></dd><dt><span class="term">query/param/@name</span></dt><dd><p>Specifies the name of the attribute. The name must conform
              to standard SQL parameter name syntax. This attribute is
              REQUIRED.</p></dd><dt><span class="term">query/param/@type</span></dt><dd><p>Specifies the type of the attribute. Currently only two
              types are supported: "Oid" and "String". Use Oid parameters to
              pass around topic, association or other topic map object
              identifiers. Use String parameters to pass around subject
              identifiers, subject locators, source locators, name strings,
              resource locators and occurrence and variant string values. This
              attribute is REQUIRED and its values are treated in a
              case-insensitive manner.</p></dd></dl></div><div class="example"><a name="d0e366"></a><p class="title"><b>Example&nbsp;7.&nbsp;Example of Query Configuration</b></p><pre class="programlisting">&lt;configuration&gt;
  &lt;configSections&gt;
    &lt;section name="queries" type="NetworkedPlanet.TMService.QuerySectionHandler, tmws" /&gt;
  &lt;/configSections&gt;

  &lt;queries&gt;
    &lt;query name="basic" topicMapParam="@tmId"&gt;
      &lt;tmrql&gt;SELECT topic_id FROM tm_topic WHERE topicmap=@tmId&lt;/tmrql&gt;
    &lt;/query&gt;
    &lt;query name="topicByName" topicMapParam="@tmId"&gt;
      &lt;tmrql&gt;
      SELECT 
          tm_topic.topic_id, 
          dbo.tm_displayName(tm_topic.topic_id) as name, 
          tm_topic.type_id, 
          dbo.tm_displayName(type_id) AS typeName 
      FROM 
          tm_nameValue JOIN tm_topic ON tm_nameValue.topic_id=tm_topic.topic_id 
      WHERE 
          tm_topic.topicmap=@tmId AND name_value LIKE @nameValue
      &lt;/tmrql&gt;
      &lt;param name="@nameValue" type="string"/&gt;
    &lt;/query&gt;
    &lt;query name="relatedTopics"&gt;
      &lt;tmrql&gt;SELECT DISTINCT r2p as topic_id FROM tm_assoc2 WHERE r1p=@topicId&lt;/tmrql&gt;
      &lt;param name="@topicId" type="oid"/&gt;
    &lt;/query&gt;
  &lt;/queries&gt;
&lt;/configuration&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e371"></a>Query Ontology Configuration</h4></div></div></div><p>The query configuration supports the use of an application
        ontology to make TMRQL query strings shorter and easier to read. The
        application ontology defines two kinds of mappings:</p><div class="orderedlist"><ol type="1"><li><p>A mapping from a short code to a subject identifier URL.
            When the short code appears in a query string enclosed in curly
            braces (e.g. {shortcode}), it will be replaced by the object
            identifier of the topic in the topic map that has the mapped
            subject identifier.</p></li><li><p>A mapping from a short code to a subject identifier URL
            prefix. When the short code appears in a query string combined
            with a colon (:) and followed by a suffix (e.g.
            {shortcode:suffix}), it will be replaced by the object identifier
            of the topic in the topic map that has a subject identifier that
            matches the suffix part concatenated to the subject identifier URL
            prefix.</p></li></ol></div><p>The use of application ontology has several benefits - it makes
        queries shorter and easier to read; it avoids having to constantly
        perform subject identifier look-ups for ontology topics which
        typically do not change very frequently; and it enables more efficient
        lookup by object identifier without the need to hardcode the object
        identifier value into the query string.</p><p>The ApplicationOntology object that performs this is described
        in detail in the TMCore API Guide. The structure for the configuration
        section for the ontology is shown below.</p><pre class="programlisting">&lt;configuration&gt;
  &lt;configSections&gt;
    &lt;section name="ontology" type="NetworkedPlanet.TMCore.Utils.OntologySectionHandler, tmcore" /&gt;
  &lt;/configSections&gt;

  &lt;ontology&gt;
    &lt;subject key="fruit" identifier="http://www.example.com/psi/types/fruit"/&gt;
    &lt;identifierPrefix prefix="fr" identifier="http://www.example.com/psi/fruits/"/&gt;
  &lt;/ontology&gt;
&lt;/configuration&gt;</pre><div class="variablelist"><dl><dt><span class="term">ontology</span></dt><dd><p>This is the wrapper element for the configuration. It
                must be named "ontology", all in lower case as shown. The
                configuration section must also be registered in the
                <code class="sgmltag-element">configSections</code> portion of the
                <code class="filename">Web.config</code> file as shown in the example
                above.</p></dd><dt><span class="term">ontology/subject</span></dt><dd><p>This element defines a single short-code to subject
                identifier mapping. This element is OPTIONAL an REPEATABLE.
                The example shown above maps the short-code "fruit" to the
                subject identifier URI
                "http://www.example.com/psi/types/fruit".</p></dd><dt><span class="term">ontology/subject/@key</span></dt><dd><p>This attribute specifies the short-code for the subject
                identifier URI. This attribute is REQUIRED.</p></dd><dt><span class="term">ontology/subject/@identifier</span></dt><dd><p>This attribute specifies the subject identifier URI that
                the short-code is mapped to. This attribute is
                REQUIRED.</p></dd><dt><span class="term">identifierPrefix</span></dt><dd><p>This element defines a single short-code to subject
                identifier prefix mapping. This element is OPTIONAL and
                REPEATABLE. The example shown above maps the short-code "fr"
                to the prefix string "http://www.example.com/psi/fruits/", so
                the code fr:apple would be replaced by the object identifier
                of the topic that has the URI
                "http://www.example.com/psi/fruits/apple" as a subject
                identifier.</p></dd><dt><span class="term">identifierPrefix/@prefix</span></dt><dd><p>This attribute specifies the short-code for the
                identifier prefix. This attribute is REQUIRED.</p></dd><dt><span class="term">identifierPrefix/@identifier</span></dt><dd><p>This attribute specifies the URI prefix that the
                short-code is mapped to. This attribute is REQUIRED.</p></dd></dl></div><p>Once specified, the ontology configuration can be
        used in the TMRQL query strings of named queries as shown in the
        following example</p><div class="example"><a name="d0e440"></a><p class="title"><b>Example&nbsp;8.&nbsp;Using The Application Ontology for TMWS Named Queries</b></p><pre class="programlisting">&lt;configuration&gt;

  &lt;configSections&gt;
    &lt;section name="queries" type="NetworkedPlanet.TMService.QuerySectionHandler, tmws" /&gt;
    &lt;section name="ontology" type="NetworkedPlanet.TMCore.Utils.OntologySectionHandler, tmcore" /&gt;
  &lt;/configSections&gt;
  ...

  &lt;ontology&gt;
    &lt;subject key="fruit" identifier="http://www.example.com/psi/types/fruit"/&gt;
    &lt;identifierPrefix prefix="fr" identifier="http://www.example.com/psi/fruits/"/&gt;
  &lt;/ontology&gt;

  &lt;queries&gt;

    &lt;query name="fruitByName" topicMapParam="@tmId" cacheTimeout="60"&gt;
      &lt;!-- Select topics with a name like @nameValue that are typed as fruit --&gt;
      &lt;tmrql&gt;
      SELECT 
        tm_topic.topic_id, 
        dbo.tm_displayName(tm_topic.topic_id) as name
      FROM 
        tm_nameValue JOIN tm_topic ON tm_nameValue.topic_id=tm_topic.topic_id 
      WHERE 
        tm_topic.topicmap=@tmId AND name_value LIKE @nameValue AND tm_topic.type_id={fruit}
      &lt;/tmrql&gt;
      &lt;param name="@nameValue" type="string"/&gt;
    &lt;/query&gt;

    &lt;query name="relatedToOrange" topicMapParam="@tmId" cacheTimeout="60"&gt;
      &lt;!-- Select all topics that are related to the orange --&gt;
      &lt;tmrql&gt;SELECT DISTINCT r2p as topic_id FROM tm_assoc2 WHERE r1p={fr:orange}&lt;/tmrql&gt;
    &lt;/query&gt;
  &lt;/queries&gt;
  ...
&lt;/configuration&gt;</pre><p>The query named "fruitByName" shows the use of a full
          identifier short-code. In this case, the string "{fruit}" will be
          replaced by the object identifier of topic that has the subject
          identifier "http://www.example.com/psi/types/fruit". In the query
          "relatedToOrange", a prefix short-code is used instead so that the
          string "{fr:orange}" will be replaced by the object identifier of
          the topic that has the subject identifier
          "http://www.example.com/psi/fruits/orange".</p></div><div class="note"><h3 class="title">Note</h3><p>Only the TMRQL query string contained in the
          <code class="sgmltag-element">tmrql</code> element of the query configuration is
          processed against the application ontology. It is not possible to
          pass in short-codes as parameters to a query.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e453"></a>Deprecated Query Configuration</h4></div></div></div><p>This version of TMCore deprecates the old configuration for
        named queries. This form of configuration is still supported, but it
        is recommended that you do not use this form of configuration any
        longer as it is susceptible to SQL injection attacks.</p><p>Under the deprecated query configuration, a query is configured
        on the server by adding an entry to the <code class="sgmltag-element">appSettings</code>
        element of the web.config for the web service. The value of the entry
        should be a normal TMRQL query string. To specify that a parameter
        passed in to the query should appear in the query, use the syntax {#}
        where # is replaced by the index of the argument in the argument list
        (starting with 0). For example:</p><pre class="programlisting">&lt;appSettings&gt;
  ...
  &lt;add key="query.topics.by.name"
       value="select topic_id as id, dbo.tm_displayName(topic_id) as name from tm_nameValue
  join topicmap on topicmap.id=tm_nameValue.topicmap and topicmap.mapname='{0}' and name_value like '%{1}%'" /&gt;
  ...
&lt;/appSettings&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e465"></a>ITopicMap object timeouts</h4></div></div></div><p>Each time a query is executed by TMWS, it requires an
        <code class="classname">ITopicMap</code> instance. Obtaining a new reference
        has a small affect on performance because obtaining a map handle
        requires queries on tables in the database. By default, TMWS caches
        the ITopicMap instance for 60 seconds. This settings may be modified
        by setting the following property in the application config
        (<code class="filename">Web.config</code>) within
        <code class="literal">/configuration/appSettings</code>:</p><pre class="programlisting">&lt;add key="networkedplanet.com.tmcore.topicmapcache.timeout" value="0"/&gt;</pre><p>Setting
        the value of zero causes no caching to occur. You may need this if you
        have applications which are regularly deleting topic maps from the
        database.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e483"></a>Namespaces</h3></div></div></div><p>In the following service description a number of different XML
      schema are used. The table below lists the namespace prefixes used in
      the descriptions, the namespace they map to and a reference to the
      schema description. Other namespace and namespace prefix mappings are
      defined where they occur in the service description.</p><div class="table"><a name="d0e488"></a><p class="title"><b>Table&nbsp;1.&nbsp;Namespaces Used In This Document</b></p><table summary="Namespaces Used In This Document" cellspacing="0" cellpadding="3" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Prefix</th><th>Namespace URI</th><th>Reference</th></tr></thead><tbody><tr><td>frag</td><td><code class="literal">http://www.networkedplanet.com/2005/01/topicmap/data/</code></td><td><a href="#tmf-schema" title="Topic Map Fragment XML Schema">the section called &#8220;Topic Map Fragment XML Schema&#8221;</a></td></tr><tr><td>res</td><td><code class="literal">http://www.networkedplanet.com/schema/ws-results</code></td><td><a href="#results-schema" title="Results Description Document Schema">the section called &#8220;Results Description Document Schema&#8221;</a></td></tr><tr><td>tmh</td><td><code class="literal">http://www.networkedplanet.com/2005/01/topicmap/patterns/hierarchy/</code></td><td><a href="#hierarchy-schema" title="Hierarchy XML Schema">the section called &#8220;Hierarchy XML Schema&#8221;</a></td></tr><tr><td>tmws</td><td><code class="literal">http://www.networkedplanet.com/2005/01/webservices/tmservice/</code></td><td>Described as required under the service operations
              contained in this section.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e533"></a>General Operation Errors</h3></div></div></div><p>Any of the service operations described in the following section
      may raise one of the following errors in addition to any
      operation-specific errors.</p><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>UNEXPECTED_EXCEPTION</td><td>An unexpected error occurred whilst processing the
              request against a specific topic map. The error message will
              identify the topicmap being accessed. The message and nested
              action elements will help you identify the cause of the
              error.</td></tr><tr><td>INTERNAL_ERROR</td><td>An unexpected internal error prevent has occurred on the
              server. The error message and nested action elements will help
              you (or your systems administrator) identify the cause of the
              error.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e557"></a>Service Operations</h3></div></div></div><p>This section describes the methods supported by the Topic Map Web
      Service.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e562"></a>Delete Associations</h4></div></div></div><p>Removes one or more associations from the specified topic map.
        The associations to be deleted are identified by their unique object
        identifiers.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e567"></a>Method Name</h5></div></div></div><p><code class="methodname">DeleteAssociations</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e573"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to delete the associations
                from. This parameter is a single string.</p></dd><dt><span class="term">oids</span></dt><dd><p>The unique object identifiers of the associations to be
                deleted. This parameter is an array of strings.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e589"></a>Returns</h5></div></div></div><p>This method returns an XML document conforming to the Web
          Service Results schema with a root element of type
          <code class="sgmltag-element">res:results</code> which contains one
          <code class="sgmltag-element">res:result </code>element for each association OID
          specified in the request. The <code class="sgmltag-element">key</code> attribute of
          each <code class="sgmltag-element">res:result</code> element specifies the OID of the
          association that was deleted.</p><div class="note"><h3 class="title">Note</h3><p>This structure is returned as long as the
            <em class="parameter"><code>topicmap</code></em> parameter is valid. Any error that
            occurs on the deletion of an individual association will be
            reported in the <code class="sgmltag-element">res:result</code> element for that
            association.</p></div><p>Each <code class="sgmltag-element">res:result</code> element that reports an
          error may contain a <code class="sgmltag-element">res:error</code> element that uses
          one of the following codes:</p><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_OID</td><td>The object identifier provided for the association is
                  not valid or is not an OID of an association contained in
                  the topic map identified by the
                  <em class="parameter"><code>topicmap</code></em> parameter.</td></tr><tr><td>DELETE_ASSOCIATION_FAILED</td><td>One of the associations specified for deletion could
                  not be removed from the topic map. The error key will
                  specify the OID of the association which could not be
                  deleted. The message and nested action elements will help
                  you identify the cause of the failure.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e645"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e665"></a>Examples</h5></div></div></div><div class="example"><a name="d0e668"></a><p class="title"><b>Example&nbsp;9.&nbsp;HTTP Interface Request XML for DeleteAssociations
            Operation</b></p><p>The following example shows an XML request that can be sent
            using an HTTP POST to the DeleteAssociations.aspx operation
            page.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="oids"&gt;1234&lt;/param&gt;
  &lt;param name="oids"&gt;5678&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e675"></a><p class="title"><b>Example&nbsp;10.&nbsp;C# Code Using the Web Services Client Library to Invoke the
            DeleteAssociations Operation</b></p><p>The following example shows how to delete associations using
            the Web Services Client library.</p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");
XmlNode results = client.DeleteAssociations("mytopicmap", new string[] {"1234", "5678"});</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e682"></a>Delete Topics</h4></div></div></div><p>Removes one or more topics from the specified topic map. The
        topics to be deleted are identified by their unique object
        identifiers.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e687"></a>Method Name</h5></div></div></div><p><code class="methodname">DeleteTopics</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e693"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to delete topics from.</p></dd><dt><span class="term">oidsc</span></dt><dd><p>The unique object identifiers of the topics to be
                deleted. This parameter is an array of strings.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e709"></a>Returns</h5></div></div></div><p>Returns an XML document conforming to the Web Service Results
          schema with a root element of type <code class="sgmltag-element">res:results</code>
          which contains one <code class="sgmltag-element">res:result</code> element for each
          topic OID specified in the request. The key attribute of each
          <code class="sgmltag-element">res:result</code> element specifies the OID of the topic
          to be deleted.</p><div class="note"><h3 class="title">Note</h3><p>This structure is returned as long as the
            <em class="parameter"><code>topicmap</code></em> parameter is valid. Any error that
            occurs on the deletion of an individual topic will be reported in
            the <code class="sgmltag-element">res:result</code> element for that topic.</p></div><p>Each <code class="sgmltag-element">res:result</code> element that reports an
          error may contain a <code class="sgmltag-element">res:error</code> element that uses
          one of the following codes:</p><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_OID</td><td>The object identifier provided for the topic is not
                  valid or is not an OID of a topic contained in the topic map
                  identified by the <em class="parameter"><code>topicmap</code></em>
                  parameter.</td></tr><tr><td>DELETE_TOPIC_FAILED</td><td>One of the topics specified for deletion could not be
                  removed from the topic map. The error key will specify the
                  OID of the topic which could not be deleted. The message and
                  nested action elements will help you identify the cause of
                  the failure.</td></tr><tr><td>TOPIC_IN_USE</td><td>The topic could not be deleted because it is
                  referenced from elsewhere in the topic map as a type, a
                  scoping topic or plays a role in one or more associations.
                  The error key specifies the OID of the topic that could not
                  be deleted.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e767"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e787"></a>Examples</h5></div></div></div><div class="example"><a name="d0e790"></a><p class="title"><b>Example&nbsp;11.&nbsp;HTTP Interface Request XML for DeleteTopics
            Operation</b></p><p>The following request XML can be POSTed to the
            DeleteTopics.aspx page to request the deletion of two topics from
            the topic map.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="oids"&gt;1234&lt;/param&gt;
  &lt;param name="oids"&gt;5678&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e797"></a><p class="title"><b>Example&nbsp;12.&nbsp;C# Code Using the Web Services Client to Invoke the
            DeleteTopics Operation</b></p><p>The following code snippet shows how to delete two topics
            from a topic map using the Web Services Client library:</p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");
XmlNode results = client.DeleteTopics("mytopicmap", new string[] {"1234", "5678"});</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e804"></a>Get Hierarchy</h4></div></div></div><p>Retrieves an XML document describing a single hierarchy present
        in the topic map. The hierarchy to be retrieved is identified by the
        unique object identifier of the topic that defines the
        hierarchy.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e809"></a>Method Name</h5></div></div></div><p><code class="methodname">GetHierarchy</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e815"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to retrieve the specified
                hierarchy from.</p></dd><dt><span class="term">hierarchydefid</span></dt><dd><p>The object identifier of the topic that defines the
                hierarchy to be retrieved.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e831"></a>Returns</h5></div></div></div><p>An XML document conforming to the Networked Planet Hierarchy
          XML Schema.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e836"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>INVALID_OID</td><td>The value of the
                  <em class="parameter"><code>hierarchydefid</code></em> parameter was not a
                  valid object identifier or was not the identifier of a topic
                  contained in the topic map identified by the
                  <em class="parameter"><code>topicmap</code></em> parameter.</td></tr><tr><td>NOT_A_HIERARCHY</td><td>The topic identified by
                  <em class="parameter"><code>hierarchydefid</code></em> does not define a
                  hierarchy in the topic map.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e875"></a>Examples</h5></div></div></div><div class="example"><a name="d0e878"></a><p class="title"><b>Example&nbsp;13.&nbsp;HTTP POST Body to Invoke the GetHierarchy Operation</b></p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="hierarchydefid"&gt;1234&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e883"></a><p class="title"><b>Example&nbsp;14.&nbsp;HTTP GET URL to Invoke the GetHierarchy Operation</b></p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetHierarchy.aspx?topicmap=mytopicmap&amp;hierarchydefid=1234</pre></div><div class="example"><a name="d0e888"></a><p class="title"><b>Example&nbsp;15.&nbsp;C# Code to Invoke the GetHierarchy Operation using the Web
            Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");

XmlNode hierarchy = client.GetHierarchy("mytopicmap", "1234");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e893"></a>Get Hierarchy Roots</h4></div></div></div><p>Returns an XML document describing all of the hierarchies
        present in the topic map. For each hierarchy, the returned document
        provides the unique object identifier of the topic that defines the
        hierarchy and the topic that is the root topic of the
        hierarchy.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e898"></a>Method Name</h5></div></div></div><p><code class="methodname">GetHierarchyRoots</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e904"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to retrieve the hierarchy
                information from.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e914"></a>Returns</h5></div></div></div><p>An XML document describing each of the hierarchies contained
          in the specified topic map. The document conforms to the
          NetworkedPlanet Hierarchy XML Schema with the
          <code class="sgmltag-element">tmh:treelist</code> element as its root element.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e922"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e942"></a>Examples</h5></div></div></div><div class="example"><a name="d0e945"></a><p class="title"><b>Example&nbsp;16.&nbsp;HTTP POST Body to Invoke the GetHierarchyRoots
            Operation</b></p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e950"></a><p class="title"><b>Example&nbsp;17.&nbsp;HTTP GET URL to Invoke the GetHierarchyRoots
            Operation</b></p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetHierarchyRoots.aspx?topicmap=mytopicmap</pre></div><div class="example"><a name="d0e955"></a><p class="title"><b>Example&nbsp;18.&nbsp;C# Code to Invoke the GetHierarchyRoots Operation using the
            Web Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");

XmlNode hierarchyRoots = client.GetHierarchyRoots("mytopicmap");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e960"></a>Get Object By Source Locator</h4></div></div></div><p>Returns a topic map fragment that includes the topic map object
        with the specified source locator. If the object is a topic,
        occurrence, topic name, or variant name then the returned fragment
        will contain at least a <code class="sgmltag-element">topiclist</code> element
        containing the topic that contains that object. If the object is an
        association or association role, then the returned fragment will
        contain at least an <code class="sgmltag-element">associationlist</code> element that
        contains the object.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e971"></a>Method Name</h5></div></div></div><p><code class="methodname">GetObjectBySourceLocator</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e977"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to search.</p></dd><dt><span class="term">sourcelocator</span></dt><dd><p>The source locator URI of the object to be
                returned.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e993"></a>Returns</h5></div></div></div><p>An XML document conforming to the NetworkedPlanet Topic Map
          Fragment XML Schema. The object found by the query will be contained
          in the topic map fragment. If the object requested was a topic, it
          will be present as a <code class="sgmltag-element">frag:topic</code> element inside
          the <code class="sgmltag-element">frag:topiclist</code> element. If the object was an
          occurrence, topic name or variant name, the entire topic that
          contains that object will be present as a
          <code class="sgmltag-element">frag:topic</code> element inside the
          <code class="sgmltag-element">frag:topiclist</code> element. If the object was an
          association, it will be present as a
          <code class="sgmltag-element">frag:association</code> element inside the
          <code class="sgmltag-element">frag:associationlist</code> element. If the object was
          an association role, the entire association that contains the object
          will be present as a <code class="sgmltag-element">frag:association</code> element
          inside the <code class="sgmltag-element">frag:associationlist</code> element. If the
          result requires the generation of a <code class="sgmltag-element">frag:topic</code>
          element, that topic will be fully serialized and any topics that it
          references will be serialized as stubs.</p><p>If no object was found in the topic map with the specified
          source locator, this method will return an empty
          <code class="sgmltag-element">frag:topicmap</code> element.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1030"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1050"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1053"></a><p class="title"><b>Example&nbsp;19.&nbsp;HTTP POST Body to Invoke the GetObjectBySourceLocator
            Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the GetObjectBySourceLocator.aspx request
            page.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="sourcelocator"&gt;http://www.example.com/topicmaps/foo.xtm#bar&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1060"></a><p class="title"><b>Example&nbsp;20.&nbsp;HTTP GET URL to Invoke the GetObjectBySourceLocator
            Operation</b></p><p>The following example shows how to invoke the
            GetObjectBySourceLocator operation using an HTTP GET. Note that
            the source locator value should be properly escaped within the URL
            string.</p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetObjectBySourceLocator.aspx?topicmap=mytopicmap&amp;sourcelocator=http%3a%2f%2f...</pre></div><div class="example"><a name="d0e1067"></a><p class="title"><b>Example&nbsp;21.&nbsp;C# Code to Invoke the GetObjectBySourceLocator Operation
            using the Web Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");

XmlNode tmFragment = client.GetObjectBySourceLocator("mytopicmap", "http://www.example.com/topicmaps/foo.xtm#bar");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1072"></a>Get Topic</h4></div></div></div><p>Returns a topic map fragment that includes the specified topic.
        The topic is identified by its unique object identifier.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1077"></a>Method Name</h5></div></div></div><p><code class="methodname">GetTopic</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1083"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to be searched for the
                requested topic.</p></dd><dt><span class="term">topicid</span></dt><dd><p>The OID of the topic to be returned.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1099"></a>Returns</h5></div></div></div><p>An XML document conforming to the NetworkedPlanet Topic Map
          Fragment XML Schema. The root element will be the
          <code class="sgmltag-element">frag:topicmap</code> element. This fragment will contain
          a <code class="sgmltag-element">frag:topiclist</code> which contains the requested
          topic fully serialized and any topics that it references serialized
          as stub topics. If no topic is found with the specified OID in the
          specified topic map, then this method will return an empty
          <code class="sgmltag-element">frag:topicmap</code> element.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1113"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>INVALID_OID</td><td>The value of the <em class="parameter"><code>topicid</code></em>
                  parameter could not be parsed as a valid topic object
                  identifier.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1141"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1144"></a><p class="title"><b>Example&nbsp;22.&nbsp;HTTP POST Body to Invoke the GetTopic Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the GetTopic.aspx request page.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="topicid"&gt;1234&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1151"></a><p class="title"><b>Example&nbsp;23.&nbsp;HTTP GET URL to Invoke the GetTopic Operation</b></p><p>The following example shows how to invoke the GetTopic
            operation using an HTTP GET.</p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetTopic.aspx?topicmap=mytopicmap&amp;topicid=1234</pre></div><div class="example"><a name="d0e1158"></a><p class="title"><b>Example&nbsp;24.&nbsp;C# Code to Invoke the GetObjectBySourceLocator Operation
            using the Web Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");

XmlNode tmFragment = client.GetTopic("mytopicmap", "1234");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1163"></a>Get Topic By Subject Identifier</h4></div></div></div><p>Returns a topic map fragment that includes the topic with the
        specified subject identifier.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1168"></a>Method Name</h5></div></div></div><p><code class="methodname">GetTopicBySubjectIdentifier</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1174"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to be searched.</p></dd><dt><span class="term">locator</span></dt><dd><p>The subject identifier of the topic to be
                returned.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1190"></a>Returns</h5></div></div></div><p>An XML document conforming to the NetworkedPlanet Topic Map
          Fragment XML Schema. This fragment will contain a
          <code class="sgmltag-element">frag:topiclist</code> which contains the requested topic
          fully serialized and any topics that it references serialized as
          stub topics. If no topics have the specified subject identifier, an
          empty <code class="sgmltag-element">frag:topicmap</code> element will be
          returned.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1201"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1221"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1224"></a><p class="title"><b>Example&nbsp;25.&nbsp;HTTP POST Body to Invoke the GetTopicBySubjectIdentifier
            Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the GetTopicBySubjectIdentifier.aspx request
            page.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="locator"&gt;http://psi.example.com/companies/MSFT&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1231"></a><p class="title"><b>Example&nbsp;26.&nbsp;HTTP GET URL to Invoke the GetTopicBySubjectIdentifier
            Operation</b></p><p>The following example shows how to invoke the
            GetTopicBySubjectIdentifier operation using an HTTP GET. Note that
            the subject identifier value should be properly escaped within the
            URL string.</p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetTopicBySubjectIdentifier?topicmap=mytopicmap&amp;locator=http%3a%2f%2f...</pre></div><div class="example"><a name="d0e1238"></a><p class="title"><b>Example&nbsp;27.&nbsp;C# Code to Invoke the GetTopicBySubjectIdentifier Operation
            using the Web Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");

XmlNode tmFragment = client.GetTopicBySubjectIdentifier("mytopicmap", "http://psi.example.com/companies/MSFT");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1243"></a>Get Topic Maps</h4></div></div></div><p>Returns an XML document that describes all of the topic maps
        managed by the TMCore server.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1248"></a>Method Name</h5></div></div></div><p><code class="methodname">GetTopicMaps</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1254"></a>Parameters</h5></div></div></div><p>This method takes no parameters.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1259"></a>Returns</h5></div></div></div><p>An XML document conforming to the NetworkedPlanet Topic Map
          Fragment XML Schema. The root element of this document will be the
          <code class="sgmltag-element">frag:topicmapsystem</code> element.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1267"></a>Errors</h5></div></div></div><p>There are no operation-specific errors for this
          operation.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1272"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1275"></a><p class="title"><b>Example&nbsp;28.&nbsp;HTTP POST Body to Invoke the GetTopicMaps Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the GetTopicMaps request page.</p><pre class="programlisting">&lt;request /&gt;
</pre></div><div class="example"><a name="d0e1282"></a><p class="title"><b>Example&nbsp;29.&nbsp;HTTP GET URL to Invoke the GetTopicMaps Operation</b></p><p>The following example shows how to invoke the GetTopicMaps
            operation using an HTTP GET.</p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetTopicMaps.aspx</pre></div><div class="example"><a name="d0e1289"></a><p class="title"><b>Example&nbsp;30.&nbsp;C# Code to Invoke the GetTopicMaps Operation using the Web
            Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");
XmlNode tmSystem = client.GetTopicMaps();</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1294"></a>Get Topics By Name</h4></div></div></div><p>Returns a topic map fragment that includes every topic with a
        specified name.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1299"></a>Method Name</h5></div></div></div><p><code class="methodname">GetTopicsByName</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1305"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to be searched.</p></dd><dt><span class="term">name</span></dt><dd><p>The string to find.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1321"></a>Returns</h5></div></div></div><p>An XML document conforming to the NetworkedPlanet Topic Map
          Fragment XML Schema. This fragment will contain a
          <code class="sgmltag-element">frag:topiclist</code> which contains each of the topics
          that have at least one name that matches the name parameter. These
          topics will all be fully serialized. All of the topics referenced by
          the fully serialized topics which are not themselves full serialized
          will be included in the <code class="sgmltag-element">frag:topiclist</code> returned
          as stub topics. If no topics are found with a name that matches the
          name parameter, then an empty <code class="sgmltag-element">frag:topicmap</code>
          element will be returned.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1335"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1355"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1358"></a><p class="title"><b>Example&nbsp;31.&nbsp;HTTP POST Body to Invoke the GetTopicsByName
            Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the GetTopicsByName.aspx request page.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="name"&gt;NetworkedPlanet&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1365"></a><p class="title"><b>Example&nbsp;32.&nbsp;HTTP GET URL to Invoke the GetObjectBySourceLocator
            Operation</b></p><p>The following example shows how to invoke the
            GetObjectBySourceLocator operation using an HTTP GET. Note that
            the name value should be properly escaped within the URL string if
            it contains reserved or non-ASCII characters.</p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetTopicsByName?topicmap=mytopicmap&amp;name=NetworkedPlanet</pre></div><div class="example"><a name="d0e1372"></a><p class="title"><b>Example&nbsp;33.&nbsp;C# Code to Invoke the GetObjectBySourceLocator Operation
            using the Web Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");
XmlNode tmFragment = client.GetTopicsByName("mytopicmap", "NetworkedPlanet");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1377"></a>Get Topics By Type</h4></div></div></div><p>Returns a topic map fragment that includes all topics of a
        specified type. The topic type is identified by its unique object
        identifier.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1382"></a>Method Name</h5></div></div></div><p><code class="methodname">GetTopicsByType</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1388"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to search</p></dd><dt><span class="term">typeid</span></dt><dd><p>The object identifier of the topic type to return all
                instances for.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1404"></a>Returns</h5></div></div></div><p>An XML document conforming to the NetworkedPlanet Topic Map
          Fragment XML Schema. The root element of this document will be a
          <code class="sgmltag-element">frag:topicmap</code> element and will contain a
          <code class="sgmltag-element">frag:topiclist</code> element which in turn contains a
          <code class="sgmltag-element">frag:topic</code> element for each topic that is typed
          by the topic identified by the <em class="parameter"><code>typeid</code></em>
          parameter. The instance topics will all be serialized as stub
          topics. If no topics are typed by the specified type, then the
          <code class="sgmltag-element">frag:topicmap</code> element returned will be
          empty.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1424"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>INVALID_OID</td><td>The value of the <em class="parameter"><code>typeid</code></em>
                  parameter could not be converted to a valid object
                  identifier.</td></tr><tr><td>NO_SUCH_OBJECT</td><td>The value of the <em class="parameter"><code>typeid</code></em>
                  parameter was converted to a valid object identifier, but
                  that identifier does not refer to a topic contained in the
                  topic map identified by the <em class="parameter"><code>topicmap</code></em>
                  parameter.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1463"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1466"></a><p class="title"><b>Example&nbsp;34.&nbsp;HTTP POST Body to Invoke the GetTopicsByType
            Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the GetTopicsByType.aspx request page.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="typeid"&gt;1234&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1473"></a><p class="title"><b>Example&nbsp;35.&nbsp;HTTP GET URL to Invoke the GetTopicsByType
            Operation</b></p><p>The following example shows how to invoke the
            GetTopicsByType operation using an HTTP GET.</p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetTopicsByType.aspx?topicmap=mytopicmap&amp;typeid=1234</pre></div><div class="example"><a name="d0e1480"></a><p class="title"><b>Example&nbsp;36.&nbsp;C# Code to Invoke the GetObjectBySourceLocator Operation
            using the Web Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");
XmlNode tmFragment = client.GetTopicsByType("mytopicmap", "1234");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1485"></a>Get Topic Types</h4></div></div></div><p>Returns a topic map fragment that includes all topics which are
        used as the type of one or more other topics in the specified topic
        map.</p><div class="note"><h3 class="title">Note</h3><p>This operation returns a list of all topics which are
          currently used to type other topics in the topic map and is thus
          based on actual usage rather than on a pre-defined topic map schema.
          This list may therefore differ from the list of types returned by
          the NPCL Schema Web Service.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1493"></a>Method Name</h5></div></div></div><p><code class="methodname">GetTopicTypes</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1499"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to search.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1509"></a>Returns</h5></div></div></div><p>An XML document conforming to the NetworkedPlanet Topic Map
          Fragment XML Schema. The root element of this document will be a
          <code class="sgmltag-element">frag:topicmap</code> element and will contain a
          <code class="sgmltag-element">frag:topiclist</code> element which in turn contains a
          <code class="sgmltag-element">frag:topic</code> element for each topic that is used as
          the type of one or more topics in then topic map. All of these
          topics will be fully serialized. Any topics which are referred to by
          the type topics will also be included in the
          <code class="sgmltag-element">frag:topiclist</code> element but will be serialized as
          stubs.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1526"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1546"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1549"></a><p class="title"><b>Example&nbsp;37.&nbsp;HTTP POST Body to Invoke the GetTopicTypes
            Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the GetTopicTypes.aspx request page.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1556"></a><p class="title"><b>Example&nbsp;38.&nbsp;HTTP GET URL to Invoke the GetTopicTypes Operation</b></p><p>The following example shows how to invoke the
            GetObjectBySourceLocator operation using an HTTP GET.</p><pre class="programlisting">http://topicmap.mycorp.com/tmws/GetTopicTypes.aspx?topicmap=mytopicmap</pre></div><div class="example"><a name="d0e1563"></a><p class="title"><b>Example&nbsp;39.&nbsp;C# Code to Invoke the GetObjectBySourceLocator Operation
            using the Web Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");
XmlNode tmFragment = client.GetTopicTypes("mytopicmap");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1568"></a>Query</h4></div></div></div><p>Executes a named query, optionally with one or more parameters.
        The query string is configured on the server. The results are returned
        as an XML document describing a results table.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1573"></a>Method Name</h5></div></div></div><p><code class="methodname">Query</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1579"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to execute the query
                against.</p></dd><dt><span class="term">queryid</span></dt><dd><p>The string identifier of the query to be
                executed.</p></dd><dt><span class="term">args</span></dt><dd><p>The arguments to be passed in to the query before it is
                executed. Arguments are specified using the following XML
                structure:</p><pre class="programlisting">&lt;tmws:args&gt;
  &lt;tmws:string&gt;
                <i>ARG</i>
&lt;/tmws:string&gt;
&lt;/tmws:args&gt;</pre><div class="variablelist"><dl><dt><span class="term">tmws:args</span></dt><dd><p>The wrapper for the arguments to be passed in to
                      the query.</p></dd><dt><span class="term">tmws:args/tmws:string</span></dt><dd><p>Contains a single argument value to pass in to the
                      query. Arguments are passed by position and are bound to
                      the parameters in the named query configuration in the
                      order that the parameters are declared, so the ordering
                      of tmws:string elements is important. This element is
                      OPTIONAL and REPEATABLE.</p></dd></dl></div></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1619"></a>Returns</h5></div></div></div><p>An XML representation of the data set returned by executing
          the query. This data set uses the normal XML syntax for ADO.NET data
          sets and the XML namespace
          <code class="literal">http://www.networkedplanet.com/2005/01/topicmap/querydata/</code>
          .</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1627"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>INVALID_QUERY_ID</td><td>There is no query on the server with the identifier
                  specified in the <em class="parameter"><code>queryid</code></em>
                  parameter.</td></tr><tr><td>MISSING_ARGUMENTS</td><td>At least one argument was required but missing from
                  the <em class="parameter"><code>args</code></em> parameter.</td></tr><tr><td>SQL_ERROR</td><td>An error was encountered exceuting the SQL query. The
                  error message will also contain the error reported by the
                  database.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1668"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1671"></a><p class="title"><b>Example&nbsp;40.&nbsp;HTTP POST Body to Invoke the Query Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the Query.aspx request page.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="queryid"&gt;MyQuery&lt;/param&gt;
  &lt;param name="args"&gt;ARG1&lt;/param&gt;
  &lt;param name="args"&gt;ARG2&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1678"></a><p class="title"><b>Example&nbsp;41.&nbsp;HTTP GET URL to Invoke the Query Operation</b></p><p>The following example shows how to invoke the Query
            operation using an HTTP GET. Note that this interface can be only
            used if the query takes one argument or no arguments.</p><pre class="programlisting">http://topicmap.mycorp.com/tmws/Query.aspx?topicmap=mytopicmap&amp;queryid=MyQuery&amp;args=ARG1</pre></div><div class="example"><a name="d0e1685"></a><p class="title"><b>Example&nbsp;42.&nbsp;C# Code to Invoke the Query Operation using the Web
            Services Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");

XmlNode results = client.Query("mytopicmap", "MyQuery", new string[] { "ARG1", "ARG2" });

// The results can be deserialized as a DataSet which will always contain a single table:
DataSet dsResults = new DataSet();
dsResults.ReadXml(new XmlNodeReader(results));

// Now you can access the results table as:
DataTable dt = dsResults.Tables[0];</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1690"></a>Save</h4></div></div></div><p>Saves one or more topics and associations to the topic map. This
        method can be used to create new topics and associations, to modify
        existing topics and associations, and to delete objects from topics
        and associations (to delete entire topics or associations, use the
        Delete Topics or Delete Associations methods).</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1695"></a>Method Name</h5></div></div></div><p><code class="methodname">Save</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1701"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The topic map to be updated.</p></dd><dt><span class="term">tmfragment</span></dt><dd><p>The updates to be made to the topic map expressed as an
                XML document conforming to the <a href="#tmf-schema" title="Topic Map Fragment XML Schema">NetworkedPlanet Topic Map Fragment XML
                Schema</a> and with the frag:topicmap element as the root
                element.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1720"></a>Returns</h5></div></div></div><p>An XML document conforming to the NetworkedPlanet Web Service
          Results XML schema with a <code class="sgmltag-element">res:results</code> element as
          the root element of the document. The res:resultrs element will
          contain one <code class="sgmltag-element">res:result</code> element for each
          frag:topic and each <code class="sgmltag-element">frag:association</code> element
          contained in the <em class="parameter"><code>tmfragment</code></em> parameter
          indicating the success status for the update of that object). The
          <code class="sgmltag-element">key</code> attribute of the
          <code class="sgmltag-element">res:result</code> element will contain the value of the
          <code class="sgmltag-element">oid</code> attribute of the
          <code class="sgmltag-element">frag:topic</code> or <code class="sgmltag-element">frag:association</code>
          that was processed. The following error codes may appear inside
          res:result/res:error elements where an error occurs updating an
          individual object:</p><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_OID</td><td>The value of the <code class="sgmltag-element">oid</code> attribute of
                  the object to be updated was not a valid object identifier.
                  For existing objects, the value of the
                  <code class="sgmltag-element">oid</code> attribute must match the object
                  identifier of at least one existing object. For newly
                  created objects, the <code class="sgmltag-element">oid</code> attribute must
                  start with the prefix 'new:' followed by one or more ASCII
                  letters or digits.</td></tr><tr><td>INVALID_VERSION</td><td>The value of the <code class="sgmltag-element">version</code> attribute
                  of the object to be updated was not a valid version number.
                  A valid version number must be an integer value greater than
                  0.</td></tr><tr><td>INVALID_TOPIC_REFERENCE</td><td>A topic reference contained in the
                  <code class="sgmltag-element">frag:topic</code> or
                  <code class="sgmltag-element">frag:association</code> could not be properly
                  resolved. To properly resolve, the reference must be either
                  the object identifier of an existing topic in the topic map,
                  or it must match the value of the oid attribute for a newly
                  created topic defined in the current
                  <em class="parameter"><code>tmfragment</code></em> parameter.</td></tr><tr><td>NO_SUCH_TOPIC</td><td><p>The fragment contains a reference to a topic
                  that does not exist in the topic map or which does not exist
                  in the context specified in the
                  <em class="parameter"><code>tmfragment</code></em> parameter.</p></td></tr><tr><td>UPDATE_ERROR</td><td>The fragment was syntactically valid but one of the
                  operations described caused an error. The res:cause element
                  will contain details about the error.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1811"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1831"></a>Examples</h5></div></div></div><div class="example"><a name="d0e1834"></a><p class="title"><b>Example&nbsp;43.&nbsp;HTTP POST Body to Invoke the Save Operation</b></p><p>The following example could be used in the body of an HTTP
            POST request to the Save.aspx request page. The updated topic will
            have one name and one occurence after the operation
            completes.</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="tmfragment"&gt;
    &lt;tmf:topicmap xmlns:tmf="http://www.networkedplanet.com/2005/01/topicmap/data/"&gt;
      &lt;tmf:topiclist&gt;
        &lt;tmf:topic oid="1234"&gt;
          &lt;tmf:names&gt;
            &lt;tmf:name&gt;
              &lt;tmf:namestring&gt;Mega Corp Limited&lt;/tmf:namestring&gt;
            &lt;/tmf:name&gt;
          &lt;/tmf:names&gt;
          &lt;tmf:occurrences&gt;
            &lt;tmf:occurrence&gt;
              &lt;tmf:type psi="http://psi.example.com/organizations/stock-ticker"/&gt;
              &lt;tmf:resourcedata&gt;MGCP&lt;/tmf:resourcedata&gt;
            &lt;/tmf:occurrence&gt;
          &lt;/tmf:occurrences&gt;
        &lt;/tmf:topic&gt;
      &lt;/tmf:topiclist&gt;
    &lt;/tmf:topicmap&gt;
  &lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1841"></a><p class="title"><b>Example&nbsp;44.&nbsp;C# Code to Invoke the Save Operation using the Web Services
            Client Library</b></p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");
// NOTE: This example shows building the request using CreateElement calls.
// You could also use XmlDocument.Load() to read from an external source
// or an internal string.
string tmfNS = "http://www.networkedplanet.com/2005/01/topicmap/data/";
XmlDocument requestDoc = new XmlDocument();
XmlElement topicmap = requestDoc.CreateElement("topicmap", tmfNS);
XmlElement topiclist = requestDoc.CreateElement("topiclist", tmfNS);
XmlElement topic = requestDoc.CreateElement("topic", tmfNS);
topic.SetAttribute("oid", "1234");
XmlElement names = requestDoc.CreateElement("names", tmfNS);
XmlElement name= requestDoc.CreateElement("name", tmfNS);
XmlElement namestring = requestDoc.CreateElement("namestring", tmfNS);
namestring.InnerText="Mega Corp Limited";
name.AppendChild(namestring);
names.AppendChild(name);
topic.AppendChild(names);
topiclist.AppendChild(topic);
topicmap.AppendChild(topiclist);
requestDoc.AppendChild(topicmap);

client.Save("mytopicmap", requestDoc);</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="tmws.ProcessTransaction"></a>ProcessTransaction</h4></div></div></div><p>Processes a Topic Map Transaction to update a named topic map.
        Whereas the Save method updates a single topic or association and
        completely overwrites all existing information for that topic or
        association, this method provides the ability to update or create
        several topics or associations in a single batch and also to add or
        update parts of a topic without modifying the rest of it. For example,
        you can add a new occurrence to a topic without having to also specify
        all of the other names and occurrences that you don't want to be
        changed.</p><p>The <a href="#tmtxn-schema" title="Topic Map Transaction Schema">description of the Topic Map
        Transaction Schema</a> contained in the appendix of this document
        provides more detail about all of the different operations that can be
        specified in a single request.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1856"></a>Method Name</h5></div></div></div><p><code class="methodname">ProcessTransaction</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1862"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to update.</p></dd><dt><span class="term">tmfragment</span></dt><dd><p>A XML representation of the transaction to perform. The
                transaction must adhere to the <a href="#tmtxn-schema" title="Topic Map Transaction Schema">Topic Map Transaction XML
                Schema</a>.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1881"></a>Returns</h5></div></div></div><p>A document conforming to the Results XML Schema that lists the
          results of each individual operation in the transaction.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1886"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>UPDATE_EXCEPTION</td><td>There was an error processing the transaction
                  provided. Detailed information is provided as part of the
                  error report.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1911"></a>Examples</h5></div></div></div><p>This section only shows examples of the wrapper XML required
          to pass a transaction in to the ProcessTransaction method. For a
          detailed description of the transaction document and its processing,
          please refer to the <a href="#tmtxn-schema" title="Topic Map Transaction Schema">Topic Map
          Transaction XML Schema</a> description in the Appendix.</p><div class="example"><a name="d0e1919"></a><p class="title"><b>Example&nbsp;45.&nbsp;Invoking the ProcessTransaction Method using an HTTP
            POST</b></p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="transaction"&gt;
    &lt;txn:TopicMapTransaction xmlns:txn="http://www.networkedplanet.com/schema/transaction"&gt;
     &lt;!-- Operation descriptions go here --&gt;
    &lt;/txn:TopicMapTransaction&gt;
  &lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e1924"></a><p class="title"><b>Example&nbsp;46.&nbsp;Invoking The ProcessTransaction Method using C# and the Web
            Services Client Library</b></p><p>The method interface for the ProcessTransaction proxy simply
            takes an XmlNode as the transaction parameter value and so can be
            invoked as follows:</p><pre class="programlisting">TMSClient client = new TMSClient("http://topicmap.mycorp.com/tmws/TMService.asmx");
XmlDocument txnDoc = new XmlDocument();
// Code to populate the txnDoc goes here
client.ProcessTransaction("mytopicmap", txnDoc);</pre><p>The transaction XML can be constructed in a number of ways.
            It can be read from a local file or from an internal string using
            the XmlDocument.Load() method, or you can construct the document
            element by element using the XmlDocument.CreateElement() and other
            related methods.</p></div></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="npclws-definition"></a>NPCL Web Services Definition</h2></div></div></div><p>This section provides an overview of the NetworkedPlanet Constraint
    Language (NPCL) Web Services. These services are implemented both as SOAP
    web services and as simple HTTP GET/POST interfaces which allow
    connectivity from AJAX applications. This section starts with an overview
    of the operations that the NPCL Web Services provide, described in terms
    of their input parameters, processing and output. There then follows a
    description of how these are mapped to a SOAP web service interface and to
    an HTTP interface.</p><p>In the following service descriptions, elements with the namespace
    prefix 'npcl' come from the NPCL XML Schema and the prefix is assumed to
    be mapped to the namespace URI
    'http://www.networkedplanet.com/schema/npcl'. Elements with the prefix
    'nf' come from the NPCL Forms XML Schema and the prefix is assumed to be
    mapped to the namespace URI
    'http://www.networkedplanet.com/schema/npcl-forms'.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1941"></a>Service Operations</h3></div></div></div><p>This section describes the methods supported by the NPCL Web
      Services.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1946"></a>Get Schema</h4></div></div></div><p>Returns the full set of NPCL types and constraints contained in
        a single identified topic map.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1951"></a>Method Name</h5></div></div></div><p><code class="methodname">GetSchema</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1957"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to return the NPCL schema
                for.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1967"></a>Returns</h5></div></div></div><p>All of the NPCL types and constraints read from the named
          topic map will be returned as a document conforming to the NPCL XML
          Schema.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1972"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>INVALID_SCHEMA</td><td>There was an error processing the schema information
                  contained in the topic map. This error condition cannot be
                  fixed without first modifying the topic map to correct the
                  schema information it contains.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1997"></a>Examples</h5></div></div></div><div class="example"><a name="d0e2000"></a><p class="title"><b>Example&nbsp;47.&nbsp;Invoking the GetSchema Operation using HTTP GET</b></p><p>To get the schema for a topic map you can simply use a HTTP
            GET with a URL like the following:</p><pre class="programlisting">http://topicmaps.mycorp.com/npclws/GetSchema.aspx?topicmap=mytopicmap</pre></div><div class="example"><a name="d0e2007"></a><p class="title"><b>Example&nbsp;48.&nbsp;Invoking the GetSchema Operation using HTTP POST</b></p><p>As an alternative the the GET method, you can POST an XML
            document containing the request parameters to the GetSchema.aspx
            request page. The XML document should look like this:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e2014"></a><p class="title"><b>Example&nbsp;49.&nbsp;Invoking the GetSchema Operation over SOAP using the Web
            Client library</b></p><p>The following C# snippet shows how to get the NPCL schema
            for a topic map using the Web Client library.</p><pre class="programlisting">NpclClient client = new NpclClient("http://topicmaps.mycorp.com/npclws/NpclSchemaService.asmx");
XmlNode npclSchema = client.GetSchema("mytopicmap");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2023"></a>Get Forms Schema</h4></div></div></div><p>Returns an XML document conforming to the NPCL Forms XML Schema
        which describes the occurrence and association constraints for each
        topic type in the specified topic map.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2028"></a>Method Name</h5></div></div></div><p><code class="methodname">GetFormsSchema</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2034"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to be read.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2044"></a>Returns</h5></div></div></div><p>On success, returns an XML document conforming to the NPCL
          Forms XML Schema containing one <code class="sgmltag-element">nf:topicType</code>
          element for each topic type defined in the NPCL schema for the
          specified topic map.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2052"></a>Examples</h5></div></div></div><div class="example"><a name="d0e2055"></a><p class="title"><b>Example&nbsp;50.&nbsp;Invoking the GetFormsSchema Operation using HTTP
            GET</b></p><p>To get the schema for a topic map you can simply use a HTTP
            GET with a URL like the following:</p><pre class="programlisting">http://topicmaps.mycorp.com/npclws/GetFormsSchema.aspx?topicmap=mytopicmap</pre></div><div class="example"><a name="d0e2062"></a><p class="title"><b>Example&nbsp;51.&nbsp;Invoking the GetFormsSchema Operation using HTTP
            POST</b></p><p>As an alternative the the GET method, you can POST an XML
            document containing the request parameters to the GetSchema.aspx
            request page. The XML document should look like this:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e2069"></a><p class="title"><b>Example&nbsp;52.&nbsp;Invoking the GetFormsSchema Operation over SOAP using the
            Web Client library</b></p><p>The following C# snippet shows how to get the NPCL schema
            for a topic map using the Web Client library.</p><pre class="programlisting">NpclClient client = new NpclClient("http://topicmaps.mycorp.com/npclws/NpclSchemaService.asmx");
XmlNode npclSchema = client.GetFormsSchema("mytopicmap");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2076"></a>Get Forms Schema For Type</h4></div></div></div><p>Returns an XML document conforming to the NPCL Forms XML Schema
        which describes the occurrence and association constraints for the
        topic type in the specified topic map with the specified subject
        identifier.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2081"></a>Method Name</h5></div></div></div><p><code class="methodname">GetFormsSchemaForType</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2087"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to be searched for the topic
                type.</p></dd><dt><span class="term">type</span></dt><dd><p>The subject identifier of the topic type whose
                constraints are to be returned.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2103"></a>Returns</h5></div></div></div><p>On success, returns an NPCL Forms XML Schema containing on
          <code class="sgmltag-element">nf:topicType</code> element which describes all of the
          applicable constraints for the topic type identified by the request
          parameters.</p><div class="note"><h3 class="title">Note</h3><p>If the topic identified by the type parameter is not an NPCL
            topic type, then the NPCL Forms XML Schema document returned will
            consist of only an empty <code class="sgmltag-element">nf:schema</code>
            element.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2117"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>INVALID_SCHEMA</td><td>There was an error processing the schema information
                  contained in the topic map. This error condition cannot be
                  fixed without first modifying the topic map to correct the
                  schema information it contains.</td></tr><tr><td>NO_SUCH_TOPIC</td><td>No topic was found in the specified topic map that
                  has the requested type subject identifier.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2147"></a>Examples</h5></div></div></div><div class="example"><a name="d0e2150"></a><p class="title"><b>Example&nbsp;53.&nbsp;Invoking the GetFormsSchemaForType Operation using HTTP
            GET</b></p><p>To get the schema for a topic map you can simply use a HTTP
            GET, passing the parameters in the URL. Note that the subject
            identifier in the type parameter will require URL escaping.</p><pre class="programlisting">http://topicmaps.mycorp.com/npclws/GetFormsSchemaForType.aspx?topicmap=mytopicmap&amp;type=http%3A%2F%2Fpsi.example.com%2f...</pre></div><div class="example"><a name="d0e2157"></a><p class="title"><b>Example&nbsp;54.&nbsp;Invoking the GetFormsSchemaForType Operation using HTTP
            POST</b></p><p>As an alternative the the GET method, you can POST an XML
            document containing the request parameters to the
            GetFormsSchemaForType.aspx request page. The XML document should
            look like this:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="type"&gt;http://psi.example.com/organization/company&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e2164"></a><p class="title"><b>Example&nbsp;55.&nbsp;Invoking the GetFormsSchemaForType Operation over SOAP
            using the Web Client library</b></p><p>The following C# snippet shows how to get the NPCL schema
            for a topic map using the Web Client library.</p><pre class="programlisting">NpclClient client = new NpclClient("http://topicmaps.mycorp.com/npclws/NpclSchemaService.asmx");
XmlNode npclSchema = client.GetFormsSchemaForType("mytopicmap", "http://psi.example.com/organization/company");</pre></div></div></div></div></div><div class="appendix" lang="en"><h2 class="title" style="clear: both"><a name="schema-definitions"></a>A.&nbsp;Schema Definitions</h2><p>The following sections describe the detailed structure of the
    various XML schemas used by the web services. These schemas can also be
    found in the <code class="filename">schemas</code> directory of your TMCore
    installation.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tmf-schema"></a>Topic Map Fragment XML Schema</h3></div></div></div><p>The NetworkedPlanet Topic Map Fragment XML Schema provides a way
      for web service applications to transmit a small subset of a topic map
      as a list of topics. Compared to XTM, the Topic Map Fragment schema is
      easier to process both for reading and for updating topic data as all of
      the information relating to a single topic is contained inside one
      element instead of being spread out across multiple separate elements in
      the same document. This schema is used by several of the methods of the
      NetworkedPlanet Topic Map Web Service.</p><p>The W3C XML Schema representation for this namespace is also in
      the TMCore distribution and can also be downloaded from <a href="http://www.networkedplanet.com/2005/01/topicmap/data/TopicMapFragment.xsd" target="_top">the
      NetworkedPlanet website</a>.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2191"></a>Namespace</h4></div></div></div><p>The namespace for the Topic Map Fragment XML Schema is
        <code class="literal">http://www.networkedplanet.com/2005/01/topicmap/data/</code>. In
        the remainder of this section, this URI is assumed to be mapped to the
        namespace prefix 'tm'.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2199"></a><code class="sgmltag-element">topicmapsystem</code> Element</h4></div></div></div><p>The <code class="sgmltag-element">topicmapsystem</code> element is used to convey
        a list of topic maps that are all managed by the same TMCore instance.
        This element has the following syntax:</p><pre class="programlisting">&lt;tm:topicmapsystem&gt;
  &lt;tm:topicmap ... &gt; ... &lt;/tm:topicmap&gt;
&lt;/tm:topicmapsystem&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:topicmapsystem</span></dt><dd><p>The container for the list of topic maps managed by a
              TMCore instance.</p></dd><dt><span class="term">tm:topicmapsystem/tm:topicmap</span></dt><dd><p>Contains information about one of the topic maps managed
              by the TMCore instance. This element is OPTIONAL and
              REPEATABLE.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2224"></a><code class="sgmltag-element">topicmap</code> Element</h4></div></div></div><p>The <code class="sgmltag-element">topicmap</code> element is used to convey all or
        (more usually) a subset of the data in a single topic map. This
        element has the following syntax:</p><pre class="programlisting">&lt;tm:topicmap 
    oid="<i>OID</i>"
    topicmapname="<i>NAME</i>"&gt;
  &lt;tm:topiclist&gt;
    &lt;tm:topic ... &gt; ... &lt;/tm:topic&gt;
  &lt;/tm:topiclist&gt;
  &lt;tm:assoclist&gt;
    &lt;tm:association ... &gt; ... &lt;/tm:association&gt;
  &lt;/tm:assoclist&gt;
&lt;/tm:topicmap&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:topicmap</span></dt><dd><p>The container for information relating to a single topic
              map.</p></dd><dt><span class="term">tm:topicmap/@oid</span></dt><dd><p>TMCore's unique object identifier for the topic map. This
              OID is unique across all topic map objects (topic maps, topics,
              associations, occurrences etc) managed by the same TMCore
              instance. This attribute is OPTIONAL.</p></dd><dt><span class="term">tm:topicmap/@topicmapname</span></dt><dd><p>The name assigned to the topic map. This name is unique
              across all topic maps managed by the same TMCore instance. This
              attribute is OPTIONAL.</p></dd><dt><span class="term">tm:topicmap/tm:topiclist</span></dt><dd><p>Contains information relating to one or more topics from
              the topic map as a list of <code class="sgmltag-element">tm:topic</code> elements.
              This element is OPTIONAL and NON-REPEATABLE.</p></dd><dt><span class="term">tm:topicmap/tm:topiclist/tm:topic</span></dt><dd><p>Contains information relating to a single topic from the
              topic map. This element is REQUIRED and REPEATABLE.</p></dd><dt><span class="term">tm:topicmap/tm:assoclist</span></dt><dd><p>Contains information relating to one or more associations
              from the topic map as list of tm:association elements. This
              element is OPTIONAL and NON-REPEATABLE.</p></dd><dt><span class="term">tm:topicmap/tm:assoclist/tm:association</span></dt><dd><p>Contains information relating to a single association from
              the topic map. This element is REQUIRED and REPEATABLE.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2288"></a><code class="sgmltag-element">topic</code> Element</h4></div></div></div><p>The topic element conveys all of the information that relates to
        a single topic, including the associations that the topic participates
        in.</p><pre class="programlisting">&lt;tm:topic
    oid="<i>OID</i>"
    version="<i>VERSION</i>"
    psi="<i>VERSION</i>"
    stub="true|false"&gt;
  &lt;tm:subjectIdentifiers&gt;
    &lt;tm:locator href="<i>URI</i>"/&gt;
  &lt;/tm:subjectIdentifiers&gt;
  &lt;tm:subjectLocators&gt;
    &lt;tm:locator href="<i>URI</i>"/&gt;
  &lt;/tm:subjectLocators&gt;
  &lt;tm:sourceLocators&gt;
    &lt;tm:locator href="<i>URI</i>"/&gt;
  &lt;/tm:sourceLocators&gt;
  &lt;tm:topicTypes&gt;
    &lt;tm:topicref ... /&gt;
  &lt;/tm:topicTypes&gt;
  &lt;tm:names&gt;
    &lt;tm:name ... &gt; ... &lt;/tm:name&gt;
  &lt;/tm:names&gt;
  &lt;tm:occurrences&gt;
    &lt;tm:occurrence ... &gt; ... &lt;/tm:occurrence&gt;
  &lt;/tm:occurrences&gt;
  &lt;tm:associations&gt;
    &lt;tm:association ... &gt; ... &lt;/tm:association&gt;
  &lt;/tm:associations&gt;
&lt;/tm:topic&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:topic</span></dt><dd><p>The container for information relating to a single
              topic.</p></dd><dt><span class="term">tm:topic/@oid</span></dt><dd><p>TMCore's unique object identifier for this topic. This
              identifier is unique across all topic map objects managed by the
              same TMCore instance. This attribute is OPTIONAL.</p></dd><dt><span class="term">tm:topic/@version</span></dt><dd><p>Specifies the version number for a topic. When received
              from the web serivce, this attribute specifies the current
              version number of the topic. When passed in to a web service
              operation, this attribute specifies the version of the topic
              that the operation is to be applied to. This attribute is
              OPTIONAL.</p></dd><dt><span class="term">tm:topic/@psi</span></dt><dd><p>Identifies the a topic by its subject identifier. This
              attribute is OPTIONAL and is used on the input into web service
              operations only. The subject identifiers of a topic received
              from the web service will only be specified by the
              <code class="sgmltag-element">tm:locator</code> elements in the
              <code class="sgmltag-element">tm:subjectIdentifiers</code> child element.</p></dd><dt><span class="term">tm:topic/@stub</span></dt><dd><p>Indicates if this element contains all of the information
              about the topic. This attribute is OPTIONAL.</p><p>If this attribute is present with the value 'true', then
              the element contains only stub information about the topic. Stub
              information is limited to just the topic's identifiers (OID,
              subject identifiers, source locators and subject locators) and
              any unscoped names.</p><p>If this attribute is not present or it is present with the
              value 'false', then the topic element contains all of the
              information about the topic.</p></dd><dt><span class="term">tm:topic/tm:subjectIdentifiers</span></dt><dd><p>Contains a list of the subject identifiers for this topic.
              This element is OPTIONAL.</p></dd><dt><span class="term">tm:topic/tm:subjectIdentifiers/tm:locator/@href</span></dt><dd><p>Contains a single subject identifier URI that is assigned
              to this topic. This attribute is REQUIRED.</p></dd><dt><span class="term">tm:topic/tm:subjectLocators</span></dt><dd><p>Contains a list of the subject locators for this topic.
              This element is OPTIONAL.</p></dd><dt><span class="term">tm:topic/tm:subjectLocators/tm:locator/@href</span></dt><dd><p>Contains a single subject locator URI assigned to this
              topic. This attribute is REQUIRED.</p></dd><dt><span class="term">tm:topic/tm:sourceLocators</span></dt><dd><p>Contains a list of the source locators for this topic.
              This element is OPTIONAL.</p></dd><dt><span class="term">tm:topic/tm:sourceLocators/tm:locator/@href</span></dt><dd><p>Contains a single source locator URI assigned to this
              topic. This attribute is REQUIRED.</p></dd><dt><span class="term">tm:topic/tm:topicTypes</span></dt><dd><p>Contains a list of <code class="sgmltag-element">tm:topicref</code> elements
              that reference the topics that define the type(s) for this
              topic. This element is OPTIONAL.</p></dd><dt><span class="term">tm:topic/tm:topicTypes/tm:topicref</span></dt><dd><p>References a single topic that is a type for this topic.
              This element is REQUIRED and REPEATABLE.</p></dd><dt><span class="term">tm:topic/tm:names</span></dt><dd><p>Contains a list of <code class="sgmltag-element">tm:name</code> elements
              that define the names assigned to this topic. This element is
              OPTIONAL.</p></dd><dt><span class="term">tm:topic/tm:occurrences</span></dt><dd><p>Contains a list of <code class="sgmltag-element">tm:occurrence</code>
              elements that define the occurrences assigned to this topic.
              This element is OPTIONAL.</p></dd><dt><span class="term">tm:topic/tm:associations</span></dt><dd><p>Contains a list of <code class="sgmltag-element">tm:association</code>
              elements that define the associations in which this topic plays
              a role. This element is OPTIONAL.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2434"></a><code class="sgmltag-element">name</code> Element</h4></div></div></div><p>This element conveys all of the information relating to a single
        topic name. The element has the following syntax:</p><pre class="programlisting">&lt;tm:name oid="<i>OID</i>"&gt;
  &lt;tm:sourceLocators&gt;
    &lt;tm:locator href="<i>URI</i>"/&gt;
  &lt;/tm:sourceLocators&gt;
  &lt;tm:namestring&gt; <i>STRING</i> &lt;/tm:namestring&gt;
  &lt;tm:type ... /&gt;
  &lt;tm:variants&gt;
    &lt;tm:variant ... &gt; ... &lt;/tm:variant&gt;
  &lt;/tm:variants&gt;
  &lt;tm:scope&gt; ... &lt;/tm:scope&gt;
&lt;/tm:name&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:name/@oid</span></dt><dd><p>Contains the unique object identifier of the name. This
              attribute is OPTIONAL.</p></dd><dt><span class="term">tm:name/tm:sourceLocators</span></dt><dd><p>Contains a list of the source locators for this
              name.</p></dd><dt><span class="term">tm:name/tm:sourceLocators/tm:locator/@href</span></dt><dd><p>Contains a single source locator URI for this name.</p></dd><dt><span class="term">tm:name/tm:namestring</span></dt><dd><p>Contains the string value for this name. This element is
              REQUIRED.</p></dd><dt><span class="term">tm:name/tm:type</span></dt><dd><p>Contains type information for this name. This element is
              OPTIONAL and is currently NOT SUPPORTED by the web service
              implementation.</p></dd><dt><span class="term">tm:name/tm:variants</span></dt><dd><p>Contains a list of <code class="sgmltag-element">tm:variant</code> elements
              that define the variant names for this name. This element is
              OPTIONAL.</p></dd><dt><span class="term">tm:name/tm:scope</span></dt><dd><p>Specifies the scope for this name. This element is
              OPTIONAL.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2498"></a><code class="sgmltag-element">variant</code> Element</h4></div></div></div><p>This element conveys all of the information relating to a single
        topic variant name. The element has the following syntax:</p><pre class="programlisting">&lt;tm:variant oid="<i>OID</i>"&gt;
  &lt;tm:sourceLocators&gt;
    &lt;tm:locator href="<i>URI</i>"/&gt;
  &lt;/tm:sourceLocators&gt;
  &lt;tm:namestring&gt; <i>STRING</i> &lt;/tm:namestring&gt;
  &lt;tm:resource href="<i>URI</i>"/&gt;
  &lt;tm:scope&gt; ... &lt;/tm:scope&gt;
&lt;/tm:variant&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:variant/@oid</span></dt><dd><p>Contains the unique object identifier of the variant name.
              This attribute is OPTIONAL. It may be omitted when creating a
              new variant name on a topic.</p></dd><dt><span class="term">tm:variant/tm:sourceLocators</span></dt><dd><p>Contains a list of the source locators for this variant
              name.</p></dd><dt><span class="term">tm:variant/tm:sourceLocators/tm:locator/@href</span></dt><dd><p>Contains a single source locator URI for this variant
              name.</p></dd><dt><span class="term">tm:variant/tm:namestring</span></dt><dd><p>Contains the string value for this variant name. This
              element is OPTIONAL.</p></dd><dt><span class="term">tm:variant/tm:resource</span></dt><dd><p>Specifies the resource locator for this variant name. This
              element is OPTIONAL.</p></dd><dt><span class="term">tm:variant/tm:resource/@href</span></dt><dd><p>Contains the resource locator URI for this variant name.
              This attribute is REQUIRED.</p></dd><dt><span class="term">tm:variant/tm:scope</span></dt><dd><p>Specifies the scope for this variant name. This element is
              OPTIONAL.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2562"></a><code class="sgmltag-element">occurrence</code> Element</h4></div></div></div><p>This element contains all of the information relating to a
        single occurrence. The element has the following syntax:</p><pre class="programlisting">&lt;tm:occurrence oid="<i>OID</i>"&gt;
  &lt;tm:sourceLocators&gt;
    &lt;tm:locator href="<i>URI</i>"/&gt;
  &lt;/tm:sourceLocators&gt;
  &lt;tm:type displayname="<i>NAME</i>" tref="<i>OID</i>" psi="<i>PSI</i>" /&gt;
  &lt;tm:resourcedata&gt; <i>STRING</i> &lt;/tm:resourcedata&gt;
  &lt;tm:resource href="<i>URI</i>"/&gt;
  &lt;tm:scope&gt; ... &lt;/tm:scope&gt;
&lt;/tm:occurrence&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:occurrence/@oid</span></dt><dd><p>Contains the unique object identifier of the occurrence.
              This attribute is OPTIONAL. It may be omitted when creating a
              new occurrence on a topic.</p></dd><dt><span class="term">tm:occurrence/tm:sourceLocators</span></dt><dd><p>Contains a list of the source locators for this
              occurrence. This element is OPTIONAL.</p></dd><dt><span class="term">tm:occurrence/tm:sourceLocators/tm:locator/@href</span></dt><dd><p>Contains a single source locator URI for this occurrence.
              This attribute is REQUIRED.</p></dd><dt><span class="term">tm:occurrence/tm:type/@displayname</span></dt><dd><p>Contains a display label for the topic which defines the
              type of this occurrence. This attribute is OPTIONAL.</p></dd><dt><span class="term">tm:occurrence/tm:type/@tref</span></dt><dd><p>Contains the unique object identifier of the topic which
              defines the type of this occurrence. This attribute is
              REQUIRED.</p></dd><dt><span class="term">tm:occurrence/tm:type/@psi</span></dt><dd><p>References the topic which defines the type of this
              occurrence by a subject identifier of that topic. This attribute
              is OPTIONAL.</p></dd><dt><span class="term">tm:occurrence/tm:resourcedata</span></dt><dd><p>Contains the resource data value for the occurrence. This
              element is OPTIONAL.</p></dd><dt><span class="term">tm:occurrence/tm:resource</span></dt><dd><p>Specifies the resource locator for the occurrence. This
              element is OPTIONAL.</p></dd><dt><span class="term">tm:occurrence/tm:resource/@href</span></dt><dd><p>Contains the resource locator URI for this occurrence.
              This attribute is REQUIRED.</p></dd><dt><span class="term">tm:occurrence/tm:scope</span></dt><dd><p>Specifies the scope for this occurrence. This element is
              OPTIONAL.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2653"></a><code class="sgmltag-element">association</code> Element</h4></div></div></div><p>This element contains all of the information about a single
        association. The element has the following syntax:</p><pre class="programlisting">&lt;tm:association oid="<i>OID</i>" version="VERSION"&gt;
  &lt;tm:sourceLocators&gt;
    &lt;tm:locator href="<i>URI</i>"/&gt;
  &lt;/tm:sourceLocators&gt;
  &lt;tm:type displayname="<i>NAME</i>" tref="<i>OID</i>" psi="<i>PSI</i>"/&gt;
  &lt;tm:playsrole displayname="<i>NAME</i>" tref="<i>OID</i>" psi="<i>PSI</i>"&gt;
  &lt;tm:label&gt; <i>STRING</i> &lt;/tm:label&gt;
  &lt;tm:role&gt;
    &lt;tm:sourceLocators&gt;
      &lt;tm:locator href="<i>URI</i>"/&gt;
    &lt;/tm:sourceLocators&gt;
    &lt;tm:type displayname="<i>NAME</i>" tref="<i>OID</i>"  psi="<i>PSI</i>"/&gt;
    &lt;tm:player displayname="<i>NAME</i>" tref="<i>OID</i>"  psi="<i>PSI</i>"/&gt;
  &lt;/tm:role&gt;
  &lt;tm:scope&gt; ... &lt;/tm:scope&gt;
&lt;/tm:association&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:association/@oid</span></dt><dd><p>Contains the unique object identifier of the association.
              This attribute is OPTIONAL - it may be omitted when specifying a
              new association to add to the topic map.</p></dd><dt><span class="term">tm:association/@version</span></dt><dd><p>Specifies the version number of the association. This
              attribute is OPTIONAL. This attribute will always be present on
              <code class="sgmltag-element">tm:association</code> elements received from web
              service operations and will show the latest version number of
              the association. If present on <code class="sgmltag-element">tm:association</code>
              elements passed in to web service operations, this attribute
              identifies the version of the association to be
              used/updated.</p></dd><dt><span class="term">tm:association/tm:sourceLocators</span></dt><dd><p>Contains a list of the source locators for this
              association. This element is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:sourceLocators/tm:locator/@href</span></dt><dd><p>Contain a single source locator URI for this association.
              This attribute is REQUIRED.</p></dd><dt><span class="term">tm:association/tm:type</span></dt><dd><p>References the topic that defines the type of this
              association. This element is OPTIONAL. If not present, the
              association is untyped.</p></dd><dt><span class="term">tm:association/tm:type/@displayname</span></dt><dd><p>Contains a display label for the topic that defines the
              type of this association. This attribute is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:type/@tref</span></dt><dd><p>Contains the object identifier of the topic that defines
              the type of this association. This attribute is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:type/@psi</span></dt><dd><p>References the topic that defines the type of this
              association by a subject identifier for that topic. This
              attribute is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:playsrole</span></dt><dd><p>References the topic that defines the type of the role
              played by the topic described by the ancestor
              <code class="sgmltag-element">tm:topic</code> element of this element. This
              element is OPTIONAL and MUST be omitted when this element is not
              a descendant of a <code class="sgmltag-element">tm:topic</code> element.</p></dd><dt><span class="term">tm:association/tm:playsrole/@displayname</span></dt><dd><p>Contains the display label for the topic that defines the
              role type played by the topic described by the ancestor tm:topic
              element.</p></dd><dt><span class="term">tm:association/tm:playsrole/@tref</span></dt><dd><p>Contains the object identifier of the topic that defines
              the role type played by the topic described by the ancestor
              <code class="sgmltag-element">tm:topic</code> element.</p></dd><dt><span class="term">tm:association/tm:playsrole/@psi</span></dt><dd><p>References the topic that defines the role type played by
              the topic described by the ancestor <code class="sgmltag-element">tm:topic</code>
              element. This attribute contains a subject identifier for the
              referenced topic. This attribute is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:label</span></dt><dd><p>Contains the "arc label" for the association. The arc
              label is a name assigned to the association type that is scoped
              by the topic that types the role identified by the
              <code class="sgmltag-element">tm:playsrole</code> element. This element is
              OPTIONAL and MUST be omitted when this element is not a
              descendant of a <code class="sgmltag-element">tm:topic</code> element.</p></dd><dt><span class="term">tm:association/tm:role</span></dt><dd><p>Contains information about a single role in the
              association. This element is OPTIONAL and REPEATABLE. If the
              tm:association element is contained in a tm:topic element, then
              there will be one tm:role element for each topic that
              participates in the association other than the topic described
              by the ancestor tm:topic element (whose role is instead
              described by the tm:playsrole element). If the tm:association
              element is not contained inside a tm:topic element, there will
              be one tm:role element for each topic that participates in the
              association.</p></dd><dt><span class="term">tm:association/tm:role/tm:sourceLocators</span></dt><dd><p>Contains a list of the source locators for this role. This
              element is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:role/tm:sourceLocators/tm:locator/@href</span></dt><dd><p>Contains a single source locator URI for this role. This
              attribute is REQUIRED.</p></dd><dt><span class="term">tm:association/tm:role/tm:type</span></dt><dd><p>Contains a reference to the topic that defines the type of
              this role. This element is OPTIONAL. If omitted, then the role
              is untyped.</p></dd><dt><span class="term">tm:association/tm:role/tm:type/@displayname</span></dt><dd><p>Contains a display label for the topic that defines the
              type of this role. This attribute is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:role/tm:type/@tref</span></dt><dd><p>Contains the unique object identifier of the topic that
              defines the type of this role. This attribute is
              OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:role/tm:type/@psi</span></dt><dd><p>References the topic that defines the type of this role by
              a subject identifier. This attribute is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:role/tm:player</span></dt><dd><p>Contains a reference to the topic that participates in the
              association via this role. This element is OPTIONAL. If omitted,
              then the role is present in the association but is currently not
              fulfilled by any role-playing topic.</p></dd><dt><span class="term">tm:association/tm:role/tm:player/@displayname</span></dt><dd><p>Contains a display label for the topic that participates
              in the association via this role. This attribute is
              OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:role/tm:player/@tref</span></dt><dd><p>Contains the unique object identifier of the topic that
              participates in the association via this role. This attribute is
              OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:role/tm:player/@psi</span></dt><dd><p>References the topic that participates in the association
              via this role by a subject identifier of that topic. This
              attribute is OPTIONAL.</p></dd><dt><span class="term">tm:association/tm:scope</span></dt><dd><p>Specifies the scope of this association. This element is
              OPTIONAL.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2885"></a><code class="sgmltag-element">scope</code> Element</h4></div></div></div><p>This element defines the scope of an occurrence, name, variant
        name or association. The element has the following syntax:</p><pre class="programlisting">&lt;tm:scope&gt;
  &lt;tm:topicref ... /&gt;
&lt;/tm:scope&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:scope/tm:topicref</span></dt><dd><p>References a single topic in the scope (also called a
              'scoping topic'). This element is REQUIRED and
              REPEATABLE.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2901"></a><code class="sgmltag-element">topicref</code> Element</h4></div></div></div><p>This element is used wherever a refernce to a topic is required.
        It provides two different methods of identifying a topic when passed
        in to a web service operation and additionally provides a displayable
        label for a topic when received from a web service operation.</p><p>This element has the following structure:</p><pre class="programlisting">&lt;tm:topicref 
    tref="<i>OID</i>" 
    psi="<i>PSI</i>"
    displayname="<i>NAME</i>" /&gt;</pre><div class="variablelist"><dl><dt><span class="term">tm:topicref/@tref</span></dt><dd><p>Identifies the referenced topic by its database object
              identifier. The schema declares this attribute as OPTIONAL. The
              attribute will always be present on
              <code class="sgmltag-element">tm:topicref</code> elements received from web
              service operations, but is optional on
              <code class="sgmltag-element">tm:topicref</code> elements passed in to web service
              operations (as long as the <code class="sgmltag-element">psi</code> attribute is
              used to identify the topic by a subject identifier
              instead).</p></dd><dt><span class="term">tm:topicref/@psi</span></dt><dd><p>Identifies the referenced topic by a subject identifier
              for that topic. The schema declares this attribute as OPTIONAL.
              The attribute will never be present on
              <code class="sgmltag-element">tm:topicref</code> elements received from web
              service operations, but may optionally be present on
              <code class="sgmltag-element">tm:topicref</code> elements passed in to web service
              operations.</p></dd><dt><span class="term">tm:topicref/@displayname</span></dt><dd><p>Provides a displayable label for the referenced topic. The
              schema declares this attribute as OPTIONAL. However, this
              attribute is only used on <code class="sgmltag-element">tm:topicref</code>
              elements received from web service operations. This attribute
              allows a client application to display a link to the topic
              without the need to retrieve the topic to get a display name for
              it.</p></dd></dl></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="hierarchy-schema"></a>Hierarchy XML Schema</h3></div></div></div><p>The Hierarchy XML Schema is used to convey one or more
      hierarchical orderings of topics.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2964"></a>Namespace</h4></div></div></div><p>The namespace for the Hierarchy XML Schema is
        <code class="literal">http://www.networkedplanet.com/2005/01/topicmap/patterns/hierarchy/</code>.
        The rest of this document assumes that the namespace is mapped to the
        prefix <code class="constant">tmh</code>, declared as shown here:</p><pre class="programlisting">&lt;hierarchy xmlns:tmh="http://www.networkedplanet.com/2005/01/topicmap/patterns/hierarchy"/&gt;</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2977"></a><code class="sgmltag-element">treelist</code> Element</h4></div></div></div><p>This element is used to contain a list of the trees in a single
        topic map. The element has the following syntax:</p><pre class="programlisting">&lt;tmh:treelist&gt;
  &lt;tmh:tree topicid="OID" displayname="NAME"&gt;
    &lt;tmh:root tref="OID" displayname="NAME" /&gt;
  &lt;/tmh:tree&gt;
&lt;/tmh:treelist&gt;</pre><div class="variablelist"><dl><dt><span class="term"><code class="constant">tmh:treelist/tmh:tree</code></span></dt><dd><p>Contains the definition of a single hierarchy. This
              element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term"><code class="constant">tmh:treelist/tmh:tree/@topicid</code></span></dt><dd><p>Contains the unique object identifier of the topic that
              defines the hierarchy. This attribute is REQUIRED.</p></dd><dt><span class="term"><code class="constant">tmh:treelist/tmh:tree/@displayname</code></span></dt><dd><p>Contains a display label for the topic that defines the
              hierarchy. This attribute is OPTIONAL.</p></dd><dt><span class="term"><code class="constant">tmh:treelist/tmh:tree/tmh:root</code></span></dt><dd><p>A reference to the topic that is at the root of the
              hierarchy. This element is REQUIRED.</p></dd><dt><span class="term"><code class="constant">tmh:treelist/tmh:tree/tmh:root/@tref</code></span></dt><dd><p>Contains the unique object identifier of the topic that is
              at the root of the hierarchy. This attribute is REQUIRED.</p></dd><dt><span class="term"><code class="constant">tmh:treelist/tmh:tree/tmh:root/@displayname</code></span></dt><dd><p>Contains a display label for the topic that is at the root
              of the hierarchy. This attribute is OPTIONAL.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3029"></a><code class="sgmltag-element">nodelist</code> Element</h4></div></div></div><p>This element contains the description of a single hierarchical
        ordering of topics. The hierarchy is represented as a nested set of
        lists of nodes, each node consists of a reference to the topic that is
        at that position in the hierarchy followed by a list of the child
        nodes. The element has the following syntax:</p><pre class="programlisting">&lt;tmh:nodelist&gt;
  &lt;tmh:node&gt;
    &lt;tmh:topic tref="OID" displayname="NAME" /&gt;
    &lt;tmh:children&gt;
      &lt;tmh:node&gt; ... &lt;/tmh:node&gt;
    &lt;/tmh:children&gt;
  &lt;/tmh:node&gt;
&lt;/tmh:tree&gt;</pre><div class="variablelist"><dl><dt><span class="term"><code class="constant">tmh:nodelist/tmh:node</code></span></dt><dd><p>Contains the specification of a single node in the
              hierarchy. This element is REQUIRED and REPEATABLE.</p></dd><dt><span class="term"><code class="constant">tmh:nodelist/tmh:node/tmh:topic</code></span></dt><dd><p>A reference to the topic that occupies this node in the
              hierarchy. This element is REQUIRED.</p></dd><dt><span class="term"><code class="constant">tmh:nodelist/tmh:node/tmh:topic/@tref</code></span></dt><dd><p>The unique object identifier of the topic that occupies
              this node in the hierarchy. This attribute is REQUIRED.</p></dd><dt><span class="term"><code class="constant">tmh:nodelist/tmh:node/tmh:topic/@displayname</code></span></dt><dd><p>A display label for the topic that occupies this node in
              the hierarchy. This attribute is OPTIONAL.</p></dd><dt><span class="term"><code class="constant">tmh:nodelist/tmh:node/tmh:children</code></span></dt><dd><p>A list of the child nodes of this node in the hierarchy.
              This element is OPTIONAL.</p></dd><dt><span class="term"><code class="constant">tmh:nodelist/tmh:node/tmh:children/tmh:node</code></span></dt><dd><p>Contains the specification of a single node in the
              hierarchy. This element is REQUIRED and REPEATABLE and has the
              same structure as the <code class="sgmltag-element">tmh:nodelist/tmh:node</code>
              element.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3084"></a>Examples</h4></div></div></div><div class="example"><a name="d0e3087"></a><p class="title"><b>Example&nbsp;A.1.&nbsp;A List of Trees using tmh:treelist</b></p><p>The following example shows the use of
          <code class="sgmltag-element">tmh:treelist</code> to list the trees in a topic map (in
          this case, two trees). This is the format of the returned document
          from the <code class="methodname">GetHierarchyRoots</code> method of the
          Topic Map Web Service.</p><pre class="programlisting">&lt;tmh:treelist&gt;
  &lt;tmh:tree topicid="302728" displayname="Tree 1"&gt;
    &lt;tmh:root displayname="My Root Node" tref="302740"/&gt;
  &lt;/tmh:tree&gt;
  &lt;tmh:tree topicid="316060" displayname="Tree 2"&gt;
    &lt;tmh:root displayname="Root" tref="316071" /&gt;
  &lt;/tmh:tree&gt;
&lt;/tmh:treelist&gt;</pre></div><div class="example"><a name="d0e3100"></a><p class="title"><b>Example&nbsp;A.2.&nbsp;A Simple Tree Using <code class="sgmltag-element">tmh:nodelist</code></b></p><p>The following example shows the use of
          <code class="constant">tmh:nodelist</code> to describe a tree. This is the
          format of the returned document from the
          <code class="sgmltag-element">GetHierarchy</code> method of the Topic Map Web
          Service.</p><pre class="programlisting">&lt;tmh:nodelist&gt;
  &lt;tmh:node&gt;
    &lt;tmh:topic displayname="Root" tref="316071"/&gt;
    &lt;tmh:children&gt;
      &lt;tmh:node&gt;
        &lt;tmh:topic displayname="Child1" tref="316075"/&gt;
        &lt;tmh:children&gt;
          &lt;tmh:node&gt;
            &lt;tmh:topic displayname="Child1.Child1" tref="316077"/&gt;
            &lt;tmh:children/&gt;
          &lt;/tmh:node&gt;
          &lt;tmh:node&gt;
            &lt;tmh:topic displayname="Child1.Child2" tref="316079"/&gt;
            &lt;tmh:children/&gt;
          &lt;/tmh:node&gt;
        &lt;/tmh:children&gt;
      &lt;/tmh:node&gt;
      &lt;tmh:node&gt;
        &lt;tmh:topic displayname="Child2" tref="316081"/&gt;
        &lt;tmh:children/&gt;
      &lt;/tmh:node&gt;
    &lt;/tmh:children&gt;
  &lt;/tmh:node&gt;
&lt;/tmh:nodelist&gt;</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tmtxn-schema"></a>Topic Map Transaction Schema</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3119"></a>Overview</h4></div></div></div><p>This document presents the XML schema used to describe
        transactional updates to a topic map in the ProcessTransaction method
        of the Topic Map Web Service. The update structure is designed to
        allow a collection of low level topic map operations to be grouped
        together and executed as a single atomic operation.</p><p>The advantage of this over the Save method of the Topic Map Web
        Service is that this transactional update method allows partial
        information to be added to a topic and so it does not require the
        whole of the topic to be available on the client, changed and then
        posted back. The Process Transaction method has the notion of, "Here
        are a set of changes to make to the topic map". The Save has the
        notion that says: "This is the defitive version of the topic - replace
        whatever is there". Both approaches are useful in different
        situations.</p><p>The W3C XML Schema representation for this namespace is also in
        the TMCore distribution and can also be downloaded from <a href="http://www.networkedplanet.com/schemas/transaction/transaction.xsd" target="_top">the
        NetworkedPlanet website</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3131"></a>Namespaces</h4></div></div></div><p>The namespace used for Topic Map Transaction schema is
        http://www.networkedplanet.com/schema/transaction. In the examples in
        the rest of this section, this namespace is assumed to be mapped to
        the namespace prefix "txn".</p><p>The Topic Map Transaction Schema allows elements from the Topic
        Map Fragment Schema to be included as part of the description of
        actions to take place inside a transaction. The schema is described in
        detail in <a href="#tmf-schema" title="Topic Map Fragment XML Schema">the section called &#8220;Topic Map Fragment XML Schema&#8221;</a>. The namespace for this schema
        is http://www.networkedplanet.com/2005/01/topicmap/data/. In the
        examples in the rest of this section, this namespace is assumed to be
        mapped to the namespace prefix "tmd".</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3140"></a>PSI Topic References</h4></div></div></div><p>In all of the following operations, the elements
        <code class="sgmltag-element">tmd:topicref</code>, <code class="sgmltag-element">tmd:type</code>,
        <code class="sgmltag-element">tmd:roletype</code> and <code class="sgmltag-element">tmd:player</code>
        allow a reference to a topic by either is unique object identifier
        (using the <code class="sgmltag-element">oid</code> attribute) or using a subject
        identifier reference (using the <code class="sgmltag-element">psi</code> attribute).
        When the <code class="sgmltag-element">psi</code> attribute is used, if no topic is
        found that matches the specified subject identifer, a new, untyped
        topic will be created and assigned that value as a subject identifier.
        When the <code class="sgmltag-element">oid</code> attribute is used, if no topic is
        found in the topic map with the specified object identifier, an error
        is raised.</p><div class="warning"><h3 class="title">Warning</h3><p>Developers should be aware of the implicit topic creation by
          using the <code class="sgmltag-element">psi</code> attribute as described above. This
          is a powerful tool for quick update of a topic map, but can create a
          lot of unwanted topics if not used carefully.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3175"></a><code class="sgmltag-element">TopicMapTransaction</code> Element</h4></div></div></div><p>The <code class="sgmltag-element">TopicMapTransaction</code> element is the root
        element for a transaction document. Each transaction consists of an
        ordered list of <span class="emphasis"><em>actions</em></span>. Actions and transactions
        are executed in the order that they are specified in the XML document,
        but the results of these actions are not committed to the database
        until all actions are successfully completed. If one action within a
        TopicMapTransaction element is not processed successfully, all
        modifications to the topic map made by preceding actions are revoked
        and the processing will stop and an error returned in the results
        document.</p><p>The <code class="sgmltag-element">TopicMapTransaction</code> element has the
        following syntax:</p><pre class="programlisting">
&lt;txn:TopicMapTransaction&gt;
  &lt;txn:CreateTopic ... &gt; ... &lt;/txn:CreateTopic&gt;
  &lt;txn:UpdateTopic ... &gt; ... &lt;/txn:UpdateTopic&gt;
  &lt;txn:DeleteTopic ... &gt; ... &lt;/txn:DeleteTopic&gt;
  &lt;txn:CreateTopicProperty ... &gt; ... &lt;/txn:CreateTopicProperty&gt;
  &lt;txn:DeleteTopicProperty ... &gt; ... &lt;/txn:DeleteTopicProperty&gt;
  &lt;txn:CreateAssociation ... &gt; ... &lt;/txn:CreateAssociation&gt;
  &lt;txn:DeleteAssociation ... &gt; .... &lt;/txn:DeleteAssociation&gt;
  &lt;txn:TopicMapTransaction ... &gt; ... &lt;/txn:TopicMapTransaction&gt;
&lt;/txn:transaction&gt;</pre><div class="variablelist"><dl><dt><span class="term">txn:TopicMapTransaction</span></dt><dd><p>This element describes a single transaction. The elements
              shown as children of this element may occur any number of times
              and in any order. Nested transactions are supported and are
              represented using nested
              <code class="sgmltag-element">txn:TopicMapTransaction</code> elements.</p></dd></dl></div><p>The other child elements allowed inside the
        <code class="sgmltag-element">txn:TopicMapTransaction</code> element are described
        below.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3210"></a><code class="sgmltag-element">CreateTopic</code> Element</h4></div></div></div><p>The <code class="sgmltag-element">CreateTopic</code> element specifies that a new
        topic should be created in the topic map. The CreateTopic element has
        the following structure:</p><pre class="programlisting">&lt;txn:CreateTopic id="..."&gt;
  &lt;tmd:topic oid="..."&gt; 
  ... 
  &lt;/tmd:topic&gt;
&lt;/txn:CreateTopic&gt;
      </pre><div class="variablelist"><dl><dt><span class="term">txn:CreateTopic</span></dt><dd><p>The wrapper element for the CreateTopic action.</p></dd><dt><span class="term">txn:CreateTopic/@id</span></dt><dd><p>The identifier for this operation. This identifier is used
              to correlate any error messages to the operation that caused the
              error.</p></dd><dt><span class="term">txn:CreateTopic/tmd:topic</span></dt><dd><p>This REQUIRED element from the Topic Map Fragment XML
              Schema provides the details of the topic to be created. If the
              <code class="sgmltag-element">oid</code> attribute is provided, it may be used to
              reference the newly created topic in later operations (for
              example to create associations to the new topic, or to create
              further topics that are typed by the new topic).</p><div class="note"><h3 class="title">Note</h3><p>This operation can only be used to create a topic, its
                names and occurrences. The optional
                <code class="sgmltag-element">tmd:associations</code> element allowed inside the
                <code class="sgmltag-element">tmd:topic</code> element will be ignored. To
                create associations that involve the new topic, it is
                necessary to use a separate
                <code class="sgmltag-element">txn:CreateAssociation</code> action.
                <code class="sgmltag-element">txn:CreateAssociation</code> actions may be
                included in the same transaction as the one that creates the
                topic(s) to participate in the association.</p></div></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3259"></a><code class="sgmltag-element">UpdateTopic</code> Element</h4></div></div></div><p>This operations specifies a new set of names, occurrences and
        identifiers to be assigned to an existing topic in the topic map. The
        new data completely replaces all existing names, occurrences and
        identifiers, but the roles played by the topic in associations are not
        modified by this action. The <code class="sgmltag-element">txn:UpdateTopic</code>
        element has the following structure:</p><div class="note"><h3 class="title">Note</h3><p>It is important to note that this action completely overwrites
          any existing identiiers, names or occurrences on the target topic.
          If you just wish to add new identifiers, names or occurrences use
          the CreateTopicProperty method. If you wish to remove some
          identifiers, names or occurrences but leave others intact, use
          DeleteTopicProperty. A combination of DeleteTopicProperty and
          CreateTopicProperty can be used to modify a specific item (by
          deleting it and creating it with a new value in a single
          TopicMapTransaction).</p></div><pre class="programlisting">&lt;txn:UpdateTopic id="..." create="<i>true|false</i>"&gt;
  &lt;tmd:topic oid="..." subjectIdentifier="..." subjectLocator="..." sourceLocator="..."&gt;
    ...
  &lt;/tmd:topic&gt;
&lt;/txn:UpdateTopic&gt;
    </pre><div class="variablelist"><dl><dt><span class="term">txn:UpdateTopic</span></dt><dd><p>The wrapper element for the UpdateTopic action.</p></dd><dt><span class="term">txn:UpdateTopic/@id</span></dt><dd><p>The identifier for this operation. This identifier is used
              to correlate any error messages to the operation that caused the
              error.</p></dd><dt><span class="term">txn:UpdateTopic/@create</span></dt><dd><p>A boolean flag indicating if the topic should be created
              if it does not already exist.</p></dd><dt><span class="term">txn:UpdateTopic/tmd:topic</span></dt><dd><p>This REQUIRED element from the Topic Map Fragment XML
              Schema provides the new details to be applied to the topic. The
              topic that the update is applied to is identified by one of the
              two optional attributes on this element.</p></dd><dt><span class="term">txn:UpdateTopic/tmd:topic/@oid</span></dt><dd><p>This OPTIONAL attribute directly identifies the topic to
              be updated. The value of this attribute may be either an integer
              database object identifier, or the string identifier of a topic
              created in this a previous action contained in the current
              request document. If the topic cannot be found in the database
              and the <code class="sgmltag-element">create</code> attribute of the
              <code class="sgmltag-element">UpdateTopic</code> element is set to true, then a
              new topic will be created and will be accessible in the current
              transaction either using its actual object identifier, or using
              the oid value specified by this attribute.</p><div class="note"><h3 class="title">Note</h3><p>The system will always attempt to process an integer oid
                attribute value as a database object identifier, so it is
                important when creating new topics using this interface that
                you only assign non-integer values to the
                <code class="sgmltag-element">oid</code> attribute of topics and associations
                created using the CreateTopic or CreateAssociation
                actions.</p></div></dd><dt><span class="term">txn:UpdateTopic/tmd:topic/@subjectIdentifier</span></dt><dd><p>This optional attribute identifies the topic to be updated
              by its subject identifier. This attribute will be processed ONLY
              IF the <code class="sgmltag-element">oid</code> attribute is not present. If the
              topic cannot be found in the database and the
              <code class="sgmltag-element">create</code> attribute of the
              <code class="sgmltag-element">UpdateTopic</code> element is set to true, then a
              new topic will be created in the topic map.</p></dd><dt><span class="term">txn:UpdateTopic/tmd:topic/@subjectLocator</span></dt><dd><p>This optional attribute identifies the topic to be updated
              by its subject locator. This attribute will be processed ONLY IF
              the <code class="sgmltag-element">oid</code> and
              <code class="sgmltag-element">subjectIdentifier</code> attributes are not present.
              If the topic cannot be found in the database and the
              <code class="sgmltag-element">create</code> attribute of the
              <code class="sgmltag-element">UpdateTopic</code> element is set to true, then a
              new topic will be created in the topic map.</p></dd><dt><span class="term">txn:UpdateTopic/tmd:topic/@sourceLocator</span></dt><dd><p>This optional attribute identifies the topic to be updated
              by its source locator. This attribute will be processed ONLY IF
              the <code class="sgmltag-element">oid</code>, subjectIdentifier and
              <code class="sgmltag-element">sourceLocator</code> attributes are not present. If
              the topic cannot be found in the database and the
              <code class="sgmltag-element">create</code> attribute of the
              <code class="sgmltag-element">UpdateTopic</code> element is set to true, then a
              new topic will be created in the topic map.</p></dd><dt><span class="term">txn:UpdateTopic/tmd:topic/@version</span></dt><dd><p>This OPTIONAL attribute identifies the version of the
              topic to be updated. The topic will only be updated if its
              current version number matches the value of this attribute. If
              the topic's current version number does not match the value
              specified here, then an error will be returned.</p><p>If this attribute is ommitted, the update will be applied
              to the latest version of the topic.</p></dd></dl></div><div class="note"><h3 class="title">Note</h3><p>Although the Topic Map Fragment XML Schema allows the
          <code class="sgmltag-element">oid</code>, <code class="sgmltag-element">subjectIdentifier</code>,
          <code class="sgmltag-element">subjectLocator</code> and
          <code class="sgmltag-element">sourceLocator</code> attributes to be ommitted, this
          action requires that at least one of these attributes has a
          value.</p></div><div class="note"><h3 class="title">Note</h3><p>This action will update the names, occurrences and identifiers
          of the topic only. The contents of a
          <code class="sgmltag-element">tmd:associations</code> element inside the
          <code class="sgmltag-element">tmd:topic</code> element will be ignored by this
          operation.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3403"></a><code class="sgmltag-element">DeleteTopic</code> Element</h4></div></div></div><p>This action element specifies that a single topic should be
        deleted. The topic to be deleted may be identified either by its
        database object identifier or by a subject identifier assigned to the
        topic. The <code class="sgmltag-element">DeleteTopic</code> element has the following
        structure:</p><pre class="programlisting">&lt;txn:DeleteTopic id="..."&gt;
  &lt;tmd:topic oid="..." subjectIdentifier="..." subjectLocator="..." sourceLocator="..." version="..."&gt;
    ...
  &lt;/tmd:topic&gt;
&lt;/txn:DeleteTopic&gt;    </pre><div class="variablelist"><dl><dt><span class="term">txn:DeleteTopic</span></dt><dd><p>The wrapper element for the DeleteTopic action.</p></dd><dt><span class="term">txn:DeleteTopic/@id</span></dt><dd><p>The identifier for this operation. This identifier is used
              to correlate any error messages to the operation that caused the
              error.</p></dd><dt><span class="term">txn:DeleteTopic/tmd:topic</span></dt><dd><p>This REQUIRED element from the Topic Map Fragment XML
              Schema identifies the topic to be deleted. Only the oid and psi
              attributes of this element are processed - all other attributes
              and content are ignored.</p></dd><dt><span class="term">txn:DeleteTopic/tmd:topic/@oid</span></dt><dd><p>OPTIONAL attribute. Identiifes the topic to be deleted by
              its database object identifier.</p></dd><dt><span class="term">txn:DeleteTopic/tmd:topic/@subjectIdentifier</span></dt><dd><p>OPTIONAL attribute. Identifies the topic to be deleted by
              its subject identifier. This attribute will be used only if no
              value is provided for the <code class="sgmltag-element">oid</code>
              attribute.</p></dd><dt><span class="term">txn:DeleteTopic/tmd:topic/@subjectLocator</span></dt><dd><p>OPTIONAL attribute. Identifies the topic to be deleted by
              its subject locator. This attribute will be used only if no
              value is provided for the <code class="sgmltag-element">oid</code> and
              <code class="sgmltag-element">subjectIdentifier</code> attributes.</p></dd><dt><span class="term">txn:DeleteTopic/tmd:topic/@sourceLocator</span></dt><dd><p>OPTIONAL attribute. Identifies the topic to be deleted by
              its source locator. This attribute will be used only if no value
              is provided for the <code class="sgmltag-element">oid</code>
              <code class="sgmltag-element">subjectIdentifier</code>, and
              <code class="sgmltag-element">subjectLocator</code> attributes.</p></dd><dt><span class="term">txn:DeleteTopic/tmd:topic/@version</span></dt><dd><p>This OPTIONAL attribute identifies the version of the
              topic to be deleted. The topic will only be deleted if its
              current version number matches the value of this attribute. If
              the topic's current version number does not match the value
              specified here, then an error will be returned.</p><p>If this attribute is ommitted, the topic will be deleted
              regardless of the current version number.</p></dd></dl></div><div class="note"><h3 class="title">Note</h3><p>Although the Topic Map Fragment XML Schema allows the
          <code class="sgmltag-element">oid</code>, <code class="sgmltag-element">subjectIdentifier</code>,
          <code class="sgmltag-element">subjectLocator</code> and
          <code class="sgmltag-element">sourceLocator</code> attributes to be ommitted, this
          action requires that at least one of these attributes has a
          value.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3499"></a><code class="sgmltag-element">CreateTopicProperty</code></h4></div></div></div><p>This action adds names, occurrences and identifiers to a topic
        already in the database (or a topic created in a preceding action in
        the same request). The element has the following structure:</p><pre class="programlisting">&lt;txn:CreateTopicProperty id="..."&gt;
  &lt;tmd:topic oid="..." subjectIdentifier="..." subjectLocator="..." sourceLocator="..." version="..."&gt;
    ...
  &lt;/tmd:topic&gt;
&lt;/txn:CreateTopicProperty&gt;    </pre><div class="variablelist"><dl><dt><span class="term">txn:CreateTopicProperty</span></dt><dd><p>The wrapper element for this action.</p></dd><dt><span class="term">txn:CreateTopicProperty/@id</span></dt><dd><p>The identifier for this operation. This identifier is used
              to correlate any error messages to the operation that caused the
              error.</p></dd><dt><span class="term">txn:CreateTopicProperty/tmd:topic</span></dt><dd><p>REQUIRED. Identifies the topic to be updated and contains
              the names, occurrences and identifiers to be added to the
              topic.</p></dd><dt><span class="term">txn:CreateTopicProperty/tmd:topic/@oid</span></dt><dd><p>Identifies the topic to be updated by either its database
              object identifier (if the topic already exists in the database),
              or by the object identifier assigned to the topic when it was
              created in a preceding action. A string which can be parsed as a
              valid database object identifier (an integer) will be treated as
              such.</p></dd><dt><span class="term">txn:CreateTopicProperty/tmd:topic/@subjectIdentifier</span></dt><dd><p>Identifies the topic to be updated by its subject
              identifier. This attribute will be used only if no value is
              provided for the <code class="sgmltag-element">oid</code> attribute.</p></dd><dt><span class="term">txn:CreateTopicProperty/tmd:topic/@subjectLocator</span></dt><dd><p>OPTIONAL attribute. Identifies the topic to be updated by
              its subject locator. This attribute will be used only if no
              value is provided for the <code class="sgmltag-element">oid</code> and
              <code class="sgmltag-element">subjectIdentifier</code> attributes.</p></dd><dt><span class="term">txn:CreateTopicProperty/tmd:topic/@sourceLocator</span></dt><dd><p>OPTIONAL attribute. Identifies the topic to be updated by
              its source locator. This attribute will be used only if no value
              is provided for the <code class="sgmltag-element">oid</code>
              <code class="sgmltag-element">subjectIdentifier</code>, and
              <code class="sgmltag-element">subjectLocator</code> attributes.</p></dd><dt><span class="term">txn:CreateTopicProperty/tmd:topic/@version</span></dt><dd><p>This OPTIONAL attribute identifies the version of the
              topic to be updated. The topic will only be updated if its
              current version number matches the value of this attribute. If
              the topic's current version number does not match the value
              specified here, then an error will be returned.</p><p>If this attribute is ommitted, the update will be applied
              to the latest version of the topic.</p></dd></dl></div><div class="note"><h3 class="title">Note</h3><p>This method will fail if the topic to be updated cannot be
          found.</p></div><div class="note"><h3 class="title">Note</h3><p>Although the Topic Map Fragment XML Schema allows the
          <code class="sgmltag-element">oid</code>, <code class="sgmltag-element">subjectIdentifier</code>,
          <code class="sgmltag-element">subjectLocator</code> and
          <code class="sgmltag-element">sourceLocator</code> attributes to be ommitted, this
          action requires that at least one of these attributes has a
          value.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3594"></a><code class="sgmltag-element">DeleteTopicProperty</code> Element</h4></div></div></div><p>This action removes names, occurrences and/or identifiers from a
        specified topic. The content of this element specifies the topic to be
        updated, and lists the names, occurrences and identifiers to be
        removed.</p><p>This method allows two ways of specifying the items to be
        removed from a topic:</p><div class="orderedlist"><ol type="1"><li><p><span class="emphasis"><em>Deletion By Reference</em></span> - names and
            occurrences can be specified with the database object identifier
            of the name or occurrence to be deleted in the
            <code class="sgmltag-element">oid</code> attribute of the
            <code class="sgmltag-element">tmd:name</code>, <code class="sgmltag-element">tmd:variant</code> or
            <code class="sgmltag-element">tmd:occurrence</code> elements. The name, variant name
            or occurrence with that OID will be deleted ONLY IF it is
            contained within the topic specified by the request.</p></li><li><p><span class="emphasis"><em>Deletion By Value</em></span> - names, occurrences
            and identifiers can be specified for deletion by defining the
            complete value of the item to be matched. The value must match in
            all respects. For names, this means that the name string and scope
            must match; for variants, the name string or resource and scope
            must match; for occurrences, the data string or resource and the
            scope must match; and for identifiers just the identifier string
            must match. String values can be matched using the SQLServer
            wildcard operators _ and % to match a single character or a
            sequence of characters respectively.</p></li></ol></div><p>In either case if a match is not found for an item to be
        deleted, this method WILL NOT fail, however if that the deletions are
        to be performed on cannot be found, the method WILL fail.</p><p>The DeleteTopicProperty element has the following
        structure</p><pre class="programlisting">&lt;txn:DeleteTopicProperty id="..."&gt;
  &lt;tmd:topic oid="..." subjectIdentifier="..." subjectLocator="..." sourceLocator="..." version="..."&gt;
    ...
  &lt;/tmd:topic&gt;
&lt;/txn:DeleteTopicProperty&gt;</pre><div class="variablelist"><dl><dt><span class="term">txn:DeleteTopicProperty</span></dt><dd><p>The wrapper element for this action.</p></dd><dt><span class="term">txn:DeleteTopicProperty/@id</span></dt><dd><p>The identifier for this operation. This identifier is used
              to correlate any error messages to the operation that caused the
              error.</p></dd><dt><span class="term">txn:DeleteTopicProperty/tmd:topic</span></dt><dd><p>REQUIRED. Identifies the topic that deletions are to be
              performed on and contains the items to be deleted.</p></dd><dt><span class="term">txn:DeleteTopicProperty/tmd:topic/@oid</span></dt><dd><p>Identifies the topic to be updated by its database object
              identifier or the identifier assigned to the topic in a
              preceding CreateTopic action.</p></dd><dt><span class="term">txn:DeleteTopicProperty/tmd:topic/@subjectIdentifier</span></dt><dd><p>Identifies the topic to be updated by its subject
              identifier. This attribute will be used only if no value is
              provided for the <code class="sgmltag-element">oid</code> attribute.</p></dd><dt><span class="term">txn:DeleteTopicProperty/tmd:topic/@subjectLocator</span></dt><dd><p>OPTIONAL attribute. Identifies the topic to be updated by
              its subject locator. This attribute will be used only if no
              value is provided for the <code class="sgmltag-element">oid</code> and
              <code class="sgmltag-element">subjectIdentifier</code> attributes.</p></dd><dt><span class="term">txn:DeleteTopicProperty/tmd:topic/@sourceLocator</span></dt><dd><p>OPTIONAL attribute. Identifies the topic to be updated by
              its source locator. This attribute will be used only if no value
              is provided for the <code class="sgmltag-element">oid</code>
              <code class="sgmltag-element">subjectIdentifier</code>, and
              <code class="sgmltag-element">subjectLocator</code> attributes.</p></dd><dt><span class="term">txn:DeleteTopicProperty/tmd:topic/@version</span></dt><dd><p>This OPTIONAL attribute identifies the version of the
              topic to be updated. The topic will only be updated if its
              current version number matches the value of this attribute. If
              the topic's current version number does not match the value
              specified here, then an error will be returned.</p><p>If this attribute is ommitted, the update will be applied
              to the latest version of the topic.</p></dd></dl></div><div class="note"><h3 class="title">Note</h3><p>Although the Topic Map Fragment XML Schema allows the
          <code class="sgmltag-element">oid</code>, <code class="sgmltag-element">subjectIdentifier</code>,
          <code class="sgmltag-element">subjectLocator</code> and
          <code class="sgmltag-element">sourceLocator</code> attributes to be ommitted, this
          action requires that at least one of these attributes has a
          value.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3716"></a><code class="sgmltag-element">CreateAssociation</code> Element</h4></div></div></div><p>This action creates a new association structure between topics.
        The CreateAssociation element has the following structure:</p><pre class="programlisting">&lt;txn:CreateAssociation id="..."&gt;
  &lt;tmd:association&gt; ... &lt;/tmd:association&gt;
&lt;/txn:CreateAssociation&gt;
    </pre><div class="variablelist"><dl><dt><span class="term">txn:CreateAssociation</span></dt><dd><p>The wrapper element for this action.</p></dd><dt><span class="term">txn:CreateAssociation/@id</span></dt><dd><p>The identifier for this operation. This identifier is used
              to correlate any error messages to the operation that caused the
              error.</p></dd><dt><span class="term">txn:CreateAssociation/tmd:association</span></dt><dd><p>Specifies the structure of the association to be
              created.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3744"></a><code class="sgmltag-element">DeleteAssociation</code> Element</h4></div></div></div><p>This action element deletes an association from the database.
        The association to be deleted can be identified either by its database
        object identifier or by specifying the structure of the association to
        be deleted. The <code class="sgmltag-element">DeleteAssociation</code> element has the
        following structure:</p><pre class="programlisting">&lt;txn:DeleteAssociation id="..."&gt;
  &lt;tmd:association oid="..." sourceLocator="..." version="..."&gt;
    ...
  &lt;/tmd:association&gt;
&lt;/txn:DeleteAssociation&gt;    </pre><div class="variablelist"><dl><dt><span class="term">txn:DeleteAssociation</span></dt><dd><p>The wrapper element for this action.</p></dd><dt><span class="term">txn:DeleteAssociation/@id</span></dt><dd><p>The identifier for this operation. This identifier is used
              to correlate any error messages to the operation that caused the
              error.</p></dd><dt><span class="term">txn:DeleteAssociation/tmd:association</span></dt><dd><p>Specifies the association to be deleted. If the
              <code class="sgmltag-element">oid</code> attribute is present with a value, then
              the association whose database object identifier matches the
              attribute value will be deleted. Otherwise the association which
              matches the structure defined by the content of this element
              will be deleted.</p></dd><dt><span class="term">txn:DeleteAssociation/tmd:association/@oid</span></dt><dd><p>OPTIONAL. Specifies the database object identifier of the
              association to be deleted. If this attribute is present, then
              the association whose database object identifier matches the
              attribute value will be deleted.</p></dd><dt><span class="term">txn:DeleteAssociation/tmd:association/@sourceLocator</span></dt><dd><p>OPTIONAL. Specifies the source locator of the association
              to be deleted. This attribute will be processed only if the
              <code class="sgmltag-element">oid</code> attribute is not present.</p></dd><dt><span class="term">txn:DeleteAssociation/tmd:association/@version</span></dt><dd><p>This OPTIONAL attribute identifies the version of the
              association to be deleted. The association will only be updated
              if its current version number matches the value of this
              attribute. If the association's current version number does not
              match the value specified here, then an error will be
              returned.</p><p>If this attribute is ommitted, the association will be
              deleted regardless of the current version number.</p></dd></dl></div><p>If both the <code class="sgmltag-element">oid</code> and
        <code class="sgmltag-element">sourceLocator</code> attributes are omitted, then the
        association which matches the structure defined by the content of this
        element will be deleted. When matching the association by its
        structure, the association type, the scope of the association, the
        number of association roles and the role type and role player of each
        role are all considered and must all match. Some degree of wildcarding
        is allowed in specifying the match structure - the association type
        and the role type and role player of each role can be specified as a
        wildcard using "-1" (without the double quotes) as the value of the
        <code class="sgmltag-element">oid</code> attribute of the <code class="sgmltag-element">type</code>,
        <code class="sgmltag-element">roletype</code> or <code class="sgmltag-element">player</code>
        elements.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3821"></a>Examples</h4></div></div></div><div class="example"><a name="d0e3824"></a><p class="title"><b>Example&nbsp;A.3.&nbsp;Creating a Topic</b></p><p>The following example shows how a topic can be created and
          populated with identifiers, names and occurrences. Note that you can
          refer to typing topics either by their database object identifier or
          by their PSI.</p><pre class="programlisting">&lt;txn:TopicMapTransaction&gt;
  &lt;txn:CreateTopic id="ctop1"&gt;
    &lt;tmd:topic&gt;
      &lt;tmd:subjectIdentifiers&gt;
        &lt;tmd:locator href="http://www.networkedplanet.com/psi/employees/1234"/&gt;
      &lt;/tmd:subjectIdentifiers&gt;
      &lt;tmd:topicTypes&gt;
        &lt;tmd:type psi="http://www.networkedplanet.com/psi/employee"/&gt;
      &lt;/tmd:topicTypes&gt;
      &lt;tmd:names&gt;
        &lt;tmd:name&gt;
          &lt;tmd:namestring&gt;John Smith&lt;/tmd:namestring&gt;
          &lt;tmd:variants&gt;
            &lt;tmd:variant&gt;
              &lt;tmd:namestring&gt;SMITH, JOHN&lt;/tmd:namestring&gt;
              &lt;tmd:scope&gt;
                &lt;tmd:topicref psi="http://www.topicmaps.org/xtm/1.0/core.xtm#sort"/&gt;
              &lt;/tmd:scope&gt;
            &lt;/tmd:variant&gt;
          &lt;/tmd:variants&gt;
        &lt;/tmd:name&gt;
      &lt;/tmd:names&gt;
      &lt;tmd:occurrences&gt;
        &lt;tmd:occurrence&gt;
          &lt;tmd:type psi="http://www.networkedplanet.com/psi/date-of-birth"/&gt;
          &lt;tmd:resourcedata&gt;1963-01-28&lt;/tmd:resourcedata&gt;
        &lt;/tmd:occurrence&gt;
      &lt;/tmd:occurrences&gt;
    &lt;/tmd:topic&gt;
  &lt;/txn:CreateTopic&gt;
&lt;/txn:TopicMapTransaction&gt;</pre></div><div class="example"><a name="d0e3831"></a><p class="title"><b>Example&nbsp;A.4.&nbsp;Deleting a Topic</b></p><p>To delete a topic you only need to know its database object
          identifier or one of its subject identifiers. The following example
          shows how to delete a topic by specifying its subject
          identifier.</p><pre class="programlisting">&lt;txn:TopicMapTransaction&gt;
  &lt;txn:DeleteTopic id="deltop1"&gt;
    &lt;tmd:topic subjectIdentifier="http://www.networkedplanet.com/psi/employees/1234"/&gt;
  &lt;/txn:DeleteTopic&gt;
&lt;/txn:TopicMapTransaction&gt;</pre></div><div class="example"><a name="d0e3838"></a><p class="title"><b>Example&nbsp;A.5.&nbsp;Adding an Name, Occurrence or Identifier to a Topic</b></p><p>To add a name, occurrence or identifier to a topic, you need
          to specify the topic's database object identifier or one of its
          subject identifiers. You do not need to know the rest of the content
          of the topic. The example below adds a contact telephone number as
          an occurrence to a previously created topic using the topic's
          subject identifier to locate it.</p><pre class="programlisting">&lt;txn:TopicMapTransaction&gt;
  &lt;txn:CreateTopicProperty id="delprop1"&gt;
    &lt;tmd:topic subjectIdentifier="http://www.networkedplanet.com/psi/employees/1234"&gt;
      &lt;tmd:occurrences&gt;
        &lt;tmd:occurrence&gt;
          &lt;tmd:type psi="http://www.networkedplanet.com/psi/contact-tel"/&gt;
          &lt;tmd:resourcedata&gt;0123 456 7890&lt;/tmd:resourcedata&gt;
        &lt;/tmd:occurrence&gt;
      &lt;/tmd:occurrences&gt;
    &lt;/tmd:topic&gt;
  &lt;/txn:CreateTopicProperty&gt;
&lt;/txn:TopicMapTransaction&gt;</pre></div><div class="example"><a name="d0e3845"></a><p class="title"><b>Example&nbsp;A.6.&nbsp;A Simple CreateAssociation Example</b></p><p>In this example, the database object identifiers of the topics
          that participate in the association and of the topics that define
          the association type and roles are all known in advance:</p><pre class="programlisting">&lt;txn:TopicMapTransaction&gt;
  &lt;txn:CreateAssociation id="ca1"&gt;
    &lt;tmd:association&gt;
      &lt;tmd:type oid="123"/&gt;
      &lt;tmd:role&gt;
        &lt;tmd:roleType oid="124"/&gt;
        &lt;tmd:player oid="2001"/&gt;
      &lt;/tmd:role&gt;
      &lt;tmd:role&gt;
        &lt;tmd:roleType oid="125"/&gt;
        &lt;tmd:player oid="2002"/&gt;
      &lt;/tmd:role&gt;
    &lt;/tmd:association&gt;
  &lt;/txn:CreateAssociation&gt;
&lt;/txn:TopicMapTransaction&gt;      </pre></div><div class="example"><a name="d0e3852"></a><p class="title"><b>Example&nbsp;A.7.&nbsp;Using PSI References</b></p><p>The following example shows how database object identifier
          references and PSI references can be easily mixed together in the
          creation of an association. PSI references are often most useful for
          identifying topic types and fixed category lists in a topic
          map.</p><pre class="programlisting">&lt;txn:TopicMapTransaction&gt;
  &lt;txn:CreateAssociation id="ca2"&gt;
    &lt;tmd:association&gt;
      &lt;tmd:type psi="http://psi.example.com/event-has-location"/&gt;
      &lt;tmd:role&gt;
        &lt;tmd:roleType oid="http://psi.example.com/event-has-location-target"/&gt;
        &lt;tmd:player oid="http://psi.example.com/cities/london"/&gt;
      &lt;/tmd:role&gt;
      &lt;tmd:role&gt;
        &lt;tmd:roleType oid="http://psi.example.com/event-has-location-source"/&gt;
        &lt;tmd:player oid="2002"/&gt;
      &lt;/tmd:role&gt;
    &lt;/tmd:association&gt;
  &lt;/txn:CreateAssociation&gt;
&lt;/txn:TopicMapTransaction&gt;      </pre></div><div class="example"><a name="d0e3859"></a><p class="title"><b>Example&nbsp;A.8.&nbsp;Combining Actions</b></p><p>Multiple actions can be combined into a single transactional
          update. New topics can be assigned an internal object identifier
          that is valid only for references made from other actions in the
          same transaction. This allows a new topic to be included in new
          associations or used as a topic type or scope without having to make
          two separate transactions.</p><p>The following example shows how two topics are created and
          connected together in an association all as part of a single
          transaction.</p><pre class="programlisting">&lt;txn:TopicMapTransaction&gt;
  &lt;!-- Create a topic for Bart --&gt;
  &lt;txn:CreateTopic id="create-bart"&gt;
    &lt;tmd:topic oid="bart"&gt;
      &lt;tmd:names&gt;
        &lt;tmd:name&gt;
          &lt;tmd:namestring&gt;Bart Simpson&lt;/tmd:namestring&gt;
        &lt;/tmd:name&gt;
      &lt;/tmd:names&gt;
    &lt;/tmd:topic&gt;
  &lt;/txn:CreateTopic&gt;
  &lt;!-- Create a topic for Homer --&gt;
  &lt;txn:CreateTopic id="create-homer"&gt;
    &lt;tmd:topic oid="homer"&gt;
      &lt;tmd:names&gt;
        &lt;tmd:name&gt;
          &lt;tmd:namestring&gt;Homer Simpson&lt;/tmd:namestring&gt;
        &lt;/tmd:name&gt;
      &lt;/tmd:names&gt;
    &lt;/tmd:topic&gt;
  &lt;/txn:CreateTopic&gt;
  &lt;!-- Create a parent-child association between them --&gt;
  &lt;txn:CreateAssociation id="create-assoc-1"&gt;
    &lt;tmd:association&gt;
      &lt;tmd:type psi="http://psi.example.com/parent-child"/&gt;
      &lt;tmd:role&gt;
        &lt;tmd:roletype psi="http://psi.example.com/parent"/&gt;
        &lt;tmd:player tref="homer"/&gt;
      &lt;/tmd:role&gt;
      &lt;tmd:role&gt;
        &lt;tmd:roletype psi="http://psi.example.com/child"/&gt;
        &lt;tmd:player tref="bart"/&gt;
      &lt;/tmd:role&gt;
    &lt;/tmd:association&gt;
  &lt;/txn:CreateAssociation&gt;
&lt;/txn:TopicMapTransaction&gt;</pre><div class="warning"><h3 class="title">Warning</h3><p>There is one restriction on the OIDs used for newly
              created topics. The processor will check any
              <code class="sgmltag-element">tref</code> attribute value to see if it is a valid
              database object identifier, before looking for internal
              references assigned by CreateTopic actions. Therefore the object
              identifier assigned to new topics must not be in a form that can
              be recognised as a database object identifier. A database object
              identifier is an integer string, so any string that contains at
              least one non-numeric character can be used as an internal
              identifier for a new topic.</p></div></div><div class="example"><a name="d0e3875"></a><p class="title"><b>Example&nbsp;A.9.&nbsp;Changing an Name, Occurrence or Identifier</b></p><p>Changing a single name, occurrence or identifier without
          modifying the other properties of a topic can be done by deleting
          the value to be changed and specifying a new value as part of a
          single transaction. If you know the database object identifier of
          the item to be deleted, you can use that to reference the item to be
          deleted. Otherwise you can specify the value of the item to be
          deleted (including its type and any scoping topics). The example
          below shows changing the contact telephone number created in the
          previous example, and deleting a name with the database object
          identifier "9987".</p><pre class="programlisting">&lt;txn:TopicMapTransaction&gt;
  &lt;txn:DeleteTopicProperty id="op01"&gt;
    &lt;tmd:topic psi="http://www.networkedplanet.com/psi/employees/1234"&gt;
      &lt;tmd:names&gt;
        &lt;!-- delete a name by specifying its object identifier --&gt;
        &lt;tmd:name oid="9987"/&gt;
      &lt;/tmd:names&gt;
      &lt;tmd:occurrences&gt;
        &lt;!-- delete an occurrence by specifying its value --&gt;
        &lt;tmd:occurrence&gt;
          &lt;tmd:type psi="http://www.networkedplanet.com/psi/contact-tel"/&gt;
          &lt;tmd:resourcedata&gt;0123 456 7890&lt;/tmd:resourcedata&gt;
        &lt;/tmd:occurrence&gt;
      &lt;/tmd:occurrences&gt;
    &lt;/tmd:topic&gt;
  &lt;/txn:DeleteTopicProperty&gt;
  &lt;txn:CreateTopicProperty id="op02"&gt;
    &lt;tmd:topic psi="http://www.networkedplanet.com/psi/employees/1234"&gt;
      &lt;tmd:occurrences&gt;
        &lt;!-- Add a new occurrence --&gt;
        &lt;tmd:occurrence&gt;
          &lt;tmd:type psi="http://www.networkedplanet.com/psi/contact-tel"/&gt;
          &lt;tmd:resourcedata&gt;0123 554 5555&lt;/tmd:resourcedata&gt;
        &lt;/tmd:occurrence&gt;
      &lt;/tmd:occurrences&gt;
    &lt;/tmd:topic&gt;
  &lt;/txn:CreateTopicProperty&gt;
&lt;/txn:TopicMapTransaction&gt;      </pre></div><div class="example"><a name="d0e3882"></a><p class="title"><b>Example&nbsp;A.10.&nbsp;Replacing an Occurrence</b></p><p>By using the wildcard string matching operators, you can also
          maintain a single occurrence of a given type (or a single name or
          variant in a given scope) by issuing a DeleteTopicProperty
          specifying the string match using the % wildcard, followed by a
          CreateTopicProperty operation. The example below shows this in
          operation - first, all occurrences of the type
          "http://www.networkedplanet.com/psi/contact-tel" are deleted from
          the topic, and then a single new occurrence is created.</p><pre class="programlisting">&lt;txn:TopicMapTransaction&gt;
  &lt;txn:DeleteTopicProperty id="op01"&gt;
    &lt;tmd:topic psi="http://www.networkedplanet.com/psi/employees/1234"&gt;
      &lt;tmd:names&gt;
        &lt;!-- delete a name by specifying its object identifier --&gt;
        &lt;tmd:name oid="9987"/&gt;
      &lt;/tmd:names&gt;
      &lt;tmd:occurrences&gt;
        &lt;!-- delete all occurrences of a given type by specifying a wildcard value match --&gt;
        &lt;tmd:occurrence&gt;
          &lt;tmd:type psi="http://www.networkedplanet.com/psi/contact-tel"/&gt;
          &lt;tmd:resourcedata&gt;%&lt;/tmd:resourcedata&gt;
        &lt;/tmd:occurrence&gt;
      &lt;/tmd:occurrences&gt;
    &lt;/tmd:topic&gt;
  &lt;/txn:DeleteTopicProperty&gt;
  &lt;txn:CreateTopicProperty id="op02"&gt;
    &lt;tmd:topic psi="http://www.networkedplanet.com/psi/employees/1234"&gt;
      &lt;tmd:occurrences&gt;
        &lt;!-- Add a new occurrence --&gt;
        &lt;tmd:occurrence&gt;
          &lt;tmd:type psi="http://www.networkedplanet.com/psi/contact-tel"/&gt;
          &lt;tmd:resourcedata&gt;0123 554 5555&lt;/tmd:resourcedata&gt;
        &lt;/tmd:occurrence&gt;
      &lt;/tmd:occurrences&gt;
    &lt;/tmd:topic&gt;
  &lt;/txn:CreateTopicProperty&gt;
&lt;/txn:TopicMapTransaction&gt;      </pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="npcl-schema"></a>NPCL XML Schema</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3893"></a>Overview</h4></div></div></div><p>A set of NPCL constraints can be specified using an XML document
        conforming to the NPCL XML Schema. This representation of the NPCL
        constraints is separate from the representation of the constraints in
        a topic map and so does not simply use the XTM syntax. NPCL XML Schema
        is also a more compact representation of a set of NPCL constraints
        than the topic map representation and is more easily processed using
        standard XML tools such as XSLT. This section describes the NPCL XML
        Schema in detail. The W3C XML Schema representation is also included
        in the TMCore distribution and can be downloaded from <a href="http://www.networkedplanet.com/schemas/npcl/npcl.xsd" target="_top">the
        NetworkedPlanet website</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3901"></a>Namespace</h4></div></div></div><p>The namespace used for NPCL XML Schema is
        http://www.networkedplanet.com/schema/npcl. In the examples in the
        rest of this section, this namespace is assumed to be mapped to the
        namespace prefix "npcl".</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3906"></a><code class="sgmltag-element">schema Element</code></h4></div></div></div><p>This is the root element of the NPCL XML synax. It contains a
        single types element which in turn contains the various type
        definition elements.</p><pre class="programlisting">
&lt;npcl:schema&gt;
  &lt;npcl:types&gt;
    &lt;npcl:abstractType ...&gt; ... &lt;/npcl:abstractType&gt;
    &lt;npcl:topicType ... &gt; ... &lt;/npcl:topicType&gt;
    &lt;npcl:occurrenceType ... &gt; ... &lt;/npcl:occurrenceType&gt;
    &lt;npcl:associationType ... &gt; ... &lt;/npcl:associationType&gt;
    &lt;npcl:roleType ... &gt; ... &lt;/npcl:roleType&gt;
    &lt;npcl:scopingTopic ... &gt; ... &lt;/npcl:scopingTopic&gt;
  &lt;/npcl:types&gt;
&lt;/npcl:schema&gt;
</pre><div class="variablelist"><dl><dt><span class="term">npcl:schema</span></dt><dd><p>The root of an NPCL schema definition.</p></dd><dt><span class="term">npcl:schema/npcl:types</span></dt><dd><p>The wrapper for all type definitions contained in the
              schema. This element is OPTIONAL. The children of this element
              are allowed to appear in any order.</p></dd><dt><span class="term">npcl:schema/npcl:types/npcl:abstractType</span></dt><dd><p>An OPTIONAL, REPEATABLE element describing a single
              Abstract Type in the schema.</p></dd><dt><span class="term">npcl:schema/npcl:types/npcl:topicType</span></dt><dd><p>An OPTIONAL, REPEATABLE element describing a single Topic
              Type in the schema.</p></dd><dt><span class="term">npcl:schema/npcl:types/npcl:occurrenceType</span></dt><dd><p>An OPTIONAL, REPEATABLE element describing a single
              Occurrence Type in the schema.</p></dd><dt><span class="term">npcl:schema/npcl:types/npcl:associationType</span></dt><dd><p>An OPTIONAL, REPEATABLE element describing a single
              Assoiation Type in the schema.</p></dd><dt><span class="term">npcl:schema/npcl:types/npcl:roleType</span></dt><dd><p>An OPTIONAL, REPEATABLE element describing a single Role
              Type in the schema.</p></dd><dt><span class="term">npcl:schema/npcl:types/npcl:scopingTopic</span></dt><dd><p>An OPTIONAL, REPEATABLE element describing a single
              Scoping Topic in the schema.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3963"></a><code class="sgmltag-element">abstractType</code> Element</h4></div></div></div><p>This element describes a single Abstract Type in the
        schema.</p><pre class="programlisting">
&lt;npcl:abstractType id="..."&gt;
  &lt;npcl:subjectIdentifier&gt; 
    SUBJECT IDENTIFIER 
  &lt;/npcl:subjectIdentifier&gt;
  &lt;npcl:displayName&gt; NAME &lt;/npcl:displayName&gt;
  &lt;npcl:extension type="EXTENSION TYPE"&gt; 
    EXTENSION VALUE 
  &lt;/npcl:extension&gt;
  &lt;npcl:subclasses&gt; ... &lt;/npcl:subclasses&gt;
&lt;/npcl:abstractType&gt;
</pre><div class="variablelist"><dl><dt><span class="term">npcl:abstractType/@id</span></dt><dd><p>REQUIRED. An internal identifier for the type. This is
              used only for reference purposes inside the NPCL XML
              document.</p></dd><dt><span class="term">npcl:abstractType/npcl:subjectIdentifier</span></dt><dd><p>REQUIRED, REPEATABLE. Contains a subject identifier URI
              for the type.</p></dd><dt><span class="term">npcl:abstractType/npcl:displayName</span></dt><dd><p>Contains a human-readable display label for the
              type.</p></dd><dt><span class="term">npcl:abstractType/npcl:extension</span></dt><dd><p>Contains a single typed extension value for the type. The
              value is the string content of this element. The type is
              specified as a URI in the <code class="sgmltag-element">type</code> attribute of
              this elment.</p></dd><dt><span class="term">npcl:abstractType/npcl:subclasses</span></dt><dd><p>Contains a list of the subclasses of this type. This
              element structure is described in detail below.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4006"></a><code class="sgmltag-element">topicType</code></h4></div></div></div><p>This element describes a single Topic Type in the schema. It
        contains the Occurrence and Role Player Constraints that apply to this
        Topic Type.</p><pre class="programlisting">
&lt;npcl:topicType id="..." abstract="true|false"&gt;
  &lt;npcl:subjectIdentifier&gt;
    ...
  &lt;/npcl:subjectIdentifier&gt;
  &lt;npcl:displayName&gt;...&lt;/npcl:displayName&gt;
  &lt;npcl:rolePlayerConstraint 
      roleTypeRef="..." 
      associationTypeRef="..." 
      minCardinality="..." 
      maxCardinality="..."/&gt;
  &lt;npcl:occurrenceConstraint 
      occurrenceTypeRef="..." 
      minCardinality="..." 
      maxCardinality="..."/&gt;
  &lt;npcl:extension type="..."&gt;
    ...
  &lt;/npcl:extension&gt;
  &lt;npcl:subclasses&gt; ... &lt;/npcl:subclasses&gt;
&lt;/topicType&gt;
</pre><div class="variablelist"><dl><dt><span class="term">npcl:topicType/@id</span></dt><dd><p>REQUIRED. An internal identifier for the type. This is
              used only for reference purposes inside the NPCL XML
              document.</p></dd><dt><span class="term">npcl:topicType/@abstract</span></dt><dd><p>OPTIONAL. A boolean value that indicates if this type is
              abstract. If not specified, this attribute value defaults to
              "false".</p></dd><dt><span class="term">npcl:topicType/npcl:subjectIdentifier</span></dt><dd><p>REQUIRED, REPEATABLE. Contains a subject identifier URI
              for the type.</p></dd><dt><span class="term">npcl:topicType/npcl:displayName</span></dt><dd><p>Contains a human-readable display label for the
              type.</p></dd><dt><span class="term">npcl:topicType/npcl:rolePlayerConstraint</span></dt><dd><p>This element specifies a single Role Player Constraint
              that applies to this Topic Type.</p><p>The <code class="sgmltag-element">roleTypeRef</code> attribute is REQUIRED
              and contains the internal identifier of the Role Type that is
              allowed by the Role Player Constraint. This must match the value
              of the id attribute on a roleType element in the NPCL XML
              document.</p><p>The <code class="sgmltag-element">associationTypeRef</code> attribute is
              OPTIONAL and contains the internal identifier of the Association
              Type that is allowed by the Role Player Constraint. This must
              match the value of the id attribute on an associationType
              element in the NPCL XML document. If this attribute is ommitted,
              then the Role Player Constraint applies to all roles of the
              specified Role Type, regardless of the type of association they
              are in.</p><p>The <code class="sgmltag-element">minCardinality</code> attribute specifies
              the Minimum Cardinality Facet for the constraint. This attribute
              is REQUIRED and its value must be a non-negative integer.</p><p>The <code class="sgmltag-element">maxCardinality</code> attribute specifies
              the Maximum Cardinality Facet for the constraint. This attribute
              is REQUIRED and its value must be either a non-negative integer
              or the string value "unbounded" (indicating that there is no
              upper limit on this constraint.</p></dd><dt><span class="term">npcl:topicType/npcl:occurrenceConstraint</span></dt><dd><p>This element specifies a single Occurrence Cosntraint that
              applies to this Topic Type.</p><p>The <code class="sgmltag-element">occurrenceTypeRef</code> attribute is
              REQUIRED and contains the internal identifier of the Occurrence
              Type that is allowed by the Occurrence Constraint. This must
              match the value of the id attribute on an occurrenceType element
              in the NPCL XML document.</p><p>The <code class="sgmltag-element">minCardinality</code> attribute specifies
              the Minimum Cardinality Facet for the constraint. This attribute
              is REQUIRED and its value must be a non-negative integer.</p><p>The <code class="sgmltag-element">maxCardinality</code> attribute specifies
              the Maximum Cardinality Facet for the constraint. This attribute
              is REQUIRED and its value must be either a non-negative integer
              or the string value "unbounded" (indicating that there is no
              upper limit on this constraint.</p></dd><dt><span class="term">npcl:topicType/npcl:extension</span></dt><dd><p>Contains a single typed extension value for the type. The
              value is the string content of this element. The type is
              specified as a URI in the <code class="sgmltag-element">type</code> attribute of
              this elment.</p></dd><dt><span class="term">npcl:topicType/npcl:subclasses</span></dt><dd><p>Contains a list of the subclasses of this type. This
              element structure is described in detail below.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4101"></a><code class="sgmltag-element">occurrenceType</code> Element</h4></div></div></div><p>This element describes a single Occurrence Type in the schema.
        It contains the Datatype, Minimum Value, Maximum Value and Value
        Pattern Facets that apply to this Occurrence Type.</p><pre class="programlisting">
&lt;npcl:occurrenceType id="..." abstract="true|false"
    datatype="..."
    minValue="..."
    maxValue="..."
    valuePattern="..."&gt;
  &lt;npcl:subjectIdentifier&gt;
    SUBJECT IDENTIFIER
  &lt;/subjectIdentifier&gt;
  &lt;npcl:displayName&gt; NAME &lt;/npcl:displayName&gt;
  &lt;npcl:extension type="..."&gt;
    ...
  &lt;/npcl:extension&gt;
  &lt;npcl:subclasses&gt; ... &lt;/npcl:subclasses&gt;
&lt;/occurrenceType&gt;
	</pre><div class="variablelist"><dl><dt><span class="term">npcl:occurrenceType/@id</span></dt><dd><p>REQUIRED. An internal identifier for the type. This is
              used only for reference purposes inside the NPCL XML
              document.</p></dd><dt><span class="term">npcl:occurrenceType/@abstract</span></dt><dd><p>OPTIONAL. A boolean value that indicates if this type is
              abstract. If not specified, this attribute value defaults to
              "false".</p></dd><dt><span class="term">npcl:occurrenceType/@datatype</span></dt><dd><p>OPTIONAL. The Datatype Facet value. This attribute
              specifies the datatype for values of occurences of this
              type.</p></dd><dt><span class="term">npcl:occurrenceType/@minValue</span></dt><dd><p>OPTIONAL. The Minimum Value Facet value. Specifies the
              minimum allowed value for occurrences of this type.</p></dd><dt><span class="term">npcl:occurrenceType/@maxValue</span></dt><dd><p>OPTIONAL. The Maximum Value Facet value. Specifies the
              maximum allowed value for occurrences of this type.</p></dd><dt><span class="term">npcl:occurrenceType/@valuePattern</span></dt><dd><p>OPTIONAL. The Value Pattern Facet value. Specifies a
              regular expressiong that values of occurrences of this type must
              match.</p></dd><dt><span class="term">npcl:occurrenceType/npcl:subjectIdentifier</span></dt><dd><p>REQUIRED, REPEATABLE. Contains a subject identifier URI
              for the type.</p></dd><dt><span class="term">npcl:occurrenceType/npcl:displayName</span></dt><dd><p>Contains a human-readable display label for the
              type.</p></dd><dt><span class="term">npcl:occurrenceType/npcl:extension</span></dt><dd><p>Contains a single typed extension value for the type. The
              value is the string content of this element. The type is
              specified as a URI in the <code class="sgmltag-element">type</code> attribute of
              this elment.</p></dd><dt><span class="term">npcl:occurrenceType/npcl:subclasses</span></dt><dd><p>Contains a list of the subclasses of this type. This
              element structure is described in detail below.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4174"></a><code class="sgmltag-element">associationType</code> Element</h4></div></div></div><p>This element describes a single Association Type in the schema.
        It contains the Association Role Constraints that apply to this
        Association Type.</p><pre class="programlisting">
&lt;npcl:associationType id="..." abstract="true|false"&gt;
  &lt;npcl:subjectIdentifier&gt;
    ...
  &lt;/npcl:subjectIdentifier&gt;
  &lt;npcl:displayName&gt; ... &lt;/npcl:displayName&gt;
  &lt;associationRoleConstraint 
      roleTypeRef="..." 
      minCardinality="..." 
      maxCardinality="..." 
      arcLabel="..."/&gt;
  &lt;npcl:extension type="..."&gt;
    ...
  &lt;/npcl:extension&gt;
  &lt;npcl:subclasses&gt; ... &lt;/npcl:subclasses&gt;
&lt;/associationType&gt;
      </pre><div class="variablelist"><dl><dt><span class="term">npcl:associationType/@id</span></dt><dd><p>REQUIRED. An internal identifier for the type. This is
              used only for reference purposes inside the NPCL XML
              document.</p></dd><dt><span class="term">npcl:associationType/@abstract</span></dt><dd><p>OPTIONAL. A boolean value that indicates if this type is
              abstract. If not specified, this attribute value defaults to
              "false".</p></dd><dt><span class="term">npcl:associationType/npcl:subjectIdentifier</span></dt><dd><p>REQUIRED, REPEATABLE. Contains a subject identifier URI
              for the type.</p></dd><dt><span class="term">npcl:associationType/npcl:displayName</span></dt><dd><p>Contains a human-readable display label for the
              type.</p></dd><dt><span class="term">npcl:associationType/npcl:associationRoleConstraint</span></dt><dd><p>Defines a single Association Role Constraint that applies
              to this Association Type.</p><p>The <code class="sgmltag-element">roleTypeRef</code> attribute is REQUIRED
              and contains the internal identifier of the Role Type that is
              allowed by the Association Role Constraint. This must match the
              value of the id attribute on a roleType element in the NPCL XML
              document.</p><p>The <code class="sgmltag-element">minCardinality</code> attribute specifies
              the Minimum Cardinality Facet for the constraint. This attribute
              is REQUIRED and its value must be a non-negative integer.</p><p>The <code class="sgmltag-element">maxCardinality</code> attribute specifies
              the Maximum Cardinality Facet for the constraint. This attribute
              is REQUIRED and its value must be either a non-negative integer
              or the string value "unbounded" (indicating that there is no
              upper limit on this constraint.</p><p>The <code class="sgmltag-element">arcLabel</code> attribute specifies the
              Arc Label Facet for the constraint. This attribute is OPTIONAL
              and its value should be a human-readable label for the
              association, when displayed in the context of the player of the
              role identified by the <code class="sgmltag-element">roleTypeRef</code>
              attribute.</p></dd><dt><span class="term">npcl:associationType/npcl:extension</span></dt><dd><p>Contains a single typed extension value for the type. The
              value is the string content of this element. The type is
              specified as a URI in the <code class="sgmltag-element">type</code> attribute of
              this elment.</p></dd><dt><span class="term">npcl:associationType/npcl:subclasses</span></dt><dd><p>Contains a list of the subclasses of this type. This
              element structure is described in detail below.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4252"></a><code class="sgmltag-element">roleType</code> Element</h4></div></div></div><p>This element describes a single Role Type in the schema.</p><pre class="programlisting">
&lt;npcl:roleType id="..." abstract="true|false"&gt;
  &lt;npcl:subjectIdentifier&gt;
    ...
  &lt;/subjectIdentifier&gt;
  &lt;npcl:displayName&gt; ... &lt;/npcl:displayName&gt;
  &lt;npcl:extension type="..."&gt;
    ...
  &lt;/npcl:extension&gt;
  &lt;npcl:subclasses&gt; ... &lt;/npcl:subclasses&gt;
&lt;/roleType&gt;
      </pre><div class="variablelist"><dl><dt><span class="term">npcl:roleType/@id</span></dt><dd><p>REQUIRED. An internal identifier for the type. This is
              used only for reference purposes inside the NPCL XML
              document.</p></dd><dt><span class="term">npcl:roleType/@abstract</span></dt><dd><p>OPTIONAL. A boolean value that indicates if this type is
              abstract. If not specified, this attribute value defaults to
              "false".</p></dd><dt><span class="term">npcl:roleType/npcl:subjectIdentifier</span></dt><dd><p>REQUIRED, REPEATABLE. Contains a subject identifier URI
              for the type.</p></dd><dt><span class="term">npcl:roleType/npcl:displayName</span></dt><dd><p>REQUIRED. Contains a human-readable display label for the
              type.</p></dd><dt><span class="term">npcl:roleType/npcl:extension</span></dt><dd><p>OPTIONAL, REPEATABLE. Contains a single typed extension
              value for the type. The value is the string content of this
              element. The type is specified as a URI in the
              <code class="sgmltag-element">type</code> attribute of this elment.</p></dd><dt><span class="term">npcl:roleType/npcl:subclasses</span></dt><dd><p>Contains a list of the subclasses of this type. This
              element structure is described in detail below.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4301"></a><code class="sgmltag-element">scopingTopic</code> Element</h4></div></div></div><p>This element describes a single Scoping Topic in the
        schema.</p><pre class="programlisting">
&lt;npcl:scopingTopic&gt;
  &lt;npcl:subjectIdentifier&gt;
    ...
  &lt;/subjectIdentifier&gt;
  &lt;npcl:displayName&gt; ... &lt;/npcl:displayName&gt;
  &lt;npcl:extension type="..."&gt;
    ...
  &lt;/npcl:extension&gt;
&lt;/roleType&gt;
      </pre><div class="variablelist"><dl><dt><span class="term">npcl:scopingTopic/npcl:subjectIdentifier</span></dt><dd><p>REQUIRED, REPEATABLE. Contains a subject identifier URI
              for the type.</p></dd><dt><span class="term">npcl:scopingTopic/npcl:displayName</span></dt><dd><p>REQUIRED. Contains a human-readable display label for the
              type.</p></dd><dt><span class="term">npcl:scopingTopic/npcl:extension</span></dt><dd><p>OPTIONAL, REPEATABLE. Contains a single typed extension
              value for the type. The value is the string content of this
              element. The type is specified as a URI in the
              <code class="sgmltag-element">type</code> attribute of this elment.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4332"></a><code class="sgmltag-element">subclasses</code> Element</h4></div></div></div><p>This element is allowed as a direct child of the abstractType,
        topicType, occurrenceType, associationType and roleType elements. It
        contains a list of all of the subclasses of the type defined by the
        parent element.</p><pre class="programlisting">
&lt;npcl:subclasses&gt;
  &lt;subclass direct="true|false" classRef="..."/&gt;
&lt;/subclasses&gt;
      </pre><div class="variablelist"><dl><dt><span class="term">npcl:subclasses/npcl:subclass</span></dt><dd><p>References a single subclass of the type.</p><p>The <code class="sgmltag-element">direct</code> is OPTIONAL and indicates
              whether the referenced type is a direct subclass of this type or
              if it is an indirect subclass (a subclass of a direct subclass
              of the type). For importing and schema parsing, only direct
              subclasses are considered - indirect subclasses are optionally
              provided when exporting an NPCL schema for processing
              convenience. If omitted, the value defaults to 'true'.</p><p>The <code class="sgmltag-element">classRef</code> attribute is REQUIRED and
              references the type that is a subclass of this type. The value
              of this attribute must be the value of the id attribute of an
              abstractType, topicType, occurrenceType, associationType or
              roleType element in the NPCL XML document.</p></dd></dl></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="npcl-forms-schema"></a>NPCL Forms XML Schema</h3></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4363"></a>Overview</h4></div></div></div><p>The NPCL Forms XML Schema provides an alternate XML
        representation of a set of NPCL types and constraints. This
        representation has been optimised for generating topic-oriented user
        interfaces such as forms interfaces for topic editing. The focus of
        this schema is on the topic types and the information that can be
        added to a topic of a particular type. A more generalized XML
        representation is provided by the NPCL XML Schema. This section
        describes the NPCL Forms XML Schema in detail. The W3C XML Schema
        representation is also included in the TMCore distribution and can be
        downloaded from <a href="http://www.networkedplanet.com/schemas/npcl-forms/npcl-forms.xsd" target="_top">the
        NetworkedPlanet website</a>.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4371"></a>Namespace</h4></div></div></div><p>The namespace used for NPCL XML Schema is
        http://www.networkedplanet.com/schema/npcl-forms. In the examples in
        the rest of this section, this namespace is assumed to be mapped to
        the namespace prefix "nf".</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4376"></a><code class="sgmltag-element">schema</code> Element</h4></div></div></div><p>The <code class="sgmltag-element">schema</code> element is the root element for an
        NPCL Forms XML document. The element has the following syntax:</p><pre class="programlisting">&lt;nf:schema&gt;
  &lt;nf:topicType ... &gt; ... &lt;/nf:topicType&gt;
  ...
&lt;/nf:schema&gt;</pre><div class="variablelist"><dl><dt><span class="term">nf:schema</span></dt><dd><p>The root element of an NPCL Forms XML instance.</p></dd><dt><span class="term">nf:schema/nf:topicType</span></dt><dd><p>Contains the schema information required to build a forms
              interface for a single topic type in the NPCL schema. This
              element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:schema/{##other}</span></dt><dd><p>An extension point in the NPCL Forms XML Schema which
              allows any number of elements from any namespace other than the
              NPCL Forms XML Schema namespace to appear after all
              <code class="sgmltag-element">topicType</code> elements.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4410"></a><code class="sgmltag-element">topicType</code> Element</h4></div></div></div><p>The <code class="sgmltag-element">topicType</code> element contains the schema
        information relating to a single topic type in the NPCL schema. This
        element has the following syntax:</p><pre class="programlisting">&lt;nf:topicType id="..." isAbstract="<i>true|false</i>"&gt;
  &lt;nf:subjectIdentifier&gt; <i>PSI</i> &lt;/nf:subjectIdentifier&gt;
  &lt;nf:displayName&gt; <i>NAME</i> &lt;/nf:displayName&gt;
  &lt;nf:extension ... &gt; ... &lt;/nf:extension&gt;
  &lt;nf:occurrenceField ... &gt; ... &lt;/nf:occurrenceField&gt;
  &lt;nf:associationField ... &gt; ... &lt;/nf:associationField&gt;
  ...
&lt;/topicType&gt;</pre><div class="variablelist"><dl><dt><span class="term">nf:topicType/@id</span></dt><dd><p>Contains the ID value for the topic type described by this
              element. If the forms schema is being retrieved from a topic map
              stored inside a TMCore database, then the value of this
              attribute will be the database OID of the topic that defines the
              topic type.</p></dd><dt><span class="term">nf:topicType/@isAbtract</span></dt><dd><p>A boolean value that indicates if the topic type described
              by this element is marked in the schemas a being abstract.
              Typically a GUI should not allow end-users to create instances
              of topic types that are marked as abstract.</p></dd><dt><span class="term">nf:topicType/nf:subjectIdentifier</span></dt><dd><p>Contains a single subject identifier for this topic type.
              This element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:topicType/nf:displayName</span></dt><dd><p>Contains a displayable name for the topic type. This
              element is OPTIONAL and NON-REPEATABLE.</p></dd><dt><span class="term">nf:topicType/nf:extension</span></dt><dd><p>Contains a single schema extension value for the topic
              type. Extension values allow additional constraint or display
              information to be communicated to applications using the NPCL
              schema extension mechanism. This element is OPTIONAL and
              REPEATABLE.</p></dd><dt><span class="term">nf:topicType/nf:occurrenceField</span></dt><dd><p>Contains schema information that constrains creation of
              occurrences of a specific type on topics of this type. This
              element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:topicType/nf:associationField</span></dt><dd><p>Contains schema information that constrains the creation
              of associations between topics of this type and other topics in
              the topic map. Each <code class="sgmltag-element">associationField</code> element
              describes the constraints applying to a particular type of role
              that can be played by topics of this type, or a particular role
              type and parent association type combination. This element is
              OPTIONAL and REPEATABLE</p></dd><dt><span class="term">nf:topicType/{##other}</span></dt><dd><p>An extension point in the NPCL Forms XML Schema which
              allows any number of elements from any namespace other than the
              NPCL Forms XML Schema namespace to appear as the last child
              elements of a <code class="sgmltag-element">topicType</code> element.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4486"></a><code class="sgmltag-element">extension</code> Element</h4></div></div></div><p>The <code class="sgmltag-element">extension</code> element provides extension
        values from the NPCL schema. Each extension value is typed using a URI
        type identifier. The extension element has the following
        syntax:</p><pre class="programlisting">&lt;nf:extension type="<i>URI</i>" &gt; <i>VALUE</i> &lt;/nf:extension&gt;</pre><div class="variablelist"><dl><dt><span class="term">nf:extension/@type</span></dt><dd><p>Contains the URI identifier for the extension type. The
              value of this attribute is any URI.</p></dd><dt><span class="term">nf:extension/text()</span></dt><dd><p>The text content of the <code class="sgmltag-element">extension</code>
              element is the extension value expressed as a string.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4520"></a><code class="sgmltag-element">occurrenceField</code> Element</h4></div></div></div><p>The occurrenceField element contains the schema information
        required to create a form field for adding new occurrence value of a
        specific type to a topic. The topic type is defined by the parent
        <code class="sgmltag-element">topicType</code> element. The element has the following
        syntax:</p><pre class="programlisting">&lt;nf:occurrenceField id="..."
    minCardinality="<i>MINCARD</i>"
    maxCardinality="<i>MAXCARD</i>"
    datatype="<i>DATATYPE</i>"
    minValue="<i>MIN</i>"
    maxValue="<i>MAX</i>"
    valuePattern="<i>PATTERN</i>"
&gt;
  &lt;nf:subjectIdentifier&gt; <i>PSI</i> &lt;/nf:subjectIdentifier&gt;
  &lt;nf:displayName&gt; <i>NAME</i> &lt;/nf:displayName&gt;
  &lt;nf:extension ... &gt; ... &lt;/nf:extension&gt;
  ...
&lt;/nf:occurrenceField&gt;</pre><div class="variablelist"><dl><dt><span class="term">nf:occurrenceField/@id</span></dt><dd><p>Contains the ID of the occurrence type that gives rise to
              this occurrence field. If the schema is stored in a topic map in
              a TMCore database, then the value of this attribute is the OID
              of the topic that defines the occurrence type.</p></dd><dt><span class="term">nf:occurrenceField/@minCardinality</span></dt><dd><p>Specifies the lower limit to the number of times an
              occurrence of this type should appear on an instance of the
              topic type. This attribute is REQUIRED and its value must be a
              non-negative integer.</p></dd><dt><span class="term">nf:occurrenceField/@maxCardinality.</span></dt><dd><p>Specifies the upper limit to the number of occurrences of
              this type that should appear on an instance of the topic type.
              This attribute is REQUIRED and its value must be either a
              non-negative integer or the string "unbounded" to indicate that
              there is no upper limit.</p></dd><dt><span class="term">nf:occurrenceField/@datatype</span></dt><dd><p>Specifies the datatype that the occurrence value must
              conform to. This attribute is OPTIONAL. The attribute value can
              be any string, but it is RECOMMENDED that only W3C XML Schema
              data types should be referenced, using the full URI for the
              datatype as defined by the W3C XML Schema specification.</p></dd><dt><span class="term">nf:occurrenceField/@minValue</span></dt><dd><p>Specifies the minimum value that the occurrence value must
              match or exceed. This attribute is OPTIONAL and is only used
              when the <code class="sgmltag-element">datatype</code> attribute has been defined
              and the data type referenced by the <code class="sgmltag-element">datatype</code>
              attribute is a scalar attribute. The value of this attribute
              must conform to the lexical form of the data type specified by
              the <code class="sgmltag-element">datatype </code>attribute.</p></dd><dt><span class="term">nf:occurrenceField/@maxValue</span></dt><dd><p>Specifies the maximum value that the occurrence value must
              be less than or equal to. This attribute is OPTIONAL and is only
              used when the <code class="sgmltag-element">datatype</code> attribute has been
              defined and the data type referenced by the
              <code class="sgmltag-element">datatype</code> attribute is a scalar attribute. The
              value of this attribute must conform to the lexical form of the
              data type specified by the <code class="sgmltag-element">datatype</code>
              attribute.</p></dd><dt><span class="term">nf:occurrenceField/@valuePattern</span></dt><dd><p>Specifies the regular expression that the occurrence value
              must match. This attribute is OPTIONAL.</p></dd><dt><span class="term">nf:occurrenceField/nf:subjectIdentifier</span></dt><dd><p>Contains a single subject identifier for the occurrence
              type. This element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:occurrenceField/nf:displayName</span></dt><dd><p>Contains the human-readable display name for the
              occurrence type. This element is OPTIONAL and
              NON-REPEATABLE.</p></dd><dt><span class="term">nf:occurrenceField/nf:extension</span></dt><dd><p>Contains a single NPCL schema extension value for the
              topic occurrence constraint that binds the occurrence type to
              this topic type or for the occurrence type itself. This element
              is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:occurrenceField/{##other}</span></dt><dd><p>An extension point in the NPCL Forms XML Schema which
              allows any number of elements from any namespace other than the
              NPCL Forms XML Schema namespace to appear as the last child
              elements of an <code class="sgmltag-element">occurrenceField</code>
              element.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e4644"></a><code class="sgmltag-element">associationField</code> Element</h4></div></div></div><p>The <code class="sgmltag-element">associationField</code> element contains the
        schema information required to create a form field for specifying a
        relationship between an instance of the topic type defined by the
        parent <code class="sgmltag-element">topicType</code> element and other topics in the
        topic map. The <code class="sgmltag-element">associationField</code> element has the
        following syntax:</p><pre class="programlisting">&lt;nf:associationField&gt;
  &lt;nf:associationType id="..."&gt;
    &lt;nf:subjectIdentifier&gt; <i>PSI</i> &lt;/nf:subjectIdentifier&gt;
    &lt;nf:displayName&gt; <i>NAME</i> &lt;/nf:displayName&gt;
    &lt;nf:extension ... &gt; ... &lt;/nf:extension&gt;
  &lt;/nf:associationType&gt;
  &lt;nf:thisRole id="..."
      minCardinality="<i>MINCARD</i>"
      maxCardinality="<i>MAXCARD</i>"&gt;
    &lt;nf:subjectIdentifier&gt; <i>PSI</i> &lt;/nf:subjectIdentifier&gt;
    &lt;nf:displayName&gt; <i>NAME</i> &lt;/nf:displayName&gt;
    &lt;nf:extension ... &gt; ... &lt;/nf:extension&gt;
    &lt;nf:rolePlayerType id="..." 
        isAbstract="<i>true|false</i>"
        minCardinality="<i>MINCARD</i>"
        maxCardinality="<i>MAXCARD</i>"
        associationSpecificCardinality="<i>true|false</i>"&gt;
      &lt;nf:subjectIdentifier&gt; <i>PSI</i> &lt;/nf:subjectIdentifier&gt;
      &lt;nf:displayName&gt; <i>NAME</i> &lt;/nf:displayName&gt;
      &lt;nf:extension ... &gt; ... &lt;/nf:extension&gt;
   &lt;/nf:rolePlayerType&gt;
  &lt;/nf:thisRole&gt;
  &lt;nf:otherRole id="..."
      minCardinality="<i>MINCARD</i>"
      maxCardinality="<i>MAXCARD</i>"&gt;
    &lt;nf:subjectIdentifier&gt; <i>PSI</i> &lt;/nf:subjectIdentifier&gt;
    &lt;nf:displayName&gt; <i>NAME</i> &lt;/nf:displayName&gt;
    &lt;nf:extension ... &gt; ... &lt;/nf:extension&gt;
    &lt;nf:rolePlayerType id="..."
        isAbstract="<i>true|false</i>"
        minCardinality="<i>MINCARD</i>"
        maxCardinality="<i>MAXCARD</i>"
        associationSpecificCardinality="<i>true|false</i>"&gt;
      &lt;nf:subjectIdentifier&gt; <i>PSI</i> &lt;/nf:subjectIdentifier&gt;
      &lt;nf:displayName&gt; <i>NAME</i> &lt;/nf:displayName&gt;
      &lt;nf:extension ... &gt; ... &lt;/nf:extension&gt;
   &lt;/nf:rolePlayerType&gt;
  &lt;/nf:otherRole&gt;
  ...
&lt;/nf:associationField&gt;</pre><div class="variablelist"><dl><dt><span class="term">nf:associationField/nf:associationType</span></dt><dd><p>Contains information about the association type for the
              relationship. This element is REQUIRED and NON-REPEATABLE</p><div class="note"><h3 class="title">Note</h3><p>Each <code class="sgmltag-element">associationField</code> element
                specifies the roles and role players for one association type
                / role type binding for the topic type. NPCL allows a topic to
                be constrained to be a role player in a specific role type
                without specifying which association type that role must be in
                - in such cases, a complete NPCL Forms document will list all
                possible combinations of that role type and association types
                that allow that role type to occur as separate
                <code class="sgmltag-element">associationField</code> elements.</p></div></dd><dt><span class="term">nf:associationField/nf:associationType/@id</span></dt><dd><p>Contains the ID of the association type that gives rise to
              this field. If the schema is stored in a topic map in a TMCore
              database, then the value of this attribute will be the OID of
              the topic that defines the association type.</p></dd><dt><span class="term">nf:associationField/nf:associationType/nf:subjectIdentifier</span></dt><dd><p>Contains a single subject identifier URI for the
              association type. This element is OPTIONAL and
              REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:associationType/nf:displayName</span></dt><dd><p>Contains a display label for the association type. This
              element is OPTIONAL and NON-REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:associationType/nf:extension</span></dt><dd><p>Contains a single NPCL schema extension value for the
              association type. This element is OPTIONAL and
              REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:thisRole</span></dt><dd><p>Contains the schema information for the type of role that
              can be played by this topic type. This element is REQUIRED and
              NON-REPEATABLE.</p></dd><dt><span class="term">nf:assocaitionField/nf:thisRole/@id</span></dt><dd><p>Contains the ID of the role type that is played by this
              topic type. If the schema is stored in a topic map in a TMCore
              database, the value of this attribute will be the database OID
              of the topic that defines the role type.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/@minCardinality</span></dt><dd><p>Specifies the lower bound on the number of times an
              instance of the topic type must play the role defined by the
              parent <code class="sgmltag-element">thisRole</code> element. This attribute is
              REQUIRED and its value must be a non-negative integer.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/@maxCardinality</span></dt><dd><p>Specifies the upper bound on the number of times an
              instance of the topic type must play the role defined by the
              parent <code class="sgmltag-element">thisRole</code> element. This attribute is
              REQUIRED and its value must be either a non-negative integer or
              the string "unbounded" to indicate that there is no upper
              bound.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/@associationSpecificCardinality</span></dt><dd><p>A boolean field that indicates if the cardinality values
              specified by the <code class="sgmltag-element">minCardinality</code> and
              <code class="sgmltag-element">maxCardinality</code> attribute apply to any
              association in which the topic plays the type of role defined by
              the <code class="sgmltag-element">thisRole</code> element (when the attribute
              value is 'false'), or only to the associations of the type
              defined by the <code class="sgmltag-element">associationType</code> element in
              which the topic plays the type of role defined by the
              <code class="sgmltag-element">thisRole</code> element (when the attribute value is
              'true'). This attribute is OPTIONAL and if not present defaults
              to the value 'false'.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:subjectIdentifier</span></dt><dd><p>Contains a single URI subject identifier for this role
              type. This element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:displayName</span></dt><dd><p>Contains a display label for the role type. This element
              is OPTIONAL and NON-REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:extension</span></dt><dd><p>Contains a single NPCL schema extension value for this
              role type. This element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType</span></dt><dd><p>Contains the schema information for one of the types of
              topic that can play the role type defined by the parent
              <code class="sgmltag-element">thisRole</code> element. This element is REQUIRED
              and REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType/@id</span></dt><dd><p>Contains the ID of the topic type that is described by
              this <code class="sgmltag-element">rolePlayerType</code> element. If the schema is
              stored in a topic map in a TMCore database then the value of
              this attribute will be the database OID of the topic that
              defines the topic type.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType/@isAbtract</span></dt><dd><p>Contains a boolean value indicating if the topic type
              described by this <code class="sgmltag-element">rolePlayerType</code> element is
              marked as abstract in the schema.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType/@minCardinality</span></dt><dd><p>Specifies the lower bound on the number of times an
              instance of this role player topic type must play the role
              defined by the parent <code class="sgmltag-element">thisRole</code> element. This
              attribute is REQUIRED and its value must be a non-negative
              integer.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType/@maxCardinality</span></dt><dd><p>Specifies the upper bound on the number of times an
              instance of this role player topic type must play the role
              defined by the parent <code class="sgmltag-element">thisRole</code> element. This
              attribute is REQUIRED and its value must be either a
              non-negative integer or the string "unbounded" to indicate that
              there is no upper bound.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType/@associationSpecificCardinality</span></dt><dd><p>A boolean field that indicates if the cardinality values
              specified by the <code class="sgmltag-element">minCardinality</code> and
              <code class="sgmltag-element">maxCardinality</code> attribute apply to any
              association in which the topic plays the type of role defined by
              the parent <code class="sgmltag-element">thisRole</code> element (when the
              attribute value is 'false'), or only to the associations of the
              type defined by the ancestor <code class="sgmltag-element">associationType</code>
              element in which the topic plays the type of role defined by the
              parent <code class="sgmltag-element">thisRole</code> element (when the attribute
              value is 'true'). This attribute is OPTIONAL and if not present
              defaults to the value 'false'.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType/nf:subjectIdentifier</span></dt><dd><p>Contains a single URI subject identifier for this role
              player topic type. This element is OPTIONAL and
              REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType/nf:displayName</span></dt><dd><p>Contains a single displayable label for this role player
              topic type. This element is OPTIONAL and NON-REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:thisRole/nf:rolePlayerType/nf:extension</span></dt><dd><p>Contains a single NPCL schema extension value for the role
              player topic type. This element is OPTIONAL and
              REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:otherRole</span></dt><dd><p>Contains the schema information for one of the other types
              of role allowed on the association. This element is OPTIONAL and
              REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/@minCardinality</span></dt><dd><p>Specifies the lower bound on the number of times a role of
              this type may appear in the association. This attribute is
              REQUIRED and its value must be a non-negative integer.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/@maxCardinality</span></dt><dd><p>Specifies the upper bound on the number of times a role of
              this type may appear in the association. This attribute is
              REQUIRED and its value must be either a non-negative integer or
              the string "unbounded" indicating that there is no upper
              bound.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:subjectIdentifier</span></dt><dd><p>Contains a single URI subject identifier for this role
              type. This element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:displayName</span></dt><dd><p>Contains a display label for the role type. This element
              is OPTIONAL and NON-REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:extension</span></dt><dd><p>Contains a single NPCL schema extension value for this
              role type. This element is OPTIONAL and REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:rolePlayerType</span></dt><dd><p>Contains the schema information for one of the types of
              topic that can play the role type defined by the parent
              <code class="sgmltag-element">otherRole</code> element. This element is REQUIRED
              and REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:rolePlayerType/@id</span></dt><dd><p>Contains the ID of the topic type that is described by
              this <code class="sgmltag-element">rolePlayerType</code> element. If the schema is
              stored in a topic map in a TMCore database then the value of
              this attribute will be the database OID of the topic that
              defines the topic type.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:rolePlayerType/@isAbtract</span></dt><dd><p>Contains a boolean value indicating if the topic type
              described by this <code class="sgmltag-element">rolePlayerType</code> element is
              marked as abstract in the schema.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:rolePlayerType/@minCardinality</span></dt><dd><p>Specifies the lower bound on the number of times an
              instance of this role player topic type must play the role
              defined by the parent <code class="sgmltag-element">otherRole</code> element. This
              attribute is REQUIRED and its value must be a non-negative
              integer.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:rolePlayerType/@maxCardinality</span></dt><dd><p>Specifies the upper bound on the number of times an
              instance of this role player topic type must play the role
              defined by the parent <code class="sgmltag-element">otherRole</code> element. This
              attribute is REQUIRED and its value must be either a
              non-negative integer or the string "unbounded" to indicate that
              there is no upper bound.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:rolePlayerType/@associationSpecificCardinality</span></dt><dd><p>A boolean field that indicates if the cardinality values
              specified by the <code class="sgmltag-element">minCardinality</code> and
              <code class="sgmltag-element">maxCardinality</code> attribute apply to any
              association in which the topic plays the type of role defined by
              the parent <code class="sgmltag-element">otherRole</code> element (when the
              attribute value is 'false'), or only to the associations of the
              type defined by the ancestor <code class="sgmltag-element">associationType</code>
              element in which the topic plays the type of role defined by the
              parent <code class="sgmltag-element">otherRole</code> element (when the attribute
              value is 'true'). This attribute is OPTIONAL and if not present
              defaults to the value 'false'.</p></dd><dt><span class="term">nf:associationField/nf:otherRole/nf:rolePlayerType/nf:subjectIdentifier</span></dt><dd><p>Contains a single URI subject identifier for this role
              player topic type. This element is OPTIONAL and
              REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:otherRoleType/nf:rolePlayerType/nf:displayName</span></dt><dd><p>Contains a single displayable label for this role player
              topic type. This element is OPTIONAL and NON-REPEATABLE.</p></dd><dt><span class="term">nf:associationField/nf:otherRoleType/nf:rolePlayerType/nf:extension</span></dt><dd><p>Contains a single NPCL schema extension value for the role
              player topic type. This element is OPTIONAL and
              REPEATABLE.</p></dd><dt><span class="term">nf:associationField/{##other}</span></dt><dd><p>An extension point in the NPCL Forms XML Schema that
              allows any number of elements from other namespaces to appear as
              the last children of an <code class="sgmltag-element">associationField</code>
              element.</p></dd></dl></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="results-schema"></a>Results Description Document Schema</h3></div></div></div><p>This schema is used to return results from operations which
      perform a single transactional update or a set of transactional updates
      on one or more topic maps. For operations invoked over SOAP, the results
      description document will be returned in the body of the SOAP response
      message. For operations invoked against ASP.NET pages directly, the
      result document will be contained in the body of the HTTP
      response.</p><p>The structure of the results document is as follows.</p><pre class="programlisting">&lt;res:results containsError="true|false"&gt;
  &lt;res:result ... &gt; 
    ...
  &lt;/res:result&gt;
&lt;/res:results&gt;</pre><div class="variablelist"><dl><dt><span class="term">res:results/@containsError</span></dt><dd><p>A boolean flag that is set to true if at least one of the
            transactions failed, and true if and only if every transaction
            succeeded. This attribute is REQUIRED.</p></dd><dt><span class="term">res:results/res:result</span></dt><dd><p>Contains the detailed result information for a single
            transaction. The syntax of this element is as described
            below.</p></dd></dl></div><p>Each <code class="sgmltag-element">res:result</code> element reports the status of a
      single transaction performed during the request processing. The optional
      <code class="sgmltag-element">key</code> attribute on this element allows the result
      description to be correlated to one of the transactions in the request.
      Each <code class="sgmltag-element">res:result</code> element has has the following
      structure:</p><pre class="programlisting">&lt;res:result isError="true|false"&gt;
  &lt;res:error code="CODE" key="KEY"&gt; 
    &lt;res:message&gt; ERROR MESSAGE &lt;/res:message&gt;
    &lt;res:action role="ROLE"&gt; ACTION MESSAGE &lt;/res:action&gt;
    &lt;res:cause&gt;
      &lt;res:message&gt; EXCEPTION MESSAGE &lt;/res:message&gt;
      &lt;res:type&gt; EXCEPTION TYPE &lt;/res:type&gt;
      &lt;res:stacktrace&gt; EXCEPTION STACK &lt;/res:stacktrace&gt;
    &lt;/res:cause&gt;
    ...
  &lt;/res:error&gt;
  ...
&lt;/res:result&gt;</pre><div class="variablelist"><dl><dt><span class="term">res:result/@key</span></dt><dd><p>Contains a string value that can be used to correlate the
            result report to part of the operation request. The precise way in
            which this is achieved is operation-specific and described in the
            operation definition. This attribute is OPTIONAL, and may be
            omitted if the result is for a single transaction.</p></dd><dt><span class="term">res:result/@isError</span></dt><dd><p>Contains a boolean flag that is set to true if the operation
            is reporting an error. This attribute is OPTIONAL and defaults to
            false.</p></dd><dt><span class="term">res:result/res:error</span></dt><dd><p>Wrapper element for reporting detail on an error that
            occurred in the processing of the operation. This element is
            OPTIONAL. It SHOULD be present if the <code class="sgmltag-element">isError</code>
            attribute of the parent <code class="sgmltag-element">res:result</code> element is
            set to true, it SHOULD NOT be present if the
            <code class="sgmltag-element">isError</code> attribute of the parent res:result
            element is set to false.</p></dd><dt><span class="term">res:result/res:error/@code</span></dt><dd><p>Contains the error code for the error being reported. Error
            codes are service-specific and defined as part of the service
            description. The error code is specified in this attribute as a
            string value. This attribute is REQUIRED.</p></dd><dt><span class="term">res:result/res:error/res:message</span></dt><dd><p>Contains an error message for the error being reported. This
            element is OPTIONAL.</p></dd><dt><span class="term">res:result/res:error/res:action</span></dt><dd><p>The text contained in this element describes the action(s)
            that can be taken to resolve the reported error.</p></dd><dt><span class="term">res:result/res:error/res:action/@role</span></dt><dd><p>This attribute identifies which user role can perform the
            corrective action described in the content of the element. This
            attribute has two allowed value. If the value is 'user', then the
            action can be performed by the user who issued the request. If the
            value is 'admin' then the corrective action requires
            administrative intervention on the server.</p></dd><dt><span class="term">res:result/res:error/res:cause</span></dt><dd><p>This OPTIONAL element describes the underlying exception
            that caused the process to fail. This element provides additional
            detail which can be helpful in determining the cause of certain
            errors.</p></dd><dt><span class="term">res:result/res:error/res:message</span></dt><dd><p>Contains the message reported by the exception that caused
            the process to fail.</p></dd><dt><span class="term">res:result/res:error/res:type</span></dt><dd><p>Specifies the type of exception that caused the process to
            fail.</p></dd><dt><span class="term">res:result/res:error/res:stacktrace</span></dt><dd><p>Contains the stack trace of the exception that caused the
            process to fail.</p></dd><dt><span class="term">res:result/res:error/{##other}</span></dt><dd><p>Any number of elements from any other namespace may appear
            after the <code class="sgmltag-element">res:message</code> element. This may be used
            by services to convey additional detailed error information (such
            as a stack trace or debug output) to the caller.</p></dd><dt><span class="term">res:result/{##other}</span></dt><dd><p>Any number of elements from any other namespace may appear
            as the last children of the <code class="sgmltag-element">res:result</code> element.
            This may be used by services to convey additional detailed
            response information (such as performance statistics). This
            extension point SHOULD NOT be used to convey detailed error
            information - instead the extension point inside the
            <code class="sgmltag-element">res:error</code> element should be used.</p></dd></dl></div></div></div></div></body></html>