<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Service Operations</title><link rel="stylesheet" href="../doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.2"><link rel="start" href="index.html" title="TMCore Web Services Guide"><link rel="up" href="ar01s04.html" title="NPCL Web Services Definition"><link rel="prev" href="ar01s04.html" title="NPCL Web Services Definition"><link rel="next" href="apa.html" title="A.&nbsp;Schema Definitions"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="pageheader"><table class="logo" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td><span class="networked">Networked</span><span class="planet">Planet</span></td><td align="right"><span class="title">TMCore Web Services Guide</span></td></tr></table></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Service Operations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s04.html"><img src="../graphics/prev.png" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">NPCL Web Services Definition</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="apa.html"><img src="../graphics/next.png" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1941"></a>Service Operations</h3></div></div></div><p>This section describes the methods supported by the NPCL Web
      Services.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1946"></a>Get Schema</h4></div></div></div><p>Returns the full set of NPCL types and constraints contained in
        a single identified topic map.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1951"></a>Method Name</h5></div></div></div><p><code class="methodname">GetSchema</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1957"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to return the NPCL schema
                for.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1967"></a>Returns</h5></div></div></div><p>All of the NPCL types and constraints read from the named
          topic map will be returned as a document conforming to the NPCL XML
          Schema.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1972"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>INVALID_SCHEMA</td><td>There was an error processing the schema information
                  contained in the topic map. This error condition cannot be
                  fixed without first modifying the topic map to correct the
                  schema information it contains.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e1997"></a>Examples</h5></div></div></div><div class="example"><a name="d0e2000"></a><p class="title"><b>Example&nbsp;47.&nbsp;Invoking the GetSchema Operation using HTTP GET</b></p><p>To get the schema for a topic map you can simply use a HTTP
            GET with a URL like the following:</p><pre class="programlisting">http://topicmaps.mycorp.com/npclws/GetSchema.aspx?topicmap=mytopicmap</pre></div><div class="example"><a name="d0e2007"></a><p class="title"><b>Example&nbsp;48.&nbsp;Invoking the GetSchema Operation using HTTP POST</b></p><p>As an alternative the the GET method, you can POST an XML
            document containing the request parameters to the GetSchema.aspx
            request page. The XML document should look like this:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e2014"></a><p class="title"><b>Example&nbsp;49.&nbsp;Invoking the GetSchema Operation over SOAP using the Web
            Client library</b></p><p>The following C# snippet shows how to get the NPCL schema
            for a topic map using the Web Client library.</p><pre class="programlisting">NpclClient client = new NpclClient("http://topicmaps.mycorp.com/npclws/NpclSchemaService.asmx");
XmlNode npclSchema = client.GetSchema("mytopicmap");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2023"></a>Get Forms Schema</h4></div></div></div><p>Returns an XML document conforming to the NPCL Forms XML Schema
        which describes the occurrence and association constraints for each
        topic type in the specified topic map.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2028"></a>Method Name</h5></div></div></div><p><code class="methodname">GetFormsSchema</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2034"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to be read.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2044"></a>Returns</h5></div></div></div><p>On success, returns an XML document conforming to the NPCL
          Forms XML Schema containing one <code class="sgmltag-element">nf:topicType</code>
          element for each topic type defined in the NPCL schema for the
          specified topic map.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2052"></a>Examples</h5></div></div></div><div class="example"><a name="d0e2055"></a><p class="title"><b>Example&nbsp;50.&nbsp;Invoking the GetFormsSchema Operation using HTTP
            GET</b></p><p>To get the schema for a topic map you can simply use a HTTP
            GET with a URL like the following:</p><pre class="programlisting">http://topicmaps.mycorp.com/npclws/GetFormsSchema.aspx?topicmap=mytopicmap</pre></div><div class="example"><a name="d0e2062"></a><p class="title"><b>Example&nbsp;51.&nbsp;Invoking the GetFormsSchema Operation using HTTP
            POST</b></p><p>As an alternative the the GET method, you can POST an XML
            document containing the request parameters to the GetSchema.aspx
            request page. The XML document should look like this:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e2069"></a><p class="title"><b>Example&nbsp;52.&nbsp;Invoking the GetFormsSchema Operation over SOAP using the
            Web Client library</b></p><p>The following C# snippet shows how to get the NPCL schema
            for a topic map using the Web Client library.</p><pre class="programlisting">NpclClient client = new NpclClient("http://topicmaps.mycorp.com/npclws/NpclSchemaService.asmx");
XmlNode npclSchema = client.GetFormsSchema("mytopicmap");</pre></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2076"></a>Get Forms Schema For Type</h4></div></div></div><p>Returns an XML document conforming to the NPCL Forms XML Schema
        which describes the occurrence and association constraints for the
        topic type in the specified topic map with the specified subject
        identifier.</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2081"></a>Method Name</h5></div></div></div><p><code class="methodname">GetFormsSchemaForType</code></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2087"></a>Parameters</h5></div></div></div><div class="variablelist"><dl><dt><span class="term">topicmap</span></dt><dd><p>The name of the topic map to be searched for the topic
                type.</p></dd><dt><span class="term">type</span></dt><dd><p>The subject identifier of the topic type whose
                constraints are to be returned.</p></dd></dl></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2103"></a>Returns</h5></div></div></div><p>On success, returns an NPCL Forms XML Schema containing on
          <code class="sgmltag-element">nf:topicType</code> element which describes all of the
          applicable constraints for the topic type identified by the request
          parameters.</p><div class="note"><h3 class="title">Note</h3><p>If the topic identified by the type parameter is not an NPCL
            topic type, then the NPCL Forms XML Schema document returned will
            consist of only an empty <code class="sgmltag-element">nf:schema</code>
            element.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2117"></a>Errors</h5></div></div></div><div class="informaltable"><table cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Error Code</th><th>Condition</th></tr></thead><tbody><tr><td>INVALID_TOPICMAP</td><td>The name provided in the
                  <em class="parameter"><code>topicmap</code></em> parameter does not match the
                  name of any topic map known to the server. The client should
                  retry, specifying the correct topic map name.</td></tr><tr><td>INVALID_SCHEMA</td><td>There was an error processing the schema information
                  contained in the topic map. This error condition cannot be
                  fixed without first modifying the topic map to correct the
                  schema information it contains.</td></tr><tr><td>NO_SUCH_TOPIC</td><td>No topic was found in the specified topic map that
                  has the requested type subject identifier.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2147"></a>Examples</h5></div></div></div><div class="example"><a name="d0e2150"></a><p class="title"><b>Example&nbsp;53.&nbsp;Invoking the GetFormsSchemaForType Operation using HTTP
            GET</b></p><p>To get the schema for a topic map you can simply use a HTTP
            GET, passing the parameters in the URL. Note that the subject
            identifier in the type parameter will require URL escaping.</p><pre class="programlisting">http://topicmaps.mycorp.com/npclws/GetFormsSchemaForType.aspx?topicmap=mytopicmap&amp;type=http%3A%2F%2Fpsi.example.com%2f...</pre></div><div class="example"><a name="d0e2157"></a><p class="title"><b>Example&nbsp;54.&nbsp;Invoking the GetFormsSchemaForType Operation using HTTP
            POST</b></p><p>As an alternative the the GET method, you can POST an XML
            document containing the request parameters to the
            GetFormsSchemaForType.aspx request page. The XML document should
            look like this:</p><pre class="programlisting">&lt;request&gt;
  &lt;param name="topicmap"&gt;mytopicmap&lt;/param&gt;
  &lt;param name="type"&gt;http://psi.example.com/organization/company&lt;/param&gt;
&lt;/request&gt;</pre></div><div class="example"><a name="d0e2164"></a><p class="title"><b>Example&nbsp;55.&nbsp;Invoking the GetFormsSchemaForType Operation over SOAP
            using the Web Client library</b></p><p>The following C# snippet shows how to get the NPCL schema
            for a topic map using the Web Client library.</p><pre class="programlisting">NpclClient client = new NpclClient("http://topicmaps.mycorp.com/npclws/NpclSchemaService.asmx");
XmlNode npclSchema = client.GetFormsSchemaForType("mytopicmap", "http://psi.example.com/organization/company");</pre></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s04.html"><img src="../graphics/prev.png" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ar01s04.html"><img src="../graphics/up.png" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="apa.html"><img src="../graphics/next.png" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">NPCL Web Services Definition&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="../graphics/home.png" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;A.&nbsp;Schema Definitions</td></tr></table></div></body></html>