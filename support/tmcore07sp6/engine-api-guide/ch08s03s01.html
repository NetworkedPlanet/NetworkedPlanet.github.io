<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Creating a Hierarchy</title><link rel="stylesheet" href="../doc.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.2"><link rel="start" href="index.html" title="TMCore Engine API Guide"><link rel="up" href="ch08s03.html" title="Creating and Accessing Topic Hierarchies"><link rel="prev" href="ch08s03.html" title="Creating and Accessing Topic Hierarchies"><link rel="next" href="ch08s03s02.html" title="Using The HierarchyManager API"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="pageheader"><table class="logo" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td><span class="networked">Networked</span><span class="planet">Planet</span></td><td align="right"><span class="title">TMCore Engine API Guide</span></td></tr></table></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Creating a Hierarchy</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch08s03.html"><img src="../graphics/prev.png" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Creating and Accessing Topic Hierarchies</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch08s03s02.html"><img src="../graphics/next.png" alt="Next"></a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2296"></a>Creating a Hierarchy</h3></div></div></div><p>In order for the <code class="classname">HierarchyManager</code> class
        to recognise a hierarchy, it is necessary to provide a
        <span class="emphasis"><em>hierarchy topic</em></span> which defines the hierarchy
        itself. This hierarchy topic contains associations to:</p><div class="itemizedlist"><ul type="disc"><li><p>the root topic of the hierarchy</p></li><li><p>a set of association type topics that will connect parent
            and child nodes.</p></li><li><p>a set of topics that represent the parent type roles between
            nodes of the hierarchy.</p></li><li><p>a set of topics that represent the child type roles between
            nodes of the hierarchy.</p></li></ul></div><p>Two topics are connected to partipicate in a hierarchy in a
        parent-child relationship iff:</p><div class="itemizedlist"><ul type="disc"><li><p>There is an association between the parent and child where
            the association type topic of the association is connected to the
            hierarchy topic.</p></li><li><p>There is an association between the parent and child where
            the parent topic plays one of the roles identified by the
            hierarchy topic.</p></li><li><p>There is an association between the parent and child where
            the child topic plays one of the roles identified by the hierarchy
            topic.</p></li></ul></div><p>The hierarchy topic and the types of associations used to
        specify the root topic and the hierarchy association types all use a
        fixed set of PSIs which are defined by Techquila (see <a href="http://www.techquila.com/psi/" target="_top">http://www.techquila.com/psi/</a>).</p><p>In the model specified by Techquila, each hierarchy must be
        defined by a topic of type "Facet". This topic represents the entire
        hierarchy as a whole and so should be given a name that reflects the
        name of the whole hierarchy. This topic is not the root of the
        hierarchy - it only acts to define how to find the hierarchy and how
        to traverse it. The root of the hierarchy is identified using an
        association of the type "Facet-Has-Root". This association must be a
        binary association between the topic representing the hierarchy
        (playing the role "Facet") and the topic which is the root of the
        hierarchy (playing the role "Facet-Root"). The hierarchy must be
        constructed as a set of topics all connected together using the same
        type of association. The type of association used to construct the
        hierarchy is identified using an association of the type
        "Facet-Has-Hierarchy-Type". This association must also be a binary
        association between the topic representing the hierarchy (playing the
        role "Facet") and the topic which types the associations used to
        construct the hierarchy (playing the role "Facet-Hierarchy-Type").
        Finally, the association roles played by the topics in the hierarchy
        must be divided into superordinate roles (i.e. the role played by the
        "parent" in the hierarchy) and subordinate roles (the role played by
        the "child" in the hierarchy). This is done by creating associations
        of type "Facet-Has-Superordinate-Role-Type" and
        "Facet-Has-Subordinate-Role-Type" between the facet topic and the
        topics defining the parent role type and child role type
        respectively.</p><p>All of the types described above have a Published Subject
        Identifier (PSI) defined for them by Techquila and summarised in the
        table below. If you follow the PSI URL you will be taken to pages
        which provide the official Techquila description for each of these
        topics.</p><div class="table"><a name="hierarchy-psis"></a><p class="title"><b>Table&nbsp;8.1.&nbsp;Topic PSIs for Topic Hierarchies</b></p><table summary="Topic PSIs for Topic Hierarchies" cellspacing="0" cellpadding="3" border="1"><colgroup><col><col></colgroup><thead><tr><th>Topic</th><th>PSI</th></tr></thead><tbody><tr><td>Facet</td><td>
                  <a href="http://www.techquila.com/psi/faceted-classification/#facet" target="_top">http://www.techquila.com/psi/faceted-classification/#facet</a>
                </td></tr><tr><td>Facet-Has-Hierarchy-Type</td><td>
                  <a href="http://www.techquila.com/psi/faceted-classification/#facet-has-hierarchy-type" target="_top">http://www.techquila.com/psi/faceted-classification/#facet-has-hierarchy-type</a>
                </td></tr><tr><td>Facet-Hierarchy-Type</td><td>
                  <a href="http://www.techquila.com/psi/faceted-classification/#facet-hierarchy-type" target="_top">http://www.techquila.com/psi/faceted-classification/#facet-hierarchy-type</a>
                </td></tr><tr><td>Facet-Has-Root</td><td>
                  <a href="http://www.techquila.com/psi/faceted-classification/#facet-has-root" target="_top">http://www.techquila.com/psi/faceted-classification/#facet-has-root</a>
                </td></tr><tr><td>Facet-Root</td><td>
                  <a href="http://www.techquila.com/psi/faceted-classification/#facet-root" target="_top">http://www.techquila.com/psi/faceted-classification/#facet-root</a>
                </td></tr><tr><td>Facet-Has-Subordinate-Role-Type</td><td>http://www.techquila.com/psi/faceted-classification/#facet-has-subordinate-role-type</td></tr><tr><td>Subordinate-Role-Type</td><td>
                  <a href="http://www.techquila.com/psi/hierarchy/#subordinate-role-type" target="_top">http://www.techquila.com/psi/hierarchy/#subordinate-role-type</a>
                </td></tr><tr><td>Facet-Has-Superordinate-Role-Type</td><td>http://www.techquila.com/psi/faceted-classification/#facet-has-superordinate-role-type</td></tr><tr><td>Superordinate-Role-Type</td><td>
                  <a href="http://www.techquila.com/psi/hierarchy/#superordinate-role-type" target="_top">http://www.techquila.com/psi/hierarchy/#superordinate-role-type</a>
                </td></tr></tbody></table></div><p>The diagram below shows this model in a schematic form.</p><div class="figure"><a name="d0e2420"></a><p class="title"><b>Figure&nbsp;8.1.&nbsp;Defining A Hierarchy Model</b></p><div class="mediaobject"><img src="../graphics/tmcore-api-guide/HierarchyStructure.png" alt="Defining A Hierarchy Model"></div></div><p>Although this may seem a little complex from the description
        above, it is actually very straightforward. The following procedure
        takes you through the process of defining a new hierarchy in an XTM
        topic map step by step.</p><div class="procedure"><a name="d0e2428"></a><p class="title"><b>Procedure&nbsp;8.1.&nbsp;Creating a Topic Hierarchy</b></p><ol type="1"><li><p class="title"><b>Create Or Import Techquila PSIs</b></p><p>This step only has to be performed once for each topic map
            and can be skipped by using <code class="sgmltag-element">subjectIndicatorRef</code>
            rather than <code class="sgmltag-element">topicRef</code> elements to refer to the
            Techquila topics. This can also be done through the TMCore Topic
            Map Editor web application or by invoking the static
            <code class="methodname">CreateHierarchySchemaTopics(ITopicMap)</code>
            method on the
            <code class="classname">NetworkedPlanet.TMCore.Utils.HierarchyManager</code>
            class.</p></li><li><p class="title"><b>Create The Hierarchy Facet</b></p><p>This is the topic which defines the hierarchy as a whole.
            This topic must be an instance of the Techquila topic "Facet". In
            XTM this can be achieved as follows:</p><pre class="programlisting">&lt;topic id="places"&gt;
  &lt;instanceOf&gt;
    &lt;subjectIndicatorRef xlink:href="http://www.techquila.com/psi/faceted-classification/#facet"/&gt;
  &lt;/instanceOf&gt;
  &lt;baseName&gt;
    &lt;baseNameString&gt;Places&lt;/baseNameString&gt;
  &lt;/baseName&gt;
  &lt;!-- Any other topic data --&gt;
&lt;/topic&gt;</pre><div class="note"><h3 class="title">Note</h3><p>The <code class="sgmltag-element">baseName</code> elements shown in this and
              all following examples are illustrative only - they are not
              required in constructing your hierarchy.</p></div></li><li><p class="title"><b>Create The Hierarchy Root</b></p><p>This is the topic that will be at the root of the hierarchy.
            Hierarchies can only have a single root topic. The root topic can
            be of any type (or types) you like. For example:</p><pre class="programlisting">&lt;topic id="the-world"&gt;
  &lt;instanceOf&gt;&lt;topicRef xlink:href="planet"/&gt;&lt;/instanceOf&gt;
  &lt;baseName&gt;
    &lt;baseNameString&gt;The World&lt;/baseNameString&gt;
  &lt;/baseName&gt;
&lt;/topic&gt;</pre><p>To identify this topic as the hierarchy root, you must
            create a "Facet-Has-Root" association between the facet topic
            created in step 2 and this root topic:</p><pre class="programlisting">&lt;!-- The root of the "Places" hierarchy is "The World" --&gt;
&lt;association&gt;
  &lt;instanceOf&gt;
    &lt;subjectIndicatorRef 
      xlink:href="http://www.techquila.com/psi/faceted-classification/#facet-has-root"/&gt;
  &lt;/instanceOf&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;
      &lt;subjectIndicatorRef
        xlink:href="http://www.techquila.com/psi/faceted-classification/#facet"/&gt;
    &lt;/roleSpec&gt;
    &lt;topicRef xlink:href="#places"/&gt;
  &lt;/member&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;
      &lt;subjectIndicatorRef
        xlink:href="http://www.techquila.com/psi/faceted-classification/#facet-root"/&gt;
    &lt;/roleSpec&gt;
    &lt;topicRef xlink:href="#the-world"/&gt;
  &lt;/member&gt;
&lt;/association&gt;
</pre></li><li><p class="title"><b>Specify The Hierarchy Association Type</b></p><p>All topics in our hierarchy must be associated with one
            another using a single type of association. The topic for that
            association type must be identified using a
            "Facet-Has-Hierarchy-Type" association between the facet topic
            created in step 2 and the association typing topic. For
            example:</p><pre class="programlisting">&lt;topic id="contains"&gt;
  &lt;baseName&gt;
    &lt;baseNameString&gt;Contains&lt;/baseNameString&gt;
  &lt;/baseName&gt;
&lt;/topic&gt;

&lt;!-- The hierarchy association for "Places" hierarchy is "Contains" --&gt;
&lt;association&gt;
  &lt;instanceOf&gt;
    &lt;subjectIndicatorRef 
      xlink:href="http://www.techquila.com/psi/faceted-classification/#facet-has-hierarchy-type"/&gt;
  &lt;/instanceOf&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;
      &lt;subjectIndicatorRef
        xlink:href="http://www.techquila.com/psi/faceted-classification/#facet"/&gt;
    &lt;/roleSpec&gt;
    &lt;topicRef xlink:href="#places"/&gt;
  &lt;/member&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;
      &lt;subjectIndicatorRef
        xlink:href="http://www.techquila.com/psi/faceted-classification/#facet-hierarchy-type"/&gt;
    &lt;/roleSpec&gt;
    &lt;topicRef xlink:href="#contains"/&gt;
  &lt;/member&gt;
&lt;/association&gt;</pre></li><li><p class="title"><b>Specify the Subordinate and Superordinate Roles</b></p><p>The subordinate role is the role played by the child in a
            hierarchy association; the superordinate role is the role played
            by the parent. These are identified by creating additional
            associations between the topic that defines the hierarchy and the
            topics that define the subordinate and superordinate role types.
            So for our "Contains" association type, we have the role types
            "Container" (the superordinate role type) and "Containee" (the
            subordinate role type):</p><pre class="programlisting">&lt;!-- Container role is a superordinate role type --&gt;
&lt;topic id="container"&gt;
  &lt;baseName&gt;
    &lt;baseNameString&gt;Container&lt;/baseNameString&gt;
  &lt;/baseName&gt;
&lt;/topic&gt;

&lt;association&gt;
  &lt;instanceOf&gt;
    &lt;subjectIndicatorRef
      xlink:href="http://www.techquila.com/psi/faceted-classification/#facet-has-superordinate-role-type"/&gt;
  &lt;/instanceOf&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;
      &lt;subjectIndicatorRef xlink:href="http://www.techquila.com/psi/faceted-classification/#facet"/&gt;
    &lt;/roleSpec&gt;
    &lt;topicRef xlink:href="#places"/&gt;
  &lt;/member&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;
      &lt;subjectIndicatorRef
        xlink:href="http://www.techquila.com/psi/hierarchy/#superordinate-role-type"/&gt;
    &lt;/roleSpec&gt;
    &lt;topicRef xlink:href="#container"/&gt;
  &lt;/member&gt;
&lt;/association&gt;

&lt;!-- Containee role is a subordinate role type --&gt;
&lt;topic id="containee"&gt;
  &lt;baseName&gt;
    &lt;baseNameString&gt;Containee&lt;/baseNameString&gt;
  &lt;/baseName&gt;
&lt;/topic&gt;

&lt;association&gt;
  &lt;instanceOf&gt;
    &lt;subjectIndicatorRef
      xlink:href="http://www.techquila.com/psi/faceted-classification/#facet-has-subordinate-role-type"/&gt;
  &lt;/instanceOf&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;
      &lt;subjectIndicatorRef xlink:href="http://www.techquila.com/psi/faceted-classification/#facet"/&gt;
    &lt;/roleSpec&gt;
    &lt;topicRef xlink:href="#places"/&gt;
  &lt;/member&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;
      &lt;subjectIndicatorRef
        xlink:href="http://www.techquila.com/psi/hierarchy/#subordinate-role-type"/&gt;
    &lt;/roleSpec&gt;
    &lt;topicRef xlink:href="#containee"/&gt;
  &lt;/member&gt;
&lt;/association&gt;</pre></li><li><p class="title"><b>Create Hierarchy Associations</b></p><p>Now create as many hierarchy associations as necessary. When
            specifiying all the children of a single topic in the hierarchy
            you can use either one association with multiple subordinate role
            players or multiple binary associations. Note that these
            associations are completely free of the supporting topic
            infrastructure used to create the hierarchy. This means that any
            other topic map application that is not aware of the significance
            of the Techquila PSIs will still present the container/containee
            relationships as intended.</p><pre class="programlisting">&lt;!-- The World contains Europe --&gt;
&lt;association&gt;
  &lt;instanceOf&gt;&lt;topicRef xlink:href="#contains"/&gt;&lt;/instanceOf&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;&lt;topicRef xlink:href="#container"/&gt;&lt;/instanceOf&gt;
    &lt;topicRef xlink:href="#the-world"/&gt;
  &lt;/member&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;&lt;topicRef xlink:href="#containee"/&gt;&lt;/instanceOf&gt;
    &lt;topicRef xlink:href="#europe"/&gt;
  &lt;/member&gt;
&lt;/association&gt;

&lt;!-- Europe contains UK and France --&gt;
&lt;association&gt;
  &lt;instanceOf&gt;&lt;topicRef xlink:href="#contains"/&gt;&lt;/instanceOf&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;&lt;topicRef xlink:href="#container"/&gt;&lt;/instanceOf&gt;
    &lt;topicRef xlink:href="#europe"/&gt;
  &lt;/member&gt;
  &lt;member&gt;
    &lt;roleSpec&gt;&lt;topicRef xlink:href="#containee"/&gt;&lt;/instanceOf&gt;
    &lt;topicRef xlink:href="#uk"/&gt;
    &lt;topicRef xlink:href="#france"/&gt;
  &lt;/member&gt;
&lt;/association&gt;</pre></li></ol></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch08s03.html"><img src="../graphics/prev.png" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch08s03.html"><img src="../graphics/up.png" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch08s03s02.html"><img src="../graphics/next.png" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">Creating and Accessing Topic Hierarchies&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="../graphics/home.png" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;Using The HierarchyManager API</td></tr></table></div></body></html>